(this.webpackJsonplego=this.webpackJsonplego||[]).push([[3],{101:function(e,t,i){},102:function(e,t,i){},108:function(e,t,i){},109:function(e,t,i){},110:function(e,t,i){},111:function(e,t,i){},112:function(e,t,i){},113:function(e,t,i){},114:function(e,t,i){},115:function(e,t,i){},116:function(e,t,i){},117:function(e,t,i){"use strict";i.r(t);var n=i(15),s=i.n(n),a=i(22),r=i(1),o=i(0),l=i.n(o),c=i(52),h=i.n(c),d=i(2),u=i(11),p=i(53),m=i.n(p),f=i(54),g=i.n(f),b=i(55),_=i.n(b),y=function(e,t,i){return'\n<div class="popup-main" style="width:'.concat(t,"px;height:").concat(i,'px">\n  <div class="popup-hide" onClick="_LEGO_UTILS_.popup.hide()" title="\u5173\u95ed"><i class="fas fa-times"></i></div>\n  <iframe src="').concat(e,'" frameborder="0" style="width:100%;height:100%;border:none"></iframe>\n</div>\n')},v=function(e,t,i){return'\n<div class="popup-main" style="width:'.concat(t,"px;height:").concat(i,'px">\n<div class="popup-hide" onClick="_LEGO_UTILS_.popup.hide()" title="\u5173\u95ed"><i class="fas fa-times"></i></div>\n  <div class="popup-box">').concat(e,"</div>\n</div>\n")},w=document.createElement("div");w.className="popup-mask";var E={},x=function(e){var t=JSON.parse(e.data);"LEGO_POPUP_HEIGHT"===t.type&&window.$(".popup-main").height(Math.min(650,t.height))},C={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;if(!e)return alert("\u7f3a\u5c11\u5fc5\u8981\u53c2\u6570");var n=/^(http|\/)/.test(e);return w.innerHTML=n?y(e,t,i):v(e,t,i),document.body.appendChild(w),window.addEventListener("message",x),{then:function(e){return E.onHide=e}}},hide:function(e){document.body.removeChild(w),window.removeEventListener("message",x),e&&"function"===typeof E.onHide&&(E.onHide(),delete E.onHide)}},k=i(56),j=i.n(k),N=(i(100),i(101),i(102),function(e){return null!==e&&("object"===typeof e&&!e.nodeType&&e!==e.window&&!(e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf")))}),O=function e(t){return N(t)?S({},t):Array.isArray(t)?t.map(e):t},S=function e(t){var i,n,s;for(n=1;n<arguments.length;n++)for(s in i=arguments[n])i.hasOwnProperty(s)&&(i[s]&&N(i[s])?(t.hasOwnProperty(s)||(t[s]={}),e(t[s],i[s])):Array.isArray(i[s])?t[s]=O(i[s]):t[s]=i[s]);return t},T=function(e,t){var i;if(e&&"object"===typeof e)if(Array.isArray(e)||"number"===typeof e.length&&e.length>0&&e.length-1 in e){for(i=0;i<e.length;i++)if(!1===t(i,e[i]))return}else if(Object.keys){var n=Object.keys(e);for(i=0;i<n.length;i++)if(!1===t(n[i],e[n[i]]))return}else for(i in e)if(e.hasOwnProperty(i)&&!1===t(i,e[i]))return},L=function(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0),e.dispatchEvent(i)};var A=i(3),I=function(){var e=!1,t=/xyz/.test((function(){window.postMessage("xyz")}))?/\b_super\b/:/.*/;return(I=function(){}).extend=function i(n){var s=this.prototype;e=!0;var a=new this;for(var r in e=!1,n)a[r]="function"===typeof n[r]&&"function"===typeof s[r]&&t.test(n[r])?function(e,t){return function(){var i=this._super;this._super=s[e];var n=t.apply(this,arguments);return this._super=i,n}}(r,n[r]):n[r];function o(){!e&&this.init&&this.init.apply(this,arguments)}return o.prototype=a,o.prototype.constructor=o,o.extend=i,o},I}();function P(e,t,i,n){try{switch(e.format){case"ipv4":!function(e){var t=e.split(".");if(4!==t.length)throw new Error("error_ipv4");t.forEach((function(e){if(isNaN(+e)||+e<0||+e>255)throw new Error("error_ipv4")}))}(t);break;case"ipv6":!function(e){if(!e.match("^(?:(?:(?:[a-fA-F0-9]{1,4}:){6}|(?=(?:[a-fA-F0-9]{0,4}:){2,6}(?:[0-9]{1,3}.){3}[0-9]{1,3}$)(([0-9a-fA-F]{1,4}:){1,5}|:)((:[0-9a-fA-F]{1,4}){1,5}:|:)|::(?:[a-fA-F0-9]{1,4}:){5})(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])|(?:[a-fA-F0-9]{1,4}:){7}[a-fA-F0-9]{1,4}|(?=(?:[a-fA-F0-9]{0,4}:){0,7}[a-fA-F0-9]{0,4}$)(([0-9a-fA-F]{1,4}:){1,7}|:)((:[0-9a-fA-F]{1,4}){1,7}|:)|(?:[a-fA-F0-9]{1,4}:){7}:|:(:[a-fA-F0-9]{1,4}){7})$"))throw new Error("error_ipv6")}(t);break;case"hostname":!function(e){if(!e.match("(?=^.{4,253}$)(^((?!-)[a-zA-Z0-9-]{0,62}[a-zA-Z0-9].)+[a-zA-Z]{2,63}$)"))throw new Error("error_hostname")}(t)}return[]}catch(s){return[{path:i,property:"format",message:n(s.message)}]}}var V,R=I.extend({init:function(e,t,i,n){this.jsoneditor=e,this.schema=t||this.jsoneditor.schema,this.options=i||{},this.translate=this.jsoneditor.translate||n.translate,this.defaults=n},fitTest:function(e,t,i){i="undefined"===typeof i?1e7:i;var n={match:0,extra:0};if("object"===typeof e&&null!==e){var s=this._getSchema(t).properties;for(var a in s)if(s.hasOwnProperty(a)){if("object"===typeof e[a]&&"object"===typeof s[a]&&"object"===typeof s[a].properties){var r=this.fitTest(e[a],s[a],i/100);n.match+=r.match,n.extra+=r.extra}"undefined"!==typeof e[a]&&(n.match+=i)}else n.extra+=i}return n},_getSchema:function(e){return"undefined"===typeof e?S({},this.jsoneditor.expandRefs(this.schema)):e},validate:function(e){return this._validateSchema(this.schema,e)},_validateSchema:function(e,t,i){var n=this,s=[];return i=i||"root",e=S({},this.jsoneditor.expandRefs(e)),"undefined"===typeof t?this._validateV3Required(e,t,i):(Object.keys(e).forEach((function(a){n._validateSubSchema[a]&&s.push.apply(s,Object(A.a)(n._validateSubSchema[a].call(n,e,t,i)))})),s.push.apply(s,Object(A.a)(this._validateByValueType(e,t,i))),e.links&&e.links.forEach((function(a,r){a.rel&&"describedby"===a.rel.toLowerCase()&&(e=n._expandSchemaLink(e,r),s.push.apply(s,Object(A.a)(n._validateSchema(e,t,i,n.translate))))})),-1!==["date","time","datetime-local"].indexOf(e.format)&&s.push.apply(s,Object(A.a)(this._validateDateTimeSubSchema(e,t,i))),s.push.apply(s,Object(A.a)(this._validateCustomValidator(e,t,i))),this._removeDuplicateErrors(s))},_expandSchemaLink:function(e,t){var i=e.links[t].href,n=this.jsoneditor.root.getValue(),s=this.jsoneditor.compileTemplate(i,this.jsoneditor.template),a=document.location.origin+document.location.pathname+s(n);return e.links=e.links.slice(0,t).concat(e.links.slice(t+1)),S({},e,this.jsoneditor.refs[a])},_validateV3Required:function(e,t,i){return"undefined"!==typeof e.required&&!0===e.required||"undefined"===typeof e.required&&!0===this.jsoneditor.options.required_by_default?[{path:i,property:"required",message:this.translate("error_notset")}]:[]},_validateSubSchema:{enum:function(e,t,i){return[]},extends:function(e,t,i){var n=this;return e.extends.reduce((function(e,s){return e.push.apply(e,Object(A.a)(n._validateSchema(s,t,i))),e}),[])},allOf:function(e,t,i){var n=this;return e.allOf.reduce((function(e,s){return e.push.apply(e,Object(A.a)(n._validateSchema(s,t,i))),e}),[])},anyOf:function(e,t,i){var n=this;return e.anyOf.some((function(e){return!n._validateSchema(e,t,i).length}))?[]:[{path:i,property:"anyOf",message:this.translate("error_anyOf")}]},oneOf:function(e,t,i){var n=this,s=0,a=[];e.oneOf.forEach((function(e,r){var o=n._validateSchema(e,t,i);o.length||s++,o.forEach((function(e){e.path="".concat(i,".oneOf[").concat(r,"]").concat(e.path.substr(i.length))})),a.push.apply(a,Object(A.a)(o))}));var r=[];return 1!==s&&(r.push({path:i,property:"oneOf",message:this.translate("error_oneOf",[s])}),r.push.apply(r,a)),r},not:function(e,t,i){return this._validateSchema(e.not,t,i).length?[]:[{path:i,property:"not",message:this.translate("error_not")}]},type:function(e,t,i){var n=this;if(Array.isArray(e.type)){if(!e.type.some((function(e){return n._checkType(e,t)})))return[{path:i,property:"type",message:this.translate("error_type_union")}]}else if(-1!==["date","time","datetime-local"].indexOf(e.format)&&"integer"===e.type){if(!this._checkType("string",""+t))return[{path:i,property:"type",message:this.translate("error_type",[e.format])}]}else if(!this._checkType(e.type,t))return[{path:i,property:"type",message:this.translate("error_type",[e.type])}];return[]},disallow:function(e,t,i){var n=this;if(Array.isArray(e.disallow)){if(e.disallow.some((function(e){return n._checkType(e,t)})))return[{path:i,property:"disallow",message:this.translate("error_disallow_union")}]}else if(this._checkType(e.disallow,t))return[{path:i,property:"disallow",message:this.translate("error_disallow",[e.disallow])}];return[]}},_validateByValueType:function(e,t,i){var n=this,s=[],a=this;if(null===t)return s;if("number"===typeof t)Object.keys(e).forEach((function(r){n._validateNumberSubSchema[r]&&s.push.apply(s,Object(A.a)(n._validateNumberSubSchema[r].call(a,e,t,i)))}));else if("string"===typeof t)Object.keys(e).forEach((function(r){n._validateStringSubSchema[r]&&s.push.apply(s,Object(A.a)(n._validateStringSubSchema[r].call(a,e,t,i)))}));else if(Array.isArray(t))Object.keys(e).forEach((function(r){n._validateArraySubSchema[r]&&s.push.apply(s,Object(A.a)(n._validateArraySubSchema[r].call(a,e,t,i)))}));else if("object"===typeof t){var r={};Object.keys(e).forEach((function(o){n._validateObjectSubSchema[o]&&s.push.apply(s,Object(A.a)(n._validateObjectSubSchema[o].call(a,e,t,i,r)))})),"undefined"!==typeof e.additionalProperties||!this.jsoneditor.options.no_additional_properties||e.oneOf||e.anyOf||(e.additionalProperties=!1),Object.keys(e).forEach((function(o){"undefined"!==typeof n._validateObjectSubSchema2[o]&&s.push.apply(s,Object(A.a)(n._validateObjectSubSchema2[o].call(a,e,t,i,r)))}))}return s},_validateNumberSubSchema:{multipleOf:function(e,t,i){return this._validateNumberSubSchemaMultipleDivisible(e,t,i)},divisibleBy:function(e,t,i){return this._validateNumberSubSchemaMultipleDivisible(e,t,i)},maximum:function(e,t,i){var n=e.exclusiveMaximum?t<e.maximum:t<=e.maximum;return window.math?n=window.math[e.exclusiveMaximum?"smaller":"smallerEq"](window.math.bignumber(t),window.math.bignumber(e.maximum)):window.Decimal&&(n=new window.Decimal(t)[e.exclusiveMaximum?"lt":"lte"](new window.Decimal(e.maximum))),n?[]:[{path:i,property:"maximum",message:this.translate(e.exclusiveMaximum?"error_maximum_excl":"error_maximum_incl",[e.maximum])}]},minimum:function(e,t,i){var n=e.exclusiveMinimum?t>e.minimum:t>=e.minimum;return window.math?n=window.math[e.exclusiveMinimum?"larger":"largerEq"](window.math.bignumber(t),window.math.bignumber(e.minimum)):window.Decimal&&(n=new window.Decimal(t)[e.exclusiveMinimum?"gt":"gte"](new window.Decimal(e.minimum))),n?[]:[{path:i,property:"minimum",message:this.translate(e.exclusiveMinimum?"error_minimum_excl":"error_minimum_incl",[e.minimum])}]}},_validateNumberSubSchemaMultipleDivisible:function(e,t,i){var n=e.multipleOf||e.divisibleBy,s=t/n===Math.floor(t/n);return window.math?s=window.math.mod(window.math.bignumber(t),window.math.bignumber(n)).equals(0):window.Decimal&&(s=new window.Decimal(t).mod(new window.Decimal(n)).equals(0)),s?[]:[{path:i,property:e.multipleOf?"multipleOf":"divisibleBy",message:this.translate("error_multipleOf",[n])}]},_validateStringSubSchema:{maxLength:function(e,t,i){var n=[];return(t+"").length>e.maxLength&&n.push({path:i,property:"maxLength",message:this.translate("error_maxLength",[e.maxLength])}),n},minLength:function(e,t,i){return(t+"").length<e.minLength?[{path:i,property:"minLength",message:this.translate(1===e.minLength?"error_notempty":"error_minLength",[e.minLength])}]:[]},pattern:function(e,t,i){return new RegExp(e.pattern).test(t)?[]:[{path:i,property:"pattern",message:e.options&&e.options.patternmessage?e.options.patternmessage:this.translate("error_pattern",[e.pattern])}]}},_validateArraySubSchema:{items:function(e,t,i){var n=this,s=[];if(Array.isArray(e.items))for(var a=0;a<t.length;a++)if(e.items[a])s.push.apply(s,Object(A.a)(this._validateSchema(e.items[a],t[a],i+"."+a)));else{if(!0===e.additionalItems)break;if(!e.additionalItems){if(!1===e.additionalItems){s.push({path:i,property:"additionalItems",message:this.translate("error_additionalItems")});break}break}s.push.apply(s,Object(A.a)(this._validateSchema(e.additionalItems,t[a],i+"."+a)))}else t.forEach((function(t,a){s.push.apply(s,Object(A.a)(n._validateSchema(e.items,t,i+"."+a)))}));return s},maxItems:function(e,t,i){return t.length>e.maxItems?[{path:i,property:"maxItems",message:this.translate("error_maxItems",[e.maxItems])}]:[]},minItems:function(e,t,i){return t.length<e.minItems?[{path:i,property:"minItems",message:this.translate("error_minItems",[e.minItems])}]:[]},uniqueItems:function(e,t,i){for(var n={},s=0;s<t.length;s++){var a=JSON.stringify(t[s]);if(n[a])return[{path:i,property:"uniqueItems",message:this.translate("error_uniqueItems")}];n[a]=!0}return[]}},_validateObjectSubSchema:{maxProperties:function(e,t,i){return Object.keys(t).length>e.maxProperties?[{path:i,property:"maxProperties",message:this.translate("error_maxProperties",[e.maxProperties])}]:[]},minProperties:function(e,t,i){return Object.keys(t).length<e.minProperties?[{path:i,property:"minProperties",message:this.translate("error_minProperties",[e.minProperties])}]:[]},required:function(e,t,i){var n=this,s=[];return Array.isArray(e.required)&&e.required.forEach((function(e){if("undefined"===typeof t[e]){var a=n.jsoneditor.getEditor(i+"."+e);a&&-1!==["button","info"].indexOf(a.schema.format||a.schema.type)||s.push({path:i,property:"required",message:n.translate("error_required",[e])})}})),s},properties:function(e,t,i,n){var s=this,a=[];return Object.entries(e.properties).forEach((function(e){var o=Object(r.a)(e,2),l=o[0],c=o[1];n[l]=!0,a.push.apply(a,Object(A.a)(s._validateSchema(c,t[l],i+"."+l)))})),a},patternProperties:function(e,t,i,n){var s=this,a=[];return Object.entries(e.patternProperties).forEach((function(e){var o=Object(r.a)(e,2),l=o[0],c=o[1],h=new RegExp(l);Object.entries(t).forEach((function(e){var t=Object(r.a)(e,2),o=t[0],l=t[1];h.test(o)&&(n[o]=!0,a.push.apply(a,Object(A.a)(s._validateSchema(c,l,i+"."+o))))}))})),a}},_validateObjectSubSchema2:{additionalProperties:function(e,t,i,n){var s=[];for(var a in t)if(t.hasOwnProperty(a)&&!n[a]){if(!e.additionalProperties){s.push({path:i,property:"additionalProperties",message:this.translate("error_additional_properties",[a])});break}if(!0===e.additionalProperties)break;s.push.apply(s,Object(A.a)(this._validateSchema(e.additionalProperties,t[a],i+"."+a)))}return s},dependencies:function(e,t,i){var n=this,s=[];return Object.entries(e.dependencies).forEach((function(e){var a=Object(r.a)(e,2),o=a[0],l=a[1];"undefined"!==typeof t[o]&&(Array.isArray(l)?l.forEach((function(e){"undefined"===typeof t[e]&&s.push({path:i,property:"dependencies",message:n.translate("error_dependency",[e])})})):s.push.apply(s,Object(A.a)(n._validateSchema(l,t,i))))})),s}},_validateDateTimeSubSchema:function(e,t,i){var n=this,s=this.jsoneditor.getEditor(i),a=s&&s.flatpickr?s.flatpickr.config.dateFormat:{date:'"YYYY-MM-DD"',time:'"HH:MM"',"datetime-local":'"YYYY-MM-DD HH:MM"'}[e.format];if("integer"===e.type)return function(e,t,i){return 1*t<1?[{path:i,property:"format",message:n.translate("error_invalid_epoch")}]:t!==Math.abs(parseInt(t))?[{path:i,property:"format",message:n.translate("error_"+e.format.replace(/-/g,"_"),[a])}]:[]}(e,t,i);if(s&&s.flatpickr){if(s)return function(e,t,i,s){if(""!==t){var a;if("single"!==s.flatpickr.config.mode){var r="range"===s.flatpickr.config.mode?s.flatpickr.l10n.rangeSeparator:", ";a=s.flatpickr.selectedDates.map((function(e){return s.flatpickr.formatDate(e,s.flatpickr.config.dateFormat)})).join(r)}try{if(a){if(a!==t)throw new Error(s.flatpickr.config.mode+" mismatch")}else if(s.flatpickr.formatDate(s.flatpickr.parseDate(t,s.flatpickr.config.dateFormat),s.flatpickr.config.dateFormat)!==t)throw new Error("mismatch")}catch(l){var o=void 0!==s.flatpickr.config.errorDateFormat?s.flatpickr.config.errorDateFormat:s.flatpickr.config.dateFormat;return[{path:i,property:"format",message:n.translate("error_"+s.format.replace(/-/g,"_"),[o])}]}}return[]}(0,t,i,s)}else if(!{date:/^(\d{4}\D\d{2}\D\d{2})?$/,time:/^(\d{2}:\d{2}(?::\d{2})?)?$/,"datetime-local":/^(\d{4}\D\d{2}\D\d{2}[ T]\d{2}:\d{2}(?::\d{2})?)?$/}[e.format].test(t))return[{path:i,property:"format",message:this.translate("error_"+e.format.replace(/-/g,"_"),[a])}];return[]},_validateCustomValidator:function(e,t,i){var n=this,s=[];s.push.apply(s,Object(A.a)(P.call(this,e,t,i,this.translate)));var a=function(a){s.push.apply(s,Object(A.a)(a.call(n,e,t,i)))};return this.defaults.custom_validators.forEach(a),this.options.custom_validators&&this.options.custom_validators.forEach(a),s},_removeDuplicateErrors:function(e){return e.reduce((function(e,t){var i=!0;return e||(e=[]),e.forEach((function(e){e.message===t.message&&e.path===t.path&&e.property===t.property&&(e.errorcount++,i=!1)})),i&&(t.errorcount=1,e.push(t)),e}),[])},_checkType:function(e,t){var i={string:function(e){return"string"===typeof e},number:function(e){return"number"===typeof e},integer:function(e){return"number"===typeof e&&e===Math.floor(e)},boolean:function(e){return"boolean"===typeof e},array:function(e){return Array.isArray(e)},object:function(e){return null!==e&&!Array.isArray(e)&&"object"===typeof e},null:function(e){return null===e}};return"string"===typeof e?!i[e]||i[e](t):!this._validateSchema(e,t).length}}),F=I.extend({init:function(e){this.options=e||{},this.refs=this.options.refs||{},this.refs_with_info={},this.refs_prefix="#/counter/",this.refs_counter=1},load:function(e,t,i,n){var s=this;this._loadExternalRefs(e,(function(){s._getDefinitions(e,i+"#/definitions/"),t(s.expandRefs(e))}),i,this._getFileBase(n))},expandRefs:function(e,t){var i=this,n=S({},e);if(!n.$ref)return n;var s=this.refs_with_info[n.$ref];delete n.$ref;var a=s.$ref.startsWith("#")?s.fetchUrl:"",r=this._getRef(a,s);if(this.refs[r]){if(t&&this.refs[r].hasOwnProperty("allOf")){var o=this.refs[r].allOf;Object.keys(o).forEach((function(e){o[e]=i.expandRefs(o[e],!0)}))}}else console.warn("reference:'"+r+"' not found!");return this.extendSchemas(n,this.expandSchema(this.refs[r]))},expandSchema:function(e,t){var i=this;Object.entries(this._subSchema1).forEach((function(t){var n=Object(r.a)(t,2),s=n[0],a=n[1];e[s]&&a.call(i,e)}));var n=S({},e);return Object.entries(this._subSchema2).forEach((function(t){var s=Object(r.a)(t,2),a=s[0],o=s[1];e[a]&&(n=o.call(i,e,n))})),this.expandRefs(n)},_subSchema1:{type:function(e){"object"===typeof e.type&&(e.type=this._expandSubSchema(e.type))},disallow:function(e){"object"===typeof e.disallow&&(e.disallow=this._expandSubSchema(e.disallow))},anyOf:function(e){var t=this;Object.entries(e.anyOf).forEach((function(i){var n=Object(r.a)(i,2),s=n[0],a=n[1];e.anyOf[s]=t.expandSchema(a)}))},dependencies:function(e){var t=this;Object.entries(e.dependencies).forEach((function(i){var n=Object(r.a)(i,2),s=n[0],a=n[1];"object"!==typeof a||Array.isArray(a)||(e.dependencies[s]=t.expandSchema(a))}))},not:function(e){e.not=this.expandSchema(e.not)}},_subSchema2:{allOf:function(e,t){var i=this,n=S({},t);return Object.entries(e.allOf).forEach((function(t){var s=Object(r.a)(t,2),a=s[0],o=s[1];e.allOf[a]=i.expandRefs(o,!0),n=i.extendSchemas(n,i.expandSchema(o))})),delete n.allOf,n},extends:function(e,t){var i,n=this;return delete(i=Array.isArray(e.extends)?e.extends.reduce((function(e,t,i){return n.extendSchemas(e,n.expandSchema(t))}),t):this.extendSchemas(t,this.expandSchema(e.extends))).extends,i},oneOf:function(e,t){var i=this,n=S({},t);return delete n.oneOf,e.oneOf.reduce((function(e,t,s){return e.oneOf[s]=i.extendSchemas(i.expandSchema(t),n),e}),t),t}},_getRef:function(e,t){var i=e+t;return this.refs[i]?i:e+decodeURIComponent(t.$ref)},_expandSubSchema:function(e){var t=this;return Array.isArray(e)?e.map((function(e){return"object"===typeof value?t.expandSchema(e):e})):this.expandSchema(e)},_getDefinitions:function(e,t){var i=this;e.definitions&&Object.keys(e.definitions).forEach((function(n){i.refs[t+n]=e.definitions[n],e.definitions[n].definitions&&i._getDefinitions(e.definitions[n],t+n+"/definitions/")}))},_getExternalRefs:function(e,t){var i=this,n={},s=function(e){Object.keys(e).forEach((function(e){n[e]=!0}))};if(e.$ref&&"object"!==typeof e.$ref){var a=this.refs_prefix+this.refs_counter++;"#"===e.$ref.substr(0,1)||this.refs[e.$ref]||(n[e.$ref]=!0),this.refs_with_info[a]={fetchUrl:t,$ref:e.$ref},e.$ref=a}return Object.values(e).forEach((function(e){e&&"object"===typeof e&&(Array.isArray(e)?Object.values(e).forEach((function(e){e&&"object"===typeof e&&s(i._getExternalRefs(e,t))})):s(i._getExternalRefs(e,t)))})),n},_getFileBase:function(e){var t=this.options.ajaxBase;return"undefined"===typeof t&&(t=this._getFileBaseFromFileLocation(e)),t},_getFileBaseFromFileLocation:function(e){var t=e.split("/");return t.pop(),t.join("/")+"/"},_isLocalUrl:function(e,t){return t!==e.substr(0,t.length)&&"http"!==e.substr(0,4)&&"/"!==e.substr(0,1)},_loadExternalRefs:function(e,t,i,n){var s=this,a=this._getExternalRefs(e,i),r=0,o=0,l=!1;Object.keys(a).forEach((function(e){if(!s.refs[e]){if(!s.options.ajax)throw new Error("Must set ajax option to true to load external ref "+e);s.refs[e]="loading",o++;var i=s._isLocalUrl(n,e)?n+e:e,a=new XMLHttpRequest;a.overrideMimeType("application/json"),a.open("GET",i,!0),s.options.ajaxCredentials&&(a.withCredentials=s.options.ajaxCredentials),a.onreadystatechange=function(){if(4===a.readyState){if(200!==a.status)throw window.console.log(a),new Error("Failed to fetch ref via ajax- "+e);var n;try{n=JSON.parse(a.responseText)}catch(h){throw window.console.log(h),new Error("Failed to parse external ref "+i)}if("boolean"!==typeof n&&"object"!==typeof n||null===n||Array.isArray(n))throw new Error("External ref does not contain a valid schema - "+i);s.refs[e]=n;var c=s._getFileBaseFromFileLocation(i);s._getDefinitions(n,i+"#/definitions/"),s._loadExternalRefs(n,(function(){++r>=o&&!l&&(l=!0,t())}),i,c)}},a.send()}})),o||t()},extendSchemas:function(e,t){var i=this;e=S({},e),t=S({},t);var n={},s=function(e,s){!function(e,t){return("required"===e||"defaultProperties"===e)&&"object"===typeof t&&Array.isArray(t)}(e,s)?"type"!==e||"string"!==typeof s&&!Array.isArray(s)?"object"!==typeof s||Array.isArray(s)||null===s?n[e]=s:n[e]=i.extendSchemas(s,t[e]):a(s):n[e]=s.concat(t[e]).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[])},a=function(e){"string"===typeof e&&(e=[e]),"string"===typeof t.type&&(t.type=[t.type]),t.type&&t.type.length?n.type=e.filter((function(e){return-1!==t.type.indexOf(e)})):n.type=e,1===n.type.length&&"string"===typeof n.type[0]?n.type=n.type[0]:0===n.type.length&&delete n.type};return Object.entries(e).forEach((function(e){var i=Object(r.a)(e,2),a=i[0],o=i[1];"undefined"!==typeof t[a]?s(a,o):n[a]=o})),Object.entries(t).forEach((function(t){var i=Object(r.a)(t,2),s=i[0],a=i[1];"undefined"===typeof e[s]&&(n[s]=a)})),n}}),B=function(){var e=document.documentElement;return e.matches?"matches":e.webkitMatchesSelector?"webkitMatchesSelector":e.mozMatchesSelector?"mozMatchesSelector":e.msMatchesSelector?"msMatchesSelector":e.oMatchesSelector?"oMatchesSelector":void 0}(),H=I.extend({init:function(e){this.jsoneditor=e},options:{disable_theme_rules:!1},rules:{".je-upload-preview img":"float:left;margin:0 0.5rem 0.5rem 0;max-width:100%;max-height:100px"},getContainer:function(){return document.createElement("div")},getFloatRightLinkHolder:function(){var e=document.createElement("div");return e.style=e.style||{},e.style.cssFloat="right",e.style.marginLeft="10px",e},getModal:function(){var e=document.createElement("div");return e.style.backgroundColor="white",e.style.border="1px solid black",e.style.boxShadow="3px 3px black",e.style.position="absolute",e.style.zIndex="10",e.style.display="none",e},getGridContainer:function(){return document.createElement("div")},getGridRow:function(){var e=document.createElement("div");return e.classList.add("row"),e},getGridColumn:function(){return document.createElement("div")},setGridColumnSize:function(e,t){},getLink:function(e){var t=document.createElement("a");return t.setAttribute("href","#"),t.appendChild(document.createTextNode(e)),t},disableHeader:function(e){e.style.color="#ccc"},disableLabel:function(e){e.style.color="#ccc"},enableHeader:function(e){e.style.color=""},enableLabel:function(e){e.style.color=""},getInfoButton:function(e){var t=document.createElement("span");t.innerText="\u24d8",t.style.fontSize="16px",t.style.fontWeight="bold",t.style.padding=".25rem",t.style.position="relative",t.style.display="inline-block";var i=document.createElement("span");return i.style.fontSize="12px",t.style.fontWeight="normal",i.style["font-family"]="sans-serif",i.style.visibility="hidden",i.style["background-color"]="rgba(50, 50, 50, .75)",i.style.margin="0 .25rem",i.style.color="#FAFAFA",i.style.padding=".5rem 1rem",i.style["border-radius"]=".25rem",i.style.width="20rem",i.style.position="absolute",i.innerText=e,t.onmouseover=function(){i.style.visibility="visible"},t.onmouseleave=function(){i.style.visibility="hidden"},t.appendChild(i),t},getFormInputLabel:function(e,t){var i=document.createElement("label");return i.appendChild(document.createTextNode(e)),t&&i.classList.add("required"),i},getHeader:function(e){var t=document.createElement("h3");return"string"===typeof e?t.textContent=e:t.appendChild(e),t},getCheckbox:function(){var e=this.getFormInputField("checkbox");return e.style.display="inline-block",e.style.width="auto",e},getCheckboxLabel:function(e,t){var i=document.createElement("label");return i.appendChild(document.createTextNode("\xa0"+e)),t&&i.classList.add("required"),i},getMultiCheckboxHolder:function(e,t,i,n){var s=document.createElement("div");for(var a in s.classList.add("control-group"),t&&(t.style.display="block",s.appendChild(t),n&&t.appendChild(n)),e)e.hasOwnProperty(a)&&(e[a].style.display="inline-block",e[a].style.marginRight="20px",s.appendChild(e[a]));return i&&s.appendChild(i),s},getFormCheckboxControl:function(e,t,i){var n=document.createElement("div");return n.appendChild(e),t.style.width="auto",e.insertBefore(t,e.firstChild),i&&this.applyStyles(n,{display:"inline-block",marginRight:"1rem"}),n},getFormRadio:function(e){var t=this.getFormInputField("radio");for(var i in e)t.setAttribute(i,e[i]);return t.style.display="inline-block",t.style.width="auto",t},getFormRadioLabel:function(e,t){var i=document.createElement("label");return i.appendChild(document.createTextNode("\xa0"+e)),t&&i.classList.add("required"),i},getFormRadioControl:function(e,t,i){var n=document.createElement("div");return n.appendChild(e),t.style.width="auto",e.insertBefore(t,e.firstChild),i&&this.applyStyles(n,{display:"inline-block",marginRight:"1rem"}),n},getSelectInput:function(e,t){var i=document.createElement("select");return e&&this.setSelectOptions(i,e),i},getSwitcher:function(e){var t=this.getSelectInput(e,!1);return t.style.backgroundColor="transparent",t.style.display="inline-block",t.style.fontStyle="italic",t.style.fontWeight="normal",t.style.height="auto",t.style.marginBottom=0,t.style.marginLeft="5px",t.style.padding="0 0 0 3px",t.style.width="auto",t},getSwitcherOptions:function(e){return e.getElementsByTagName("option")},setSwitcherOptions:function(e,t,i){this.setSelectOptions(e,t,i)},setSelectOptions:function(e,t,i){i=i||[],e.innerHTML="";for(var n=0;n<t.length;n++){var s=document.createElement("option");s.setAttribute("value",t[n]),s.textContent=i[n]||t[n],e.appendChild(s)}},getTextareaInput:function(){var e=document.createElement("textarea");return e.style=e.style||{},e.style.width="100%",e.style.height="300px",e.style.boxSizing="border-box",e},getRangeInput:function(e,t,i){var n=this.getFormInputField("range");return n.setAttribute("min",e),n.setAttribute("max",t),n.setAttribute("step",i),n},getRangeOutput:function(e,t){var i=document.createElement("output");i.value=t||0;var n=function(){i.value=this.value};return e.addEventListener("change",n,!1),e.addEventListener("input",n,!1),i},getRangeControl:function(e,t){var i=document.createElement("div");return i.style.textAlign="center",t&&i.appendChild(t),i.appendChild(e),i},getFormInputField:function(e){var t=document.createElement("input");return t.setAttribute("type",e),t},afterInputReady:function(e){},getFormControl:function(e,t,i,n){var s=document.createElement("div");return s.classList.add("form-control"),e&&s.appendChild(e),"checkbox"!==t.type&&"radio"!==t.type||!e?(n&&e&&e.appendChild(n),s.appendChild(t)):(t.style.width="auto",e.insertBefore(t,e.firstChild),n&&e.appendChild(n)),i&&s.appendChild(i),s},getIndentedPanel:function(){var e=document.createElement("div");return e.style=e.style||{},e.style.paddingLeft="10px",e.style.marginLeft="10px",e.style.borderLeft="1px solid #ccc",e},getTopIndentedPanel:function(){var e=document.createElement("div");return e.style=e.style||{},e.style.paddingLeft="10px",e.style.marginLeft="10px",e},getChildEditorHolder:function(){return document.createElement("div")},getDescription:function(e){var t=document.createElement("p");return window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t},getCheckboxDescription:function(e){return this.getDescription(e)},getFormInputDescription:function(e){return this.getDescription(e)},getButtonHolder:function(){return document.createElement("span")},getHeaderButtonHolder:function(){return this.getButtonHolder()},getFormButtonHolder:function(e){return this.getButtonHolder()},getButton:function(e,t,i){var n=document.createElement("button");return n.type="button",this.setButtonText(n,e,t,i),n},getFormButton:function(e,t,i){return this.getButton(e,t,i)},setButtonText:function(e,t,i,n){for(;e.firstChild;)e.removeChild(e.firstChild);if(i&&(e.appendChild(i),t=" "+t),!this.jsoneditor.options.iconlib||!this.jsoneditor.options.remove_button_labels||!i){var s=document.createElement("span");s.appendChild(document.createTextNode(t)),e.appendChild(s)}n&&e.setAttribute("title",n)},getTable:function(){return document.createElement("table")},getTableRow:function(){return document.createElement("tr")},getTableHead:function(){return document.createElement("thead")},getTableBody:function(){return document.createElement("tbody")},getTableHeaderCell:function(e){var t=document.createElement("th");return t.textContent=e,t},getTableCell:function(){return document.createElement("td")},getErrorMessage:function(e){var t=document.createElement("p");return t.style=t.style||{},t.style.color="red",t.appendChild(document.createTextNode(e)),t},addInputError:function(e,t){},removeInputError:function(e){},addTableRowError:function(e){},removeTableRowError:function(e){},getTabHolder:function(e){var t="undefined"===typeof e?"":e,i=document.createElement("div");return i.innerHTML="<div style='float: left; width: 130px;' class='tabs'></div><div class='content' style='margin-left: 120px;' id='"+t+"'></div><div style='clear:both;'></div>",i},getTopTabHolder:function(e){var t="undefined"===typeof e?"":e,i=document.createElement("div");return i.innerHTML="<div class='tabs' style='margin-left: 10px;'></div><div style='clear:both;'></div><div class='content' id='"+t+"'></div>",i},applyStyles:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e.style[i]=t[i])},closest:function(e,t){for(;e&&e!==document;){if(!e[B])return!1;if(e[B](t))return e;e=e.parentNode}return!1},insertBasicTopTab:function(e,t){t.firstChild.insertBefore(e,t.firstChild.firstChild)},getTab:function(e,t){var i=document.createElement("div");return i.appendChild(e),i.id=t,i.style=i.style||{},this.applyStyles(i,{border:"1px solid #ccc",borderWidth:"1px 0 1px 1px",textAlign:"center",lineHeight:"30px",borderRadius:"5px",borderBottomRightRadius:0,borderTopRightRadius:0,fontWeight:"bold",cursor:"pointer"}),i},getTopTab:function(e,t){var i=document.createElement("div");return i.id=t,i.appendChild(e),i.style=i.style||{},this.applyStyles(i,{float:"left",border:"1px solid #ccc",borderWidth:"1px 1px 0px 1px",textAlign:"center",lineHeight:"30px",borderRadius:"5px",paddingLeft:"5px",paddingRight:"5px",borderBottomRightRadius:0,borderBottomLeftRadius:0,fontWeight:"bold",cursor:"pointer"}),i},getTabContentHolder:function(e){return e.children[1]},getTopTabContentHolder:function(e){return e.children[1]},getTabContent:function(){return this.getIndentedPanel()},getTopTabContent:function(){return this.getTopIndentedPanel()},markTabActive:function(e){this.applyStyles(e.tab,{opacity:1,background:"white"}),"undefined"!==typeof e.rowPane?e.rowPane.style.display="":e.container.style.display=""},markTabInactive:function(e){this.applyStyles(e.tab,{opacity:.5,background:""}),"undefined"!==typeof e.rowPane?e.rowPane.style.display="none":e.container.style.display="none"},addTab:function(e,t){e.children[0].appendChild(t)},addTopTab:function(e,t){e.children[0].appendChild(t)},getBlockLink:function(){var e=document.createElement("a");return e.style.display="block",e},getBlockLinkHolder:function(){return document.createElement("div")},getLinksHolder:function(){return document.createElement("div")},createMediaLink:function(e,t,i){e.appendChild(t),i.style.width="100%",e.appendChild(i)},createImageLink:function(e,t,i){e.appendChild(t),t.appendChild(i)},getFirstTab:function(e){return e.firstChild.firstChild},getInputGroup:function(e,t){},cleanText:function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText},getDropZone:function(e){var t=document.createElement("div");return t.setAttribute("data-text",e),t.classList.add("je-dropzone"),t},getUploadPreview:function(e,t,i){var n=document.createElement("div");if(n.classList.add("je-upload-preview"),"image"===e.mimeType.substr(0,5)){var s=document.createElement("img");s.src=i,n.appendChild(s)}var a=document.createElement("div");a.innerHTML+="<strong>Name:</strong> "+e.name+"<br><strong>Type:</strong> "+e.type+"<br><strong>Size:</strong> "+e.formattedSize,n.appendChild(a),n.appendChild(t);var r=document.createElement("div");return r.style.clear="left",n.appendChild(r),n},getProgressBar:function(){var e=document.createElement("progress");return e.setAttribute("max",100),e.setAttribute("value",0),e},updateProgressBar:function(e,t){e&&e.setAttribute("value",t)},updateProgressBarUnknown:function(e){e&&e.removeAttribute("value")}}),z=I.extend({mapping:{collapse:"",expand:"",delete:"",edit:"",add:"",cancel:"",save:"",moveup:"",movedown:""},icon_prefix:"",getIconClass:function(e){return this.mapping[e]?this.icon_prefix+this.mapping[e]:null},getIcon:function(e){var t=this.getIconClass(e);if(!t)return null;var i=document.createElement("i");return i.classList.add.apply(i.classList,t.split(" ")),i}}),M=i(57),D=H.extend({options:{disable_theme_rules:!1,input_size:"normal",custom_forms:!1,object_indent:!0,object_background:"",object_text:"",table_border:!1,table_zebrastyle:!1,tooltip:"bootstrap"},rules:M,getSelectInput:function(e,t){var i=this._super(e);return i.classList.add("form-control"),!1===this.options.custom_forms?("small"===this.options.input_size&&i.classList.add("form-control-sm"),"large"===this.options.input_size&&i.classList.add("form-control-lg")):(i.classList.remove("form-control"),i.classList.add("custom-select"),"small"===this.options.input_size&&i.classList.add("custom-select-sm"),"large"===this.options.input_size&&i.classList.add("custom-select-lg")),i},getContainer:function(){var e=document.createElement("div");return this.options.object_indent||e.classList.add("je-noindent"),e},setGridColumnSize:function(e,t,i){e.classList.add("col-md-"+t),i&&e.classList.add("offset-md-"+i)},afterInputReady:function(e){if(!e.controlgroup){var t=e.name;e.id=t;var i=e.parentNode.parentNode.getElementsByTagName("label")[0];i&&(i.htmlFor=t),e.controlgroup=this.closest(e,".form-group")}},getTextareaInput:function(){var e=document.createElement("textarea");return e.classList.add("form-control"),"small"===this.options.input_size&&e.classList.add("form-control-sm"),"large"===this.options.input_size&&e.classList.add("form-control-lg"),e},getRangeInput:function(e,t,i){var n=this._super(e,t,i);return!0===this.options.custom_forms&&(n.classList.remove("form-control"),n.classList.add("custom-range")),n},getFormInputField:function(e){var t=this._super(e);return"checkbox"!==e&&"radio"!==e&&"file"!==e&&(t.classList.add("form-control"),"small"===this.options.input_size&&t.classList.add("form-control-sm"),"large"===this.options.input_size&&t.classList.add("form-control-lg")),"file"===e&&t.classList.add("form-control-file"),t},getFormControl:function(e,t,i,n){var s=document.createElement("div");if(s.classList.add("form-group"),!e||"checkbox"!==t.type&&"radio"!==t.type)e&&(s.appendChild(e),n&&s.appendChild(n)),s.appendChild(t);else{var a=document.createElement("div");!1===this.options.custom_forms?(a.classList.add("form-check"),t.classList.add("form-check-input"),e.classList.add("form-check-label")):(a.classList.add("custom-control"),t.classList.add("custom-control-input"),e.classList.add("custom-control-label"),"checkbox"===t.type?a.classList.add("custom-checkbox"):a.classList.add("custom-radio")),a.appendChild(t),a.appendChild(e),n&&a.appendChild(n),s.appendChild(a)}return i&&s.appendChild(i),s},getInfoButton:function(e){var t=document.createElement("button");t.type="button",t.classList.add("ml-2","jsoneditor-twbs4-text-button"),t.setAttribute("data-toggle","tooltip"),t.setAttribute("data-placement","right"),t.title=e;var i=document.createTextNode("\u24d8");return t.appendChild(i),"bootstrap"===this.options.tooltip?window.jQuery&&window.jQuery().tooltip?window.jQuery(t).tooltip():console.warn("Could not find popper jQuery plugin of Bootstrap."):"css"===this.options.tooltip&&t.classList.add("je-tooltip"),t},getCheckbox:function(){return this.getFormInputField("checkbox")},getMultiCheckboxHolder:function(e,t,i,n){var s=document.createElement("div");s.classList.add("form-group"),t&&(s.appendChild(t),n&&t.appendChild(n));var a=document.createElement("div");for(var r in e)if(e.hasOwnProperty(r)){var o=e[r].firstChild;a.appendChild(o)}return s.appendChild(a),i&&s.appendChild(i),s},getFormRadio:function(e){var t=this.getFormInputField("radio");for(var i in e)t.setAttribute(i,e[i]);return!1===this.options.custom_forms?t.classList.add("form-check-input"):t.classList.add("custom-control-input"),t},getFormRadioLabel:function(e,t){var i=document.createElement("label");return!1===this.options.custom_forms?i.classList.add("form-check-label"):i.classList.add("custom-control-label"),i.appendChild(document.createTextNode(e)),i},getFormRadioControl:function(e,t,i){var n=document.createElement("div");return!1===this.options.custom_forms?n.classList.add("form-check"):n.classList.add("custom-control","custom-radio"),n.appendChild(t),n.appendChild(e),i&&(!1===this.options.custom_forms?n.classList.add("form-check-inline"):n.classList.add("custom-control-inline")),n},getIndentedPanel:function(){var e=document.createElement("div");return e.classList.add("card","card-body","mb-3"),this.options.object_background&&e.classList.add(this.options.object_background),this.options.object_text&&e.classList.add(this.options.object_text),e},getFormInputDescription:function(e){var t=document.createElement("small");return t.classList.add("form-text"),window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t},getHeader:function(e){var t=document.createElement("h3");return t.classList.add("card-title"),"string"===typeof e?t.textContent=e:t.appendChild(e),t},getHeaderButtonHolder:function(){return this.getButtonHolder()},getButtonHolder:function(){var e=document.createElement("span");return e.classList.add("btn-group"),e},getFormButtonHolder:function(e){var t=this.getButtonHolder();return t.classList.add("d-block"),"center"===e?t.classList.add("text-center"):"right"===e&&t.classList.add("text-right"),t},getButton:function(e,t,i){var n=this._super(e,t,i);return n.classList.add("btn","btn-light","btn-sm"),n},getTable:function(){var e=document.createElement("table");return e.classList.add("table","table-sm"),this.options.table_border&&e.classList.add("table-bordered"),this.options.table_zebrastyle&&e.classList.add("table-striped"),e},getErrorMessage:function(e){var t=document.createElement("div");return t.classList.add("alert","alert-danger"),t.setAttribute("role","alert"),t.appendChild(document.createTextNode(e)),t},addInputError:function(e,t){e.controlgroup&&(e.classList.add("is-invalid"),e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("p"),e.errmsg.classList.add("invalid-feedback"),e.controlgroup.appendChild(e.errmsg)),e.errmsg.textContent=t)},removeInputError:function(e){e.errmsg&&(e.errmsg.style.display="none",e.classList.remove("is-invalid"))},getTabHolder:function(e){var t=document.createElement("div"),i="undefined"===typeof e?"":e;return t.innerHTML="<div class='col-md-2' id='"+i+"'><ul class='nav flex-column nav-pills'></ul></div><div class='col-md-10'><div class='tab-content' id='"+i+"'></div></div>",t.classList.add("row"),t},addTab:function(e,t){e.children[0].children[0].appendChild(t)},getTabContentHolder:function(e){return e.children[1].children[0]},getTopTabHolder:function(e){var t="undefined"===typeof e?"":e,i=document.createElement("div");return i.classList.add("card"),i.innerHTML="<div class='card-header'><ul class='nav nav-tabs card-header-tabs' id='"+t+"'></ul></div><div class='card-body'><div class='tab-content' id='"+t+"'></div></div>",i},getTab:function(e,t){var i=document.createElement("li");i.classList.add("nav-item");var n=document.createElement("a");return n.classList.add("nav-link"),n.setAttribute("href","#"+t),n.setAttribute("data-toggle","tab"),n.appendChild(e),i.appendChild(n),i},getTopTab:function(e,t){var i=document.createElement("li");i.classList.add("nav-item");var n=document.createElement("a");return n.classList.add("nav-link"),n.setAttribute("href","#"+t),n.setAttribute("data-toggle","tab"),n.appendChild(e),i.appendChild(n),i},getTabContent:function(){var e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e},getTopTabContent:function(){var e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e},markTabActive:function(e){e.tab.firstChild.classList.add("active"),"undefined"!==typeof e.rowPane?e.rowPane.classList.add("active"):e.container.classList.add("active")},markTabInactive:function(e){e.tab.firstChild.classList.remove("active"),"undefined"!==typeof e.rowPane?e.rowPane.classList.remove("active"):e.container.classList.remove("active")},insertBasicTopTab:function(e,t){t.children[0].children[0].insertBefore(e,t.children[0].children[0].firstChild)},addTopTab:function(e,t){e.children[0].children[0].appendChild(t)},getTopTabContentHolder:function(e){return e.children[1].children[0]},getProgressBar:function(){var e=document.createElement("div");e.classList.add("progress");var t=document.createElement("div");return t.classList.add("progress-bar"),t.setAttribute("role","progressbar"),t.setAttribute("aria-valuenow",0),t.setAttribute("aria-valuemin",0),t.setAttribute("aria-valuenax",100),t.innerHTML="0%",e.appendChild(t),e},updateProgressBar:function(e,t){if(e){var i=e.firstChild,n=t+"%";i.setAttribute("aria-valuenow",t),i.style.width=n,i.innerHTML=n}},updateProgressBarUnknown:function(e){if(e){var t=e.firstChild;e.classList.add("progress","progress-striped","active"),t.removeAttribute("aria-valuenow"),t.style.width="100%",t.innerHTML=""}},getBlockLink:function(){var e=document.createElement("a");return e.classList.add("mb-3","d-inline-block"),e},getLinksHolder:function(){return document.createElement("div")},getInputGroup:function(e,t){if(e){var i=document.createElement("div");i.classList.add("input-group"),i.appendChild(e);var n=document.createElement("div");n.classList.add("input-group-append"),i.appendChild(n);for(var s=0;s<t.length;s++)t[s].classList.remove("mr-2","btn-secondary"),t[s].classList.add("btn-outline-secondary"),n.appendChild(t[s]);return i}}}),q=I.extend({onChildEditorChange:function(e){this.onChange(!0)},notify:function(){this.path&&this.jsoneditor.notifyWatchers(this.path)},change:function(){this.parent?this.parent.onChildEditorChange(this):this.jsoneditor&&this.jsoneditor.onChange()},onChange:function(e){this.notify(),this.watch_listener&&this.watch_listener(),e&&this.change()},register:function(){this.jsoneditor.registerEditor(this),this.onChange()},unregister:function(){this.jsoneditor&&this.jsoneditor.unregisterEditor(this)},getNumColumns:function(){return 12},isActive:function(){return this.active},activate:function(){this.active=!0,this.optInCheckbox.checked=!0,this.enable(),this.change()},deactivate:function(){this.isRequired()||(this.active=!1,this.optInCheckbox.checked=!1,this.disable(),this.change())},init:function(e,t){this.defaults=t,this.jsoneditor=e.jsoneditor,this.theme=this.jsoneditor.theme,this.template_engine=this.jsoneditor.template,this.iconlib=this.jsoneditor.iconlib,this.translate=this.jsoneditor.translate||this.defaults.translate,this.original_schema=e.schema,this.schema=this.jsoneditor.expandSchema(this.original_schema),this.active=!0,this.options=S({},this.options||{},this.schema.options||{},e.schema.options||{},e),e.path||this.schema.id||(this.schema.id="root"),this.path=e.path||"root",this.formname=e.formname||this.path.replace(/\.([^.]+)/g,"[$1]"),this.jsoneditor.options.form_name_root&&(this.formname=this.formname.replace(/^root\[/,this.jsoneditor.options.form_name_root+"[")),this.parent=e.parent,this.key=void 0!==this.parent?this.path.split(".").slice(this.parent.path.split(".").length).join("."):this.path,this.link_watchers=[],this.watchLoop=!1,e.container&&this.setContainer(e.container),this.registerDependencies()},registerDependencies:function(){this.dependenciesFulfilled=!0;var e=this.options.dependencies;if(e){var t=this;Object.keys(e).forEach((function(i){var n=t.path.split(".");n[n.length-1]=i,n=n.join(".");var s=e[i];t.jsoneditor.watch(n,(function(){t.checkDependency(n,s)}))}))}},checkDependency:function(e,t){var i=this.container||this.control;if(this.path!==e&&i&&null!==this.jsoneditor){var n=this,s=this.jsoneditor.getEditor(e),a=s?s.getValue():void 0,r=this.dependenciesFulfilled;this.dependenciesFulfilled=!1,s&&s.dependenciesFulfilled?Array.isArray(t)?t.some((function(e){return a===e?(n.dependenciesFulfilled=!0,!0):void 0})):"object"===typeof t?"object"!==typeof a?this.dependenciesFulfilled=t===a:Object.keys(t).some((function(e){return!!t.hasOwnProperty(e)&&(a.hasOwnProperty(e)&&t[e]===a[e]?void(n.dependenciesFulfilled=!0):(n.dependenciesFulfilled=!1,!0))})):"string"===typeof t||"number"===typeof t?this.dependenciesFulfilled=a===t:"boolean"===typeof t&&(this.dependenciesFulfilled=t?a||a.length>0:!a||0===a.length):this.dependenciesFulfilled=!1,this.dependenciesFulfilled!==r&&this.notify();var o=this.dependenciesFulfilled?"block":"none";if("TD"===i.tagName)for(var l in i.childNodes)i.childNodes.hasOwnProperty(l)&&(i.childNodes[l].style.display=o);else i.style.display=o}},setContainer:function(e){this.container=e,this.schema.id&&this.container.setAttribute("data-schemaid",this.schema.id),this.schema.type&&"string"===typeof this.schema.type&&this.container.setAttribute("data-schematype",this.schema.type),this.container.setAttribute("data-schemapath",this.path)},setOptInCheckbox:function(e){var t=this;this.optInCheckbox=document.createElement("input"),this.optInCheckbox.setAttribute("type","checkbox"),this.optInCheckbox.setAttribute("style","margin: 0 10px 0 0;"),this.optInCheckbox.classList.add("json-editor-opt-in"),this.optInCheckbox.addEventListener("click",(function(){t.isActive()?t.deactivate():t.activate()})),(this.jsoneditor.options.show_opt_in||this.options.show_opt_in)&&this.parent&&"object"===this.parent.schema.type&&!this.isRequired()&&this.header&&(this.header.appendChild(this.optInCheckbox),this.header.insertBefore(this.optInCheckbox,this.header.firstChild))},preBuild:function(){},build:function(){},postBuild:function(){this.setupWatchListeners(),this.addLinks(),this.setValue(this.getDefault(),!0),this.updateHeaderText(),this.register(),this.onWatchedFieldChange()},setupWatchListeners:function(){var e=this;if(this.watched={},this.schema.vars&&(this.schema.watch=this.schema.vars),this.watched_values={},this.watch_listener=function(){e.refreshWatchedFieldValues()&&e.onWatchedFieldChange()},this.schema.hasOwnProperty("watch")){var t,i,n,s,a,r=e.container.getAttribute("data-schemapath");for(var o in this.schema.watch)if(this.schema.watch.hasOwnProperty(o)){if(t=this.schema.watch[o],Array.isArray(t)){if(t.length<2)continue;i=[t[0]].concat(t[1].split("."))}else i=t.split("."),e.theme.closest(e.container,'[data-schemaid="'+i[0]+'"]')||i.unshift("#");if("#"===(n=i.shift())&&(n=e.jsoneditor.schema.id||"root"),!(s=e.theme.closest(e.container,'[data-schemaid="'+n+'"]')))throw new Error("Could not find ancestor node with id "+n);a=s.getAttribute("data-schemapath")+"."+i.join("."),r.startsWith(a)&&(e.watchLoop=!0),e.jsoneditor.watch(a,e.watch_listener),e.watched[o]=a}}this.schema.headerTemplate&&(this.header_template=this.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine))},addLinks:function(){if(!this.no_link_holder&&(this.link_holder=this.theme.getLinksHolder(),"undefined"!==typeof this.description?this.description.parentNode.insertBefore(this.link_holder,this.description):this.container.appendChild(this.link_holder),this.schema.links))for(var e=0;e<this.schema.links.length;e++)this.addLink(this.getLink(this.schema.links[e]))},onMove:function(){},getButton:function(e,t,i){var n="json-editor-btn-"+t;!(t=this.iconlib?this.iconlib.getIcon(t):null)&&i&&(e=i,i=null);var s=this.theme.getButton(e,t,i);return s.classList.add(n),s},setButtonText:function(e,t,i,n){return!(i=this.iconlib?this.iconlib.getIcon(i):null)&&n&&(t=n,n=null),this.theme.setButtonText(e,t,i,n)},addLink:function(e){this.link_holder&&this.link_holder.appendChild(e)},getLink:function(e){var t,i,n=(e.mediaType||"application/javascript").split("/")[0],s=this.jsoneditor.compileTemplate(e.href,this.template_engine),a=this.jsoneditor.compileTemplate(e.rel?e.rel:e.href,this.template_engine),r=null;if(e.download&&(r=e.download),r&&!0!==r&&(r=this.jsoneditor.compileTemplate(r,this.template_engine)),"image"===n){t=this.theme.getBlockLinkHolder(),(i=document.createElement("a")).setAttribute("target","_blank");var o=document.createElement("img");this.theme.createImageLink(t,i,o),this.link_watchers.push((function(e){var t=s(e),n=a(e);i.setAttribute("href",t),i.setAttribute("title",n||t),o.setAttribute("src",t)}))}else if(["audio","video"].indexOf(n)>=0){t=this.theme.getBlockLinkHolder(),(i=this.theme.getBlockLink()).setAttribute("target","_blank");var l=document.createElement(n);l.setAttribute("controls","controls"),this.theme.createMediaLink(t,i,l),this.link_watchers.push((function(e){var t=s(e),n=a(e);i.setAttribute("href",t),i.textContent=n||t,l.setAttribute("src",t)}))}else i=t=this.theme.getBlockLink(),t.setAttribute("target","_blank"),t.textContent=e.rel,t.style.display="none",this.link_watchers.push((function(e){var i=s(e),n=a(e);i&&(t.style.display=""),t.setAttribute("href",i),t.textContent=n||i}));return r&&i&&(!0===r?i.setAttribute("download",""):this.link_watchers.push((function(e){i.setAttribute("download",r(e))}))),e.class&&i.classList.add(e.class),t},refreshWatchedFieldValues:function(){if(this.watched_values){var e,t,i={},n=!1;if(this.watched)for(var s in this.watched)this.watched.hasOwnProperty(s)&&(e=(t=this.jsoneditor.getEditor(this.watched[s]))?t.getValue():null,this.watched_values[s]!==e&&(n=!0),i[s]=e);return i.self=this.getValue(),this.watched_values.self!==i.self&&(n=!0),this.watched_values=i,n}},getWatchedFieldValues:function(){return this.watched_values},updateHeaderText:function(){if(this.header){var e=this.getHeaderText();if(this.header.children.length){for(var t=0;t<this.header.childNodes.length;t++)if(3===this.header.childNodes[t].nodeType){this.header.childNodes[t].nodeValue=this.cleanText(e);break}}else window.DOMPurify?this.header.innerHTML=window.DOMPurify.sanitize(e):this.header.textContent=this.cleanText(e)}},getHeaderText:function(e){return this.header_text?this.header_text:e?this.schema.title:this.getTitle()},cleanText:function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText},onWatchedFieldChange:function(){var e;if(this.header_template){e=S(this.getWatchedFieldValues(),{key:this.key,i:this.key,i0:1*this.key,i1:1*this.key+1,title:this.getTitle()});var t=this.header_template(e);t!==this.header_text&&(this.header_text=t,this.updateHeaderText(),this.notify())}if(this.link_watchers.length){e=this.getWatchedFieldValues();for(var i=0;i<this.link_watchers.length;i++)this.link_watchers[i](e)}},setValue:function(e){this.value=e},getValue:function(){if(this.dependenciesFulfilled)return this.value},refreshValue:function(){},getChildEditors:function(){return!1},destroy:function(){var e=this;this.unregister(this),T(this.watched,(function(t,i){e.jsoneditor.unwatch(i,e.watch_listener)})),this.watched=null,this.watched_values=null,this.watch_listener=null,this.header_text=null,this.header_template=null,this.value=null,this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.container=null,this.jsoneditor=null,this.schema=null,this.path=null,this.key=null,this.parent=null},getDefault:function(){if("undefined"!==typeof this.schema.default)return this.schema.default;if("undefined"!==typeof this.schema.enum)return this.schema.enum[0];var e=this.schema.type||this.schema.oneOf;if(e&&Array.isArray(e)&&(e=e[0]),e&&"object"===typeof e&&(e=e.type),e&&Array.isArray(e)&&(e=e[0]),"string"===typeof e){if("number"===e)return 0;if("boolean"===e)return!1;if("integer"===e)return 0;if("string"===e)return"";if("object"===e)return{};if("array"===e)return[]}return null},getTitle:function(){return this.schema.title||this.key},enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},isEnabled:function(){return!this.disabled},isRequired:function(){return"boolean"===typeof this.schema.required?this.schema.required:this.parent&&this.parent.schema&&Array.isArray(this.parent.schema.required)?this.parent.schema.required.indexOf(this.key)>-1:!!this.jsoneditor.options.required_by_default},getDisplayText:function(e){var t=[],i={};T(e,(function(e,t){t.title&&(i[t.title]=i[t.title]||0,i[t.title]++),t.description&&(i[t.description]=i[t.description]||0,i[t.description]++),t.format&&(i[t.format]=i[t.format]||0,i[t.format]++),t.type&&(i[t.type]=i[t.type]||0,i[t.type]++)})),T(e,(function(e,n){var s;s="string"===typeof n?n:n.title&&i[n.title]<=1?n.title:n.format&&i[n.format]<=1?n.format:n.type&&i[n.type]<=1?n.type:n.description&&i[n.description]<=1?n.descripton:n.title?n.title:n.format?n.format:n.type?n.type:n.description?n.description:JSON.stringify(n).length<500?JSON.stringify(n):"type",t.push(s)}));var n={};return T(t,(function(e,s){n[s]=n[s]||0,n[s]++,i[s]>1&&(t[e]=s+" "+n[s])})),t},getValidId:function(e){return(e=void 0===e?"":e.toString()).replace(/\s+/g,"-")},setInputAttributes:function(e){if(this.schema.options&&this.schema.options.inputAttributes){var t=this.schema.options.inputAttributes,i=["name","type"].concat(e);for(var n in t)t.hasOwnProperty(n)&&-1===i.indexOf(n.toLowerCase())&&this.input.setAttribute(n,t[n])}},expandCallbacks:function(e,t){for(var i in t)t.hasOwnProperty(i)&&t[i]===Object(t[i])?t[i]=this.expandCallbacks(e,t[i]):t.hasOwnProperty(i)&&"string"===typeof t[i]&&"object"===typeof this.defaults.callbacks[e]&&"function"===typeof this.defaults.callbacks[e][t[i]]&&(t[i]=this.defaults.callbacks[e][t[i]].bind(null,this));return t},showValidationErrors:function(e){}}),U=q.extend({register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},setValue:function(e,t,i){if((!this.template||i)&&(null===e||"undefined"===typeof e?e="":"object"===typeof e?e=JSON.stringify(e):"string"!==typeof e&&(e=""+e),e!==this.serialized)){var n=this.sanitize(e);if(this.input.value!==n){this.input.value=n;var s=i||this.getValue()!==e;return this.refreshValue(),t?this.is_dirty=!1:"change"===this.jsoneditor.options.show_errors&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),this.onChange(s),{changed:s,value:n}}}},getNumColumns:function(){var e,t=Math.ceil(Math.max(this.getTitle().length,this.schema.maxLength||0,this.schema.minLength||0)/5);return e="textarea"===this.input_type?6:["text","email"].indexOf(this.input_type)>=0?4:2,Math.min(12,Math.max(t,e))},build:function(){var e=this;if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.options.infoText)),this.format=this.schema.format,!this.format&&this.schema.media&&this.schema.media.type&&(this.format=this.schema.media.type.replace(/(^(application|text)\/(x-)?(script\.)?)|(-source$)/g,"")),!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.format)if("textarea"===this.format)this.input_type="textarea",this.input=this.theme.getTextareaInput();else if("range"===this.format){this.input_type="range";var t=this.schema.minimum||0,i=this.schema.maximum||Math.max(100,t+1),n=1;this.schema.multipleOf&&(t%this.schema.multipleOf&&(t=Math.ceil(t/this.schema.multipleOf)*this.schema.multipleOf),i%this.schema.multipleOf&&(i=Math.floor(i/this.schema.multipleOf)*this.schema.multipleOf),n=this.schema.multipleOf),this.input=this.theme.getRangeInput(t,i,n)}else this.input_type="text",["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","reset","search","submit","tel","text","time","url","week"].indexOf(this.format)>-1&&(this.input_type=this.format),this.input=this.theme.getFormInputField(this.input_type);else this.input_type="text",this.input=this.theme.getFormInputField(this.input_type);"undefined"!==typeof this.schema.maxLength&&this.input.setAttribute("maxlength",this.schema.maxLength),"undefined"!==typeof this.schema.pattern?this.input.setAttribute("pattern",this.schema.pattern):"undefined"!==typeof this.schema.minLength&&this.input.setAttribute("pattern",".{"+this.schema.minLength+",}"),this.options.compact?this.container.classList.add("compact"):this.options.input_width&&(this.input.style.width=this.options.input_width),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.always_disabled=!0,this.input.setAttribute("readonly","true")),this.setInputAttributes(["maxlength","pattern","readonly","min","max","step"]),this.input.addEventListener("change",(function(t){if(t.preventDefault(),t.stopPropagation(),e.schema.template)this.value=e.value;else{var i=this.value,n=e.sanitize(i);i!==n&&(this.value=n),e.is_dirty=!0,e.refreshValue(),e.onChange(!0)}})),this.options.input_height&&(this.input.style.height=this.options.input_height),this.options.expand_height&&(this.adjust_height=function(e){if(e){var t,i=e.offsetHeight;if(e.offsetHeight<e.scrollHeight)for(t=0;e.offsetHeight<e.scrollHeight+3&&!(t>100);)t++,i++,e.style.height=i+"px";else{for(t=0;e.offsetHeight>=e.scrollHeight+3&&!(t>100);)t++,i--,e.style.height=i+"px";e.style.height=i+1+"px"}}},this.input.addEventListener("keyup",(function(t){e.adjust_height(this)})),this.input.addEventListener("change",(function(t){e.adjust_height(this)})),this.adjust_height()),this.format&&this.input.setAttribute("data-schemaformat",this.format);var s=this.input;if("range"===this.format&&(s=this.theme.getRangeControl(this.input,this.theme.getRangeOutput(this.input,this.schema.default||Math.max(this.schema.minimum||0,0)))),this.control=this.theme.getFormControl(this.label,s,this.description,this.infoButton),this.container.appendChild(this.control),window.requestAnimationFrame((function(){e.input.parentNode&&e.afterInputReady(),e.adjust_height&&e.adjust_height(e.input)})),this.schema.template){var a=this.expandCallbacks("template",{template:this.schema.template});"function"===typeof a.template?this.template=a.template:this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()}else this.refreshValue()},setupCleave:function(e){var t=this.expandCallbacks("cleave",S({},this.defaults.options.cleave||{},this.options.cleave||{}));"object"===typeof t&&Object.keys(t).length>0&&(this.cleave_instance=new window.Cleave(e,t))},setupImask:function(e){var t=this.expandCallbacks("imask",S({},this.defaults.options.imask||{},this.options.imask||{}));"object"===typeof t&&Object.keys(t).length>0&&(this.imask_instance=window.IMask(e,this.ajustIMaskOptions(t)))},ajustIMaskOptions:function(e){for(var t in e)if(e.hasOwnProperty(t))if(e[t]===Object(e[t]))e[t]=this.ajustIMaskOptions(e[t]);else if("mask"===t)if("regex:"===e[t].substr(0,6)){var i=e[t].match(/^regex:\/(.*)\/([gimsuy]*)$/);if(null!==i)try{e[t]=new RegExp(i[1],i[2])}catch(n){}}else e[t]=this.getGlobalPropertyFromString(e[t]);return e},getGlobalPropertyFromString:function(e){if(-1===e.indexOf(".")){if("undefined"!==typeof window[e])return window[e]}else{var t=e.split("."),i=t[0],n=t[1];if("undefined"!==typeof window[i]&&"undefined"!==typeof window[i][n])return window[i][n]}return e},getValue:function(){return this.imask_instance&&this.dependenciesFulfilled&&this.options.imask.returnUnmasked?this.imask_instance.unmaskedValue:this._super()},enable:function(){this.always_disabled||(this.input.disabled=!1,this._super())},disable:function(e){e&&(this.always_disabled=!0),this.input.disabled=!0,this._super()},afterInputReady:function(){this.theme.afterInputReady(this.input),window.Cleave&&!this.cleave_instance?this.setupCleave(this.input):window.IMask&&!this.imask_instance&&this.setupImask(this.input)},refreshValue:function(){this.value=this.input.value,"string"!==typeof this.value&&(this.value=""),this.serialized=this.value},destroy:function(){this.cleave_instance&&this.cleave_instance.destroy(),this.imask_instance&&this.imask_instance.destroy(),this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this._super()},sanitize:function(e){return e},onWatchedFieldChange:function(){var e;this.template&&(e=this.getWatchedFieldValues(),this.setValue(this.template(e),!1,!0)),this._super()},showValidationErrors:function(e){var t=this;if("always"===this.jsoneditor.options.show_errors);else if(!this.is_dirty&&this.previous_error_setting===this.jsoneditor.options.show_errors)return;this.previous_error_setting=this.jsoneditor.options.show_errors;var i=[];T(e,(function(e,n){n.path===t.path&&i.push(n.message)})),i.length?this.theme.addInputError(this.input,i.join(". ")+"."):this.theme.removeInputError(this.input)}}),G=U.extend({setValue:function(e,t,i){var n=this._super(e,t,i);void 0!==n&&n.changed&&this.ace_editor_instance&&(this.ace_editor_instance.setValue(n.value),this.ace_editor_instance.session.getSelection().clearSelection(),this.ace_editor_instance.resize())},build:function(){this.options.format="textarea",this._super(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)},afterInputReady:function(){var e,t=this;if(window.ace){var i=this.input_type;"cpp"!==i&&"c++"!==i&&"c"!==i||(i="c_cpp"),e=this.expandCallbacks("ace",S({},{selectionStyle:"text",minLines:30,maxLines:30},this.defaults.options.ace||{},this.options.ace||{},{mode:"ace/mode/"+i})),this.ace_container=document.createElement("div"),this.ace_container.style.width="100%",this.ace_container.style.position="relative",this.input.parentNode.insertBefore(this.ace_container,this.input),this.input.style.display="none",this.ace_editor_instance=window.ace.edit(this.ace_container,e),this.ace_editor_instance.setValue(this.getValue()),this.ace_editor_instance.session.getSelection().clearSelection(),this.ace_editor_instance.resize(),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&this.ace_editor_instance.setReadOnly(!0),this.ace_editor_instance.on("change",(function(){t.input.value=t.ace_editor_instance.getValue(),t.refreshValue(),t.is_dirty=!0,t.onChange(!0)})),this.theme.afterInputReady(t.input)}else this._super()},getNumColumns:function(){return 6},enable:function(){!this.always_disabled&&this.ace_editor_instance&&this.ace_editor_instance.setReadOnly(!1),this._super()},disable:function(e){this.ace_editor_instance&&this.ace_editor_instance.setReadOnly(!0),this._super(e)},destroy:function(){this.ace_editor_instance&&(this.ace_editor_instance.destroy(),this.ace_editor_instance=null),this._super()}}),J=q.extend({askConfirmation:function(){return!0!==this.jsoneditor.options.prompt_before_delete||!1!==window.confirm("Are you sure you want to remove this node?")},getDefault:function(){return this.schema.default||[]},register:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].register()},unregister:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].unregister()},getNumColumns:function(){var e=this.getItemInfo(0);return this.tabs_holder&&"tabs-top"!==this.schema.format?Math.max(Math.min(12,e.width+2),4):e.width},enable:function(){if(!this.always_disabled){if(this.add_row_button&&(this.add_row_button.disabled=!1),this.remove_all_rows_button&&(this.remove_all_rows_button.disabled=!1),this.delete_last_row_button&&(this.delete_last_row_button.disabled=!1),this.copy_button&&(this.copy_button.disabled=!1),this.delete_button&&(this.delete_button.disabled=!1),this.moveup_button&&(this.moveup_button.disabled=!1),this.movedown_button&&(this.movedown_button.disabled=!1),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].enable(),this.rows[e].add_row_button&&(this.rows[e].add_row_button.disabled=!1),this.rows[e].remove_all_rows_button&&(this.rows[e].remove_all_rows_button.disabled=!1),this.rows[e].delete_last_row_button&&(this.rows[e].delete_last_row_button.disabled=!1),this.rows[e].copy_button&&(this.rows[e].copy_button.disabled=!1),this.rows[e].delete_button&&(this.rows[e].delete_button.disabled=!1),this.rows[e].moveup_button&&(this.rows[e].moveup_button.disabled=!1),this.rows[e].movedown_button&&(this.rows[e].movedown_button.disabled=!1);this._super()}},disable:function(e){if(e&&(this.always_disabled=!0),this.add_row_button&&(this.add_row_button.disabled=!0),this.remove_all_rows_button&&(this.remove_all_rows_button.disabled=!0),this.delete_last_row_button&&(this.delete_last_row_button.disabled=!0),this.copy_button&&(this.copy_button.disabled=!0),this.delete_button&&(this.delete_button.disabled=!0),this.moveup_button&&(this.moveup_button.disabled=!0),this.movedown_button&&(this.movedown_button.disabled=!0),this.rows)for(var t=0;t<this.rows.length;t++)this.rows[t].disable(e),this.rows[t].add_row_button&&(this.rows[t].add_row_button.disabled=!0),this.rows[t].remove_all_rows_button&&(this.rows[t].remove_all_rows_button.disabled=!0),this.rows[t].delete_last_row_button&&(this.rows[t].delete_last_row_button.disabled=!0),this.rows[t].copy_button&&(this.rows[t].copy_button.disabled=!0),this.rows[t].delete_button&&(this.rows[t].delete_button.disabled=!0),this.rows[t].moveup_button&&(this.rows[t].moveup_button.disabled=!0),this.rows[t].movedown_button&&(this.rows[t].movedown_button.disabled=!0);this._super()},preBuild:function(){this._super(),this.rows=[],this.row_cache=[],this.hide_delete_buttons=this.options.disable_array_delete||this.jsoneditor.options.disable_array_delete,this.hide_delete_all_rows_buttons=this.hide_delete_buttons||this.options.disable_array_delete_all_rows||this.jsoneditor.options.disable_array_delete_all_rows,this.hide_delete_last_row_buttons=this.hide_delete_buttons||this.options.disable_array_delete_last_row||this.jsoneditor.options.disable_array_delete_last_row,this.hide_move_buttons=this.options.disable_array_reorder||this.jsoneditor.options.disable_array_reorder,this.hide_add_button=this.options.disable_array_add||this.jsoneditor.options.disable_array_add,this.show_copy_button=this.options.enable_array_copy||this.jsoneditor.options.enable_array_copy,this.array_controls_top=this.options.array_controls_top||this.jsoneditor.options.array_controls_top},build:function(){this.options.compact?(this.title=this.theme.getHeader(""),this.container.appendChild(this.title),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder)):(this.header=document.createElement("label"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),"tabs-top"===this.schema.format?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTopTabHolder(this.getValidId(this.getItemTitle())),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTopTabContentHolder(this.tabs_holder),this.active_tab=null):"tabs"===this.schema.format?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTabHolder(this.getValidId(this.getItemTitle())),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTabContentHolder(this.tabs_holder),this.active_tab=null):(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder),this.controls=this.theme.getButtonHolder(),this.array_controls_top?this.title.appendChild(this.controls):this.panel.appendChild(this.controls))),this.addControls()},onChildEditorChange:function(e){this.refreshValue(),this.refreshTabs(!0),this._super(e)},getItemTitle:function(){if(!this.item_title)if(this.schema.items&&!Array.isArray(this.schema.items)){var e=this.jsoneditor.expandRefs(this.schema.items);this.item_title=e.title||this.translate("default_array_item_title")}else this.item_title=this.translate("default_array_item_title");return this.cleanText(this.item_title)},getItemSchema:function(e){return Array.isArray(this.schema.items)?e>=this.schema.items.length?!0===this.schema.additionalItems?{}:this.schema.additionalItems?S({},this.schema.additionalItems):void 0:S({},this.schema.items[e]):this.schema.items?S({},this.schema.items):{}},getItemInfo:function(e){var t=this.getItemSchema(e);this.item_info=this.item_info||{};var i=JSON.stringify(t);return"undefined"!==typeof this.item_info[i]||(t=this.jsoneditor.expandRefs(t),this.item_info[i]={title:t.title||this.translate("default_array_item_title"),default:t.default,width:12,child_editors:t.properties||t.items}),this.item_info[i]},getElementEditor:function(e){var t=this.getItemInfo(e),i=this.getItemSchema(e);(i=this.jsoneditor.expandRefs(i)).title=t.title+" "+(e+1);var n,s=this.jsoneditor.getEditorClass(i);this.tabs_holder?(n="tabs-top"===this.schema.format?this.theme.getTopTabContent():this.theme.getTabContent()).id=this.path+"."+e:n=t.child_editors?this.theme.getChildEditorHolder():this.theme.getIndentedPanel(),this.row_holder.appendChild(n);var a=this.jsoneditor.createEditor(s,{jsoneditor:this.jsoneditor,schema:i,container:n,path:this.path+"."+e,parent:this,required:!0});return a.preBuild(),a.build(),a.postBuild(),a.title_controls||(a.array_controls=this.theme.getButtonHolder(),n.appendChild(a.array_controls)),a},destroy:function(){this.empty(!0),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.row_holder&&this.row_holder.parentNode&&this.row_holder.parentNode.removeChild(this.row_holder),this.controls&&this.controls.parentNode&&this.controls.parentNode.removeChild(this.controls),this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel),this.rows=this.row_cache=this.title=this.description=this.row_holder=this.panel=this.controls=null,this._super()},empty:function(e){if(this.rows){var t=this;T(this.rows,(function(i,n){e&&(n.tab&&n.tab.parentNode&&n.tab.parentNode.removeChild(n.tab),t.destroyRow(n,!0),t.row_cache[i]=null),t.rows[i]=null})),t.rows=[],e&&(t.row_cache=[])}},destroyRow:function(e,t){var i=e.container;t?(e.destroy(),i.parentNode&&i.parentNode.removeChild(i),e.tab&&e.tab.parentNode&&e.tab.parentNode.removeChild(e.tab)):(e.tab&&(e.tab.style.display="none"),i.style.display="none",e.unregister())},getMax:function(){return Array.isArray(this.schema.items)&&!1===this.schema.additionalItems?Math.min(this.schema.items.length,this.schema.maxItems||1/0):this.schema.maxItems||1/0},refreshTabs:function(e){var t=this;T(this.rows,(function(i,n){n.tab&&(e?n.tab_text.textContent=n.getHeaderText():n.tab===t.active_tab?t.theme.markTabActive(n):t.theme.markTabInactive(n))}))},setValue:function(e,t){if(e=e||[],Array.isArray(e)||(e=[e]),JSON.stringify(e)!==this.serialized){if(this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemInfo(e.length).default);this.getMax()&&e.length>this.getMax()&&(e=e.slice(0,this.getMax()));var i=this;T(e,(function(e,n){if(i.rows[e])i.rows[e].setValue(n,t);else if(i.row_cache[e])i.rows[e]=i.row_cache[e],i.rows[e].setValue(n,t),i.rows[e].container.style.display="",i.rows[e].tab&&(i.rows[e].tab.style.display=""),i.rows[e].register(),i.jsoneditor.trigger("addRow",i.rows[e]);else{var s=i.addRow(n,t);i.jsoneditor.trigger("addRow",s)}}));for(var n=e.length;n<i.rows.length;n++)i.destroyRow(i.rows[n]),i.rows[n]=null;i.rows=i.rows.slice(0,e.length);var s=null;T(i.rows,(function(e,t){if(t.tab===i.active_tab)return s=t.tab,!1})),!s&&i.rows.length&&(s=i.rows[0].tab),i.active_tab=s,i.refreshValue(t),i.refreshTabs(!0),i.refreshTabs(),i.onChange()}},refreshValue:function(e){var t=this,i=this.value?this.value.length:0;if(this.value=[],T(this.rows,(function(e,i){t.value[e]=i.getValue()})),i!==this.value.length||e){var n=this.schema.minItems&&this.schema.minItems>=this.rows.length;T(this.rows,(function(e,i){i.movedown_button&&(e===t.rows.length-1?i.movedown_button.style.display="none":i.movedown_button.style.display=""),i.delete_button&&(i.delete_button.style.display=n?"none":""),t.value[e]=i.getValue()}));var s=!1;this.value.length?1===this.value.length?(this.remove_all_rows_button.style.display="none",n||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",s=!0)):(n||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",s=!0),n||this.hide_delete_all_rows_buttons?this.remove_all_rows_button.style.display="none":(this.remove_all_rows_button.style.display="",s=!0)):(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none"),this.getMax()&&this.getMax()<=this.rows.length||this.hide_add_button?this.add_row_button.style.display="none":(this.add_row_button.style.display="",s=!0),!this.collapsed&&s?this.controls.style.display="inline-block":this.controls.style.display="none"}},addRow:function(e,t){var i=this,n=this.rows.length;i.rows[n]=this.getElementEditor(n),i.row_cache[n]=i.rows[n],i.tabs_holder&&(i.rows[n].tab_text=document.createElement("span"),i.rows[n].tab_text.textContent=i.rows[n].getHeaderText(),"tabs-top"===i.schema.format?(i.rows[n].tab=i.theme.getTopTab(i.rows[n].tab_text,this.getValidId(i.rows[n].path)),i.theme.addTopTab(i.tabs_holder,i.rows[n].tab)):(i.rows[n].tab=i.theme.getTab(i.rows[n].tab_text,this.getValidId(i.rows[n].path)),i.theme.addTab(i.tabs_holder,i.rows[n].tab)),i.rows[n].tab.addEventListener("click",(function(e){i.active_tab=i.rows[n].tab,i.refreshTabs(),e.preventDefault(),e.stopPropagation()})));var s=i.rows[n].title_controls||i.rows[n].array_controls;return i.hide_delete_buttons||(i.rows[n].delete_button=this.getButton(i.getItemTitle(),"delete",this.translate("button_delete_row_title",[i.getItemTitle()])),i.rows[n].delete_button.classList.add("delete","json-editor-btntype-delete"),i.rows[n].delete_button.setAttribute("data-i",n),i.rows[n].delete_button.addEventListener("click",(function(e){if(e.preventDefault(),e.stopPropagation(),!i.askConfirmation())return!1;var t=1*this.getAttribute("data-i"),n=i.getValue(),s=[],a=null;T(n,(function(e,i){e!==t&&s.push(i)}));var r=i.rows[t];i.setValue(s),i.rows[t]?a=i.rows[t].tab:i.rows[t-1]&&(a=i.rows[t-1].tab),a&&(i.active_tab=a,i.refreshTabs()),i.onChange(!0),i.jsoneditor.trigger("deleteRow",r)})),s&&s.appendChild(i.rows[n].delete_button)),i.show_copy_button&&(i.rows[n].copy_button=this.getButton(i.getItemTitle(),"copy","Copy "+i.getItemTitle()),i.rows[n].copy_button.classList.add("copy","json-editor-btntype-copy"),i.rows[n].copy_button.setAttribute("data-i",n),i.rows[n].copy_button.addEventListener("click",(function(e){var t=i.getValue();e.preventDefault(),e.stopPropagation();var n=1*this.getAttribute("data-i");T(t,(function(e,i){e===n&&t.push(i)})),i.setValue(t),i.refreshValue(!0),i.onChange(!0)})),s.appendChild(i.rows[n].copy_button)),n&&!i.hide_move_buttons&&(i.rows[n].moveup_button=this.getButton("","tabs-top"===this.schema.format?"moveleft":"moveup",this.translate("button_move_up_title")),i.rows[n].moveup_button.classList.add("moveup","json-editor-btntype-move"),i.rows[n].moveup_button.setAttribute("data-i",n),i.rows[n].moveup_button.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();var t=1*this.getAttribute("data-i");if(!(t<=0)){var n=i.getValue(),s=n[t-1];n[t-1]=n[t],n[t]=s,i.setValue(n),i.active_tab=i.rows[t-1].tab,i.refreshTabs(),i.onChange(!0),i.jsoneditor.trigger("moveRow",i.rows[t-1])}})),s&&s.appendChild(i.rows[n].moveup_button)),i.hide_move_buttons||(i.rows[n].movedown_button=this.getButton("","tabs-top"===this.schema.format?"moveright":"movedown",this.translate("button_move_down_title")),i.rows[n].movedown_button.classList.add("movedown","json-editor-btntype-move"),i.rows[n].movedown_button.setAttribute("data-i",n),i.rows[n].movedown_button.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();var t=1*this.getAttribute("data-i"),n=i.getValue();if(!(t>=n.length-1)){var s=n[t+1];n[t+1]=n[t],n[t]=s,i.setValue(n),i.active_tab=i.rows[t+1].tab,i.refreshTabs(),i.onChange(!0),i.jsoneditor.trigger("moveRow",i.rows[t+1])}})),s&&s.appendChild(i.rows[n].movedown_button)),e&&i.rows[n].setValue(e,t),i.refreshTabs(),i.rows[n]},addControls:function(){var e=this;this.collapsed=!1,this.toggle_button=this.getButton("","collapse",this.translate("button_collapse")),this.toggle_button.classList.add("json-editor-btntype-toggle"),this.toggle_button.style.margin="0 10px 0 0",this.title.insertBefore(this.toggle_button,this.title.childNodes[0]);var t=e.row_holder.style.display,i=e.controls.style.display;this.toggle_button.addEventListener("click",(function(n){n.preventDefault(),n.stopPropagation(),e.collapsed?(e.collapsed=!1,e.panel&&(e.panel.style.display=""),e.row_holder.style.display=t,e.tabs_holder&&(e.tabs_holder.style.display=""),e.controls.style.display=i,e.setButtonText(this,"","collapse",e.translate("button_collapse"))):(e.collapsed=!0,e.row_holder.style.display="none",e.tabs_holder&&(e.tabs_holder.style.display="none"),e.controls.style.display="none",e.panel&&(e.panel.style.display="none"),e.setButtonText(this,"","expand",e.translate("button_expand")))})),this.options.collapsed&&L(this.toggle_button,"click"),this.schema.options&&"undefined"!==typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"),this.add_row_button=this.getButton(this.getItemTitle(),"add",this.translate("button_add_row_title",[this.getItemTitle()])),this.add_row_button.classList.add("json-editor-btntype-add"),this.add_row_button.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation();var i,n=e.rows.length;e.row_cache[n]?(i=e.rows[n]=e.row_cache[n],e.rows[n].setValue(e.rows[n].getDefault(),!0),e.rows[n].container.style.display="",e.rows[n].tab&&(e.rows[n].tab.style.display=""),e.rows[n].register()):i=e.addRow(),e.active_tab=e.rows[n].tab,e.refreshTabs(),e.refreshValue(),e.onChange(!0),e.jsoneditor.trigger("addRow",i)})),e.controls.appendChild(this.add_row_button),this.delete_last_row_button=this.getButton(this.translate("button_delete_last",[this.getItemTitle()]),"subtract",this.translate("button_delete_last_title",[this.getItemTitle()])),this.delete_last_row_button.classList.add("json-editor-btntype-deletelast"),this.delete_last_row_button.addEventListener("click",(function(t){if(t.preventDefault(),t.stopPropagation(),!e.askConfirmation())return!1;var i=e.getValue(),n=null,s=i.pop();e.setValue(i),e.rows[e.rows.length-1]&&(n=e.rows[e.rows.length-1].tab),n&&(e.active_tab=n,e.refreshTabs()),e.onChange(!0),e.jsoneditor.trigger("deleteRow",s)})),e.controls.appendChild(this.delete_last_row_button),this.remove_all_rows_button=this.getButton(this.translate("button_delete_all"),"delete",this.translate("button_delete_all_title")),this.remove_all_rows_button.classList.add("json-editor-btntype-deleteall"),this.remove_all_rows_button.addEventListener("click",(function(t){if(t.preventDefault(),t.stopPropagation(),!e.askConfirmation())return!1;e.empty(!0),e.setValue([]),e.onChange(!0),e.jsoneditor.trigger("deleteAllRows")})),e.controls.appendChild(this.remove_all_rows_button),e.tabs&&(this.add_row_button.style.width="100%",this.add_row_button.style.textAlign="left",this.add_row_button.style.marginBottom="3px",this.delete_last_row_button.style.width="100%",this.delete_last_row_button.style.textAlign="left",this.delete_last_row_button.style.marginBottom="3px",this.remove_all_rows_button.style.width="100%",this.remove_all_rows_button.style.textAlign="left",this.remove_all_rows_button.style.marginBottom="3px")},showValidationErrors:function(e){var t=this,i=[],n=[];T(e,(function(e,s){s.path===t.path?i.push(s):n.push(s)})),this.error_holder&&(i.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",T(i,(function(e,i){t.error_holder.appendChild(t.theme.getErrorMessage(i.message))}))):this.error_holder.style.display="none"),T(this.rows,(function(e,t){t.showValidationErrors(n)}))}}),$=q.extend({onInputChange:function(){this.value=this.input.value,this.onChange(!0)},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){var e=this.getTitle().length;for(var t in this.select_values)this.select_values.hasOwnProperty(t)&&(e=Math.max(e,(this.select_values[t]+"").length+4));return Math.min(12,Math.max(e/7,2))},preBuild:function(){var e;this._super(),this.select_options={},this.select_values={},this.option_keys=[],this.option_titles=[];var t=this.jsoneditor.expandRefs(this.schema.items||{}),i=t.enum||[],n=t.options&&t.options.enum_titles||[];for(e=0;e<i.length;e++)this.sanitize(i[e])===i[e]&&(this.option_keys.push(i[e]+""),this.option_titles.push((n[e]||i[e])+""),this.select_values[i[e]+""]=i[e])},build:function(){var e,t=this;if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.options.infoText)),this.options.compact&&this.container.classList.add("compact"),!this.schema.format&&this.option_keys.length<8||"checkbox"===this.schema.format){for(this.input_type="checkboxes",this.inputs={},this.controls={},e=0;e<this.option_keys.length;e++){this.inputs[this.option_keys[e]]=this.theme.getCheckbox(),this.select_options[this.option_keys[e]]=this.inputs[this.option_keys[e]];var i=this.theme.getCheckboxLabel(this.option_titles[e]);this.controls[this.option_keys[e]]=this.theme.getFormControl(i,this.inputs[this.option_keys[e]])}this.control=this.theme.getMultiCheckboxHolder(this.controls,this.label,this.description,this.infoButton),this.inputs.controlgroup=this.inputs.controls=this.control}else{for(this.input_type="select",this.input=this.theme.getSelectInput(this.option_keys,!0),this.theme.setSelectOptions(this.input,this.option_keys,this.option_titles),this.input.setAttribute("multiple","multiple"),this.input.size=Math.min(10,this.option_keys.length),e=0;e<this.option_keys.length;e++)this.select_options[this.option_keys[e]]=this.input.children[e];this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton)}(this.schema.readOnly||this.schema.readonly)&&this.disable(!0),this.container.appendChild(this.control),this.multiselectChangeHandler=function(i){var n=[];for(e=0;e<t.option_keys.length;e++)t.select_options[t.option_keys[e]]&&(t.select_options[t.option_keys[e]].selected||t.select_options[t.option_keys[e]].checked)&&n.push(t.select_values[t.option_keys[e]]);t.updateValue(n),t.onChange(!0)},this.control.addEventListener("change",this.multiselectChangeHandler,!1),window.requestAnimationFrame((function(){t.afterInputReady()}))},postBuild:function(){this._super()},afterInputReady:function(){this.theme.afterInputReady(this.input||this.inputs)},setValue:function(e,t){var i;for(i in e=e||[],Array.isArray(e)||(e=[e]),e=e.map((function(e){return e+""})),this.select_options)this.select_options.hasOwnProperty(i)&&(this.select_options[i]["select"===this.input_type?"selected":"checked"]=-1!==e.indexOf(i));this.updateValue(e),this.onChange(!0)},removeValue:function(e){e=[].concat(e),this.setValue(this.getValue().filter((function(t){return-1===e.indexOf(t)})))},addValue:function(e){this.setValue(this.getValue().concat(e))},updateValue:function(e){for(var t=!1,i=[],n=0;n<e.length;n++)if(this.select_options[e[n]+""]){var s=this.sanitize(this.select_values[e[n]]);i.push(s),s!==e[n]&&(t=!0)}else t=!0;return this.value=i,t},sanitize:function(e){return"boolean"===this.schema.items.type?!!e:"number"===this.schema.items.type?1*e||0:"integer"===this.schema.items.type?Math.floor(1*e||0):""+e},enable:function(){if(!this.always_disabled){if(this.input)this.input.disabled=!1;else if(this.inputs)for(var e in this.inputs)this.inputs.hasOwnProperty(e)&&(this.inputs[e].disabled=!1);this._super()}},disable:function(e){if(e&&(this.always_disabled=!0),this.input)this.input.disabled=!0;else if(this.inputs)for(var t in this.inputs)this.inputs.hasOwnProperty(t)&&(this.inputs[t].disabled=!0);this._super()},destroy:function(){this._super()},escapeRegExp:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},showValidationErrors:function(e){var t=new RegExp("^"+this.escapeRegExp(this.path)+"(\\.\\d+)?$"),i=[];T(e,(function(e,n){n.path.match(t)&&i.push(n.message)})),i.length?this.theme.addInputError(this.input||this.inputs,i.join(". ")+"."):this.theme.removeInputError(this.input||this.inputs)}}),W=$.extend({setValue:function(e,t){this.choices_instance?(e=[].concat(e).map((function(e){return e+""})),this.updateValue(e),this.choices_instance.removeActiveItems(),this.choices_instance.setChoiceByValue(this.value),this.onChange(!0)):this._super(e,t)},afterInputReady:function(){if(window.Choices&&!this.choices_instance){var e,t=this;e=this.expandCallbacks("choices",S({},{removeItems:!0,removeItemButton:!0},this.defaults.options.choices||{},this.options.choices||{},{addItems:!0,editItems:!1,duplicateItemsAllowed:!1})),this.newEnumAllowed=this.schema&&"string"===this.schema.items.type,this.choices_instance=new window.Choices(this.input,e),this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=function(e){var i=t.choices_instance.getValue(!0);t.updateValue(i),t.onChange(!0)},this.control.addEventListener("change",this.multiselectChangeHandler,!1)}this._super()},updateValue:function(e){e=[].concat(e);for(var t=!1,i=[],n=0;n<e.length;n++){if(!this.select_values[e[n]+""]){if(t=!0,!this.newEnumAllowed)continue;if(!this.addNewOption(e[n]))continue}var s=this.sanitize(this.select_values[e[n]]);i.push(s),s!==e[n]&&(t=!0)}return this.value=i,t},addNewOption:function(e){return this.option_keys.push(e+""),this.option_titles.push(e+""),this.select_values[e+""]=e,this.schema.items.enum.push(e),this.choices_instance.setChoices([{value:e+"",label:e+""}],"value","label",!1),!0},updateChoices:function(e){var t=this,i=[],n=[],s={};(e=e.map((function(e){var i=e.value,n=e.label,s=e.selected;return{value:i,label:n,selected:t.value.indexOf(String(i))>=0||!!s}}))).forEach((function(e){i.push(String(e.value)),n.push(e.label),s[String(e.value)]=e.value})),this.option_keys=i,this.option_titles=n,this.select_values=s,this.schema.items.enum=Object.values(s),setTimeout((function(){t.choices_instance&&(t.choices_instance.removeActiveItems(),t.choices_instance.setChoices(e,"value","label",!0))}))},enable:function(){!this.always_disabled&&this.choices_instance&&this.choices_instance.enable(),this._super()},disable:function(e){this.choices_instance&&this.choices_instance.disable(),this._super(e)},destroy:function(){this.choices_instance&&(this.choices_instance.destroy(),this.choices_instance=null),this._super()}}),Z=$.extend({setValue:function(e,t){this.select2_instance?(e=[].concat(e).map((function(e){return e+""})),this.updateValue(e),this.select2v4?this.select2_instance.val(this.value).change():this.select2_instance.select2("val",this.value),this.onChange(!0)):this._super(e,t)},afterInputReady:function(){var e,t=this;window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&!this.select2_instance&&(e=this.expandCallbacks("select2",S({},{tags:!0,width:"100%"},this.defaults.options.select2||{},this.options.select2||{})),this.newEnumAllowed=e.tags=!!e.tags&&this.schema.items&&"string"===this.schema.items.type,this.select2_instance=window.jQuery(this.input).select2(e),this.select2v4=this.select2_instance.select2.hasOwnProperty("amd"),this.selectChangeHandler=function(){var e=t.select2v4?t.select2_instance.val():t.select2_instance.select2("val");t.updateValue(e),t.onChange(!0)},this.select2_instance.on("select2-blur",this.selectChangeHandler),this.select2_instance.on("change",this.selectChangeHandler)),this._super()},updateValue:function(e){e=[].concat(e);for(var t=!1,i=[],n=0;n<e.length;n++){if(!this.select_values[e[n]+""]){if(t=!0,!this.newEnumAllowed)continue;if(!this.addNewOption(e[n]))continue}var s=this.sanitize(this.select_values[e[n]]);i.push(s),s!==e[n]&&(t=!0)}return this.value=i,t},addNewOption:function(e){this.option_keys.push(e+""),this.option_titles.push(e+""),this.select_values[e+""]=e,this.schema.items.enum.push(e);var t=this.input.querySelector('option[value="'+e+'"]');return t?t.removeAttribute("data-select2-tag"):this.input.appendChild(new Option(e,e,!1,!1)).trigger("change"),!0},enable:function(){!this.always_disabled&&this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!1):this.select2_instance.select2("enable",!0)),this._super()},disable:function(e){this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!0):this.select2_instance.select2("enable",!1)),this._super()},destroy:function(){this.select2_instance&&(this.select2_instance.select2("destroy"),this.select2_instance=null),this._super()}}),Q=$.extend({setValue:function(e,t){this.selectize_instance?(e=[].concat(e).map((function(e){return e+""})),this.updateValue(e),this.selectize_instance.setValue(this.value),this.onChange(!0)):this._super(e,t)},afterInputReady:function(){var e,t=this;window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&!this.selectize_instance&&(e=this.expandCallbacks("selectize",S({},{plugins:["remove_button"],delimiter:!1,createOnBlur:!0,create:!0},this.defaults.options.selectize||{},this.options.selectize||{})),this.newEnumAllowed=e.create=!!e.create&&this.schema.items&&"string"===this.schema.items.type,this.selectize_instance=window.jQuery(this.input).selectize(e)[0].selectize,this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=function(e){var i=t.selectize_instance.getValue();t.updateValue(i),t.onChange(!0)},this.selectize_instance.on("change",this.multiselectChangeHandler)),this._super()},updateValue:function(e){e=[].concat(e);for(var t=!1,i=[],n=0;n<e.length;n++){if(!this.select_values[e[n]+""]){if(t=!0,!this.newEnumAllowed)continue;if(!this.addNewOption(e[n]))continue}var s=this.sanitize(this.select_values[e[n]]);i.push(s),s!==e[n]&&(t=!0)}return this.value=i,t},addNewOption:function(e){return this.option_keys.push(e+""),this.option_titles.push(e+""),this.select_values[e+""]=e,this.schema.items.enum.push(e),this.selectize_instance.addOption({text:e,value:e}),!0},enable:function(){!this.always_disabled&&this.selectize_instance&&this.selectize_instance.unlock(),this._super()},disable:function(e){this.selectize_instance&&this.selectize_instance.lock(),this._super(e)},destroy:function(){this.selectize_instance&&(this.selectize_instance.destroy(),this.selectize_instance=null),this._super()}}),Y=U.extend({postBuild:function(){window.Autocomplete&&(this.autocomplete_wrapper=document.createElement("div"),this.input.parentNode.insertBefore(this.autocomplete_wrapper,this.input.nextSibling),this.autocomplete_wrapper.appendChild(this.input),this.autocomplete_dropdown=document.createElement("ul"),this.input.parentNode.insertBefore(this.autocomplete_dropdown,this.input.nextSibling)),this._super()},afterInputReady:function(){var e;window.Autocomplete&&!this.autocomplete_instance&&(e=this.expandCallbacks("autocomplete",S({},{search:function(e,t){return console.log('No "search" callback defined for autocomplete in property "'+e.key+'"'),[]}.bind(null,this),baseClass:"autocomplete"},this.defaults.options.autocomplete||{},this.options.autocomplete||{})),this.autocomplete_wrapper.classList.add(e.baseClass),this.autocomplete_dropdown.classList.add(e.baseClass+"-result-list"),this.autocomplete_instance=new window.Autocomplete(this.autocomplete_wrapper,e)),this._super()},destroy:function(){this.autocomplete_instance&&(this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.autocomplete_dropdown&&this.autocomplete_dropdown.parentNode&&this.autocomplete_dropdown.parentNode.removeChild(this.autocomplete_dropdown),this.autocomplete_wrapper&&this.autocomplete_wrapper.parentNode&&this.autocomplete_wrapper.parentNode.removeChild(this.autocomplete_wrapper),this.autocomplete_instance=null),this._super()}}),K=q.extend({getNumColumns:function(){return 4},setFileReaderListener:function(e){var t=this;e.addEventListener("load",(function(e){if(t.count===t.current_item_index)t.value[t.count][t.key]=e.target.result;else{var i={};for(var n in t.parent.schema.properties)i[n]="";i[t.key]=e.target.result,t.value.splice(t.count,0,i)}t.count+=1,t.count===t.total+t.current_item_index&&t.arrayEditor.setValue(t.value)}))},build:function(){var e=this;if(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired()),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.options.infoText)),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!window.FileReader)throw new Error("FileReader required for base64 editor");this.uploader=this.theme.getFormInputField("file"),e.schema.options&&e.schema.options.multiple&&!0===e.schema.options.multiple&&e.parent&&"object"===e.parent.schema.type&&e.parent.parent&&"array"===e.parent.parent.schema.type&&this.uploader.setAttribute("multiple",""),this.uploader.addEventListener("change",(function(t){if(t.preventDefault(),t.stopPropagation(),this.files&&this.files.length)if(this.files.length>1&&e.schema.options&&e.schema.options.multiple&&!0===e.schema.options.multiple&&e.parent&&"object"===e.parent.schema.type&&e.parent.parent&&"array"===e.parent.parent.schema.type){e.arrayEditor=e.jsoneditor.getEditor(e.parent.parent.path),e.value=e.arrayEditor.getValue(),e.total=this.files.length,e.current_item_index=parseInt(e.parent.key),e.count=e.current_item_index;for(var i=0;i<e.total;i++){var n=new FileReader;e.setFileReaderListener(n),n.readAsDataURL(this.files[i])}}else{var s=new FileReader;s.onload=function(t){e.value=t.target.result,e.refreshPreview(),e.onChange(!0),s=null},s.readAsDataURL(this.files[0])}}))}this.preview=this.theme.getFormInputDescription(this.schema.description),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview,this.infoButton),this.container.appendChild(this.control)},refreshPreview:function(){if(this.last_preview!==this.value&&(this.last_preview=this.value,this.preview.innerHTML="",this.value)){var e=this.value.match(/^data:([^;,]+)[;,]/);if(e&&(e=e[1]),e){if(this.preview.innerHTML="<strong>Type:</strong> "+e+", <strong>Size:</strong> "+Math.floor((this.value.length-this.value.split(",")[0].length-1)/1.33333)+" bytes","image"===e.substr(0,5)){this.preview.innerHTML+="<br>";var t=document.createElement("img");t.style.maxWidth="100%",t.style.maxHeight="100px",t.src=this.value,this.preview.appendChild(t)}}else this.preview.innerHTML="<em>Invalid data URI</em>"}},enable:function(){this.always_disabled||(this.uploader&&(this.uploader.disabled=!1),this._super())},disable:function(e){e&&(this.always_disabled=!0),this.uploader&&(this.uploader.disabled=!0),this._super()},setValue:function(e){this.value!==e&&(this.value=e,this.input.value=this.value,this.refreshPreview(),this.onChange())},destroy:function(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader),this._super()}}),X=q.extend({init:function(e,t){this._super(e,t),this.active=!1,this.parent&&this.parent.schema&&(Array.isArray(this.parent.schema.required)?-1===this.parent.schema.required.indexOf(this.key)&&this.parent.schema.required.push(this.key):this.parent.schema.required=[this.key])},build:function(){this.options.compact=!0;var e=this.schema.title||this.key,t=this.expandCallbacks("button",S({},{icon:"",validated:!1,align:"left",action:function(e,t){window.alert('No button action defined for "'+e.path+'"')}.bind(null,this)},this.defaults.options.button||{},this.options.button||{}));this.input=this.theme.getFormButton(e,t.icon,e),this.input.addEventListener("click",t.action,!1),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.always_disabled=!0,this.input.setAttribute("readonly","true")),this.setInputAttributes(["readonly"]),this.control=this.theme.getFormButtonHolder(t.align),this.control.appendChild(this.input),this.container.appendChild(this.control);var i=this;this.changeHandler=function(){i.jsoneditor.validate(i.jsoneditor.getValue()).length>0?i.disable():i.enable()},t.validated&&this.jsoneditor.on("change",this.changeHandler)},enable:function(){this.always_disabled||(this.input.disabled=!1,this._super())},disable:function(e){e&&(this.always_disabled=!0),this.input.disabled=!0,this._super()},getNumColumns:function(){return 2},activate:function(){this.active=!1,this.enable()},deactivate:function(){this.isRequired()||(this.active=!1,this.disable())},destroy:function(){this.jsoneditor.off("change",this.changeHandler),this.changeHandler=null,this._super()}}),ee=q.extend({setValue:function(e,t){e=!!e;var i=this.getValue()!==e;this.value=e,this.input.checked=this.value,this.onChange(i)},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){return Math.min(12,Math.max(this.getTitle().length/7,2))},build:function(){var e=this;this.label=this.header=this.theme.getCheckboxLabel(this.getTitle(),this.isRequired()),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.infoText&&!this.options.compact&&(this.infoButton=this.theme.getInfoButton(this.options.infoText)),this.options.compact&&this.container.classList.add("compact"),this.input=this.theme.getCheckbox(),this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",(function(t){t.preventDefault(),t.stopPropagation(),e.value=this.checked,e.onChange(!0)})),this.container.appendChild(this.control)},enable:function(){this.always_disabled||(this.input.disabled=!1,this._super())},disable:function(e){e&&(this.always_disabled=!0),this.input.disabled=!0,this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this._super()},showValidationErrors:function(e){var t=this;if("always"===this.jsoneditor.options.show_errors);else if(!this.is_dirty&&this.previous_error_setting===this.jsoneditor.options.show_errors)return;this.previous_error_setting=this.jsoneditor.options.show_errors;var i=[];T(e,(function(e,n){n.path===t.path&&i.push(n.message)})),this.input.controlgroup=this.control,i.length?this.theme.addInputError(this.input,i.join(". ")+"."):this.theme.removeInputError(this.input)}}),te=q.extend({setValue:function(e,t){var i=this.typecast(e||"");this.enum_values.indexOf(i)<0&&(i=this.enum_values[0]),this.value!==i&&(t?this.is_dirty=!1:"change"===this.jsoneditor.options.show_errors&&(this.is_dirty=!0),this.input.value=this.enum_options[this.enum_values.indexOf(i)],this.value=i,this.onChange(),this.change())},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){if(!this.enum_options)return 3;for(var e=this.getTitle().length,t=0;t<this.enum_options.length;t++)e=Math.max(e,this.enum_options[t].length+4);return Math.min(12,Math.max(e/7,2))},typecast:function(e){return"boolean"===this.schema.type?"undefined"===e||void 0===e?void 0:!!e:"number"===this.schema.type?1*e||0:"integer"===this.schema.type?Math.floor(1*e||0):void 0===e?void 0:""+e},getValue:function(){if(this.dependenciesFulfilled)return this.typecast(this.value)},preBuild:function(){var e,t,i=this;if(this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[],this.schema.enum){var n=this.schema.options&&this.schema.options.enum_titles||[];T(this.schema.enum,(function(e,t){i.enum_options[e]=""+t,i.enum_display[e]=""+(n[e]||t),i.enum_values[e]=i.typecast(t)}))}else if("boolean"===this.schema.type)i.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],i.enum_options=["1",""],i.enum_values=[!0,!1];else{if(!this.schema.enumSource)throw new Error("'select' editor requires the enum property to be set.");if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],Array.isArray(this.schema.enumSource))for(e=0;e<this.schema.enumSource.length;e++)"string"===typeof this.schema.enumSource[e]?this.enumSource[e]={source:this.schema.enumSource[e]}:Array.isArray(this.schema.enumSource[e])?this.enumSource[e]=this.schema.enumSource[e]:this.enumSource[e]=S({},this.schema.enumSource[e]);else this.schema.enumValue?this.enumSource=[{source:this.schema.enumSource,value:this.schema.enumValue}]:this.enumSource=[{source:this.schema.enumSource}];for(e=0;e<this.enumSource.length;e++)this.enumSource[e].value&&("function"===typeof(t=this.expandCallbacks("template",{template:this.enumSource[e].value})).template?this.enumSource[e].value=t.template:this.enumSource[e].value=this.jsoneditor.compileTemplate(this.enumSource[e].value,this.template_engine)),this.enumSource[e].title&&("function"===typeof(t=this.expandCallbacks("template",{template:this.enumSource[e].title})).template?this.enumSource[e].title=t.template:this.enumSource[e].title=this.jsoneditor.compileTemplate(this.enumSource[e].title,this.template_engine)),this.enumSource[e].filter&&this.enumSource[e].value&&("function"===typeof(t=this.expandCallbacks("template",{template:this.enumSource[e].filter})).template?this.enumSource[e].filter=t.template:this.enumSource[e].filter=this.jsoneditor.compileTemplate(this.enumSource[e].filter,this.template_engine))}},build:function(){var e=this;this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.options.infoText)),this.options.compact&&this.container.classList.add("compact"),this.input=this.theme.getSelectInput(this.enum_options,!1),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display),(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.setInputAttributes([]),this.input.addEventListener("change",(function(t){t.preventDefault(),t.stopPropagation(),e.onInputChange()})),this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton),this.container.appendChild(this.control),this.value=this.enum_values[0],window.requestAnimationFrame((function(){e.input.parentNode&&e.afterInputReady()}))},afterInputReady:function(){this.theme.afterInputReady(this.input)},onInputChange:function(){var e,t=this.typecast(this.input.value);(e=-1===this.enum_values.indexOf(t)?this.enum_values[0]:this.enum_values[this.enum_values.indexOf(t)])!==this.value&&(this.is_dirty=!0,this.value=e,this.onChange(!0))},onWatchedFieldChange:function(){var e,t,i=[],n=[];if(this.enumSource){e=this.getWatchedFieldValues();for(var s=0;s<this.enumSource.length;s++)if(Array.isArray(this.enumSource[s]))i=i.concat(this.enumSource[s]),n=n.concat(this.enumSource[s]);else{var a=[];if(a=Array.isArray(this.enumSource[s].source)?this.enumSource[s].source:e[this.enumSource[s].source]){if(this.enumSource[s].slice&&(a=Array.prototype.slice.apply(a,this.enumSource[s].slice)),this.enumSource[s].filter){var r=[];for(t=0;t<a.length;t++)this.enumSource[s].filter({i:t,item:a[t],watched:e})&&r.push(a[t]);a=r}var o=[],l=[];for(t=0;t<a.length;t++){var c=a[t];this.enumSource[s].value?l[t]=this.typecast(this.enumSource[s].value({i:t,item:c})):l[t]=a[t],this.enumSource[s].title?o[t]=this.enumSource[s].title({i:t,item:c}):o[t]=l[t]}this.enumSource[s].sort&&function(e,t,i){e.map((function(e,i){return{v:e,t:t[i]}})).sort((function(e,t){return e.v<t.v?-i:e.v===t.v?0:i})).forEach((function(i,n){e[n]=i.v,t[n]=i.t}))}.bind(null,l,o,"desc"===this.enumSource[s].sort?1:-1)(),i=i.concat(l),n=n.concat(o)}}var h=this.value;this.theme.setSelectOptions(this.input,i,n),this.enum_options=i,this.enum_display=n,this.enum_values=i,-1!==i.indexOf(h)||!1!==this.jsoneditor.options.enum_source_value_auto_select?(this.input.value=h,this.value=h):(this.input.value=i[0],this.value=this.typecast(i[0]||""),this.parent&&!this.watchLoop?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.jsoneditor.notifyWatchers(this.path))}this._super()},enable:function(){this.always_disabled||(this.input.disabled=!1),this._super()},disable:function(e){e&&(this.always_disabled=!0),this.input.disabled=!0,this._super(e)},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this._super()},showValidationErrors:function(e){var t=this;this.previous_error_setting=this.jsoneditor.options.show_errors;var i=[];T(e,(function(e,n){n.path===t.path&&i.push(n.message)})),i.length?this.theme.addInputError(this.input,i.join(". ")+"."):this.theme.removeInputError(this.input)}}),ie=te.extend({setValue:function(e,t){if(this.choices_instance){var i=this.typecast(e||"");if(void 0===this.enum_values[0]&&(this.enum_values=[i],this.enum_options=[""+i]),this.enum_values.indexOf(i)<0&&(i=this.enum_values[0]),this.value===i)return;t?this.is_dirty=!1:"change"===this.jsoneditor.options.show_errors&&(this.is_dirty=!0);var n=this.input.value=this.enum_options[this.enum_values.indexOf(i)];this.choices_instance.setChoiceByValue(n),this.value=i,this.onChange()}else this._super(e,t)},afterInputReady:function(){var e;window.Choices&&!this.choices_instance&&(e=this.expandCallbacks("choices",S({},this.defaults.options.choices||{},this.options.choices||{})),this.choices_instance=new window.Choices(this.input,e));this._super()},onWatchedFieldChange:function(){this._super();var e=this.getWatchedFieldValues();if(this.enumSource&&this.enumSource[0].setter){var t=this.enumSource[0].setter;"function"===typeof window[t]&&window[t](this,e)}else if(this.choices_instance&&void 0===e.self){var i=this,n=this.enum_options.map((function(e,t){return{value:e,label:i.enum_display[t]}}));this.choices_instance.setChoices(n,"value","label",!0),this.choices_instance.setChoiceByValue(this.value+"")}},updateChoices:function(e){var t,i=this,n=[],s=[],a=[];e.forEach((function(e,i){n.push(e.value),s.push(String(e.value)),a.push(String(e.label)),!0===e.selected&&(t=i)})),this.enum_values=n,this.enum_options=s,this.enum_display=a,void 0===t&&-1===(t=s.indexOf(String(this.value)))&&(t=0),this.input.value=s[t],this.value=this.typecast(s[t]),this.onChange(!0),setTimeout((function(){i.choices_instance&&(i.choices_instance.setChoices(e.map((function(e){var t=e.label,i=e.value;return{label:String(t),value:String(i)}})),"value","label",!0),i.choices_instance.setChoiceByValue(i.value+""))}))},enable:function(){!this.always_disabled&&this.choices_instance&&this.choices_instance.enable(),this._super()},disable:function(e){this.choices_instance&&this.choices_instance.disable(),this._super(e)},destroy:function(){this.choices_instance&&(this.choices_instance.destroy(),this.choices_instance=null),this._super()}}),ne=U.extend({build:function(){if(this._super(),this.input&&window.flatpickr&&"object"===typeof this.options.flatpickr){this.options.flatpickr.enableTime="date"!==this.schema.format,this.options.flatpickr.noCalendar="time"===this.schema.format,"integer"===this.schema.type&&(this.options.flatpickr.mode="single"),this.input.setAttribute("data-input","");var e=this.input;if(!0===this.options.flatpickr.wrap){var t=[];if(!1!==this.options.flatpickr.showToggleButton){var i=this.getButton("","time"===this.schema.format?"time":"calendar",this.translate("flatpickr_toggle_button"));i.setAttribute("data-toggle",""),t.push(i)}if(!1!==this.options.flatpickr.showClearButton){var n=this.getButton("","clear",this.translate("flatpickr_clear_button"));n.setAttribute("data-clear",""),t.push(n)}var s=this.input.parentNode,a=this.input.nextSibling,r=this.theme.getInputGroup(this.input,t);void 0!==r?(this.options.flatpickr.inline=!1,s.insertBefore(r,a),e=r):this.options.flatpickr.wrap=!1}this.flatpickr=window.flatpickr(e,this.options.flatpickr),!0===this.options.flatpickr.inline&&!0===this.options.flatpickr.inlineHideInput&&this.input.setAttribute("type","hidden")}},getValue:function(){if(this.dependenciesFulfilled){if("string"===this.schema.type)return this.value;if(""!==this.value&&void 0!==this.value){var e="time"===this.schema.format?"1970-01-01 "+this.value:this.value;return parseInt(new Date(e).getTime())}}},setValue:function(e,t,i){if("string"===this.schema.type)this._super(e,t,i),this.flatpickr&&this.flatpickr.setDate(e);else if(e>0){var n=new Date(1e3*e),s=n.getFullYear(),a=this.zeroPad(n.getMonth()+1),r=this.zeroPad(n.getDate()),o=this.zeroPad(n.getHours()),l=this.zeroPad(n.getMinutes()),c=this.zeroPad(n.getSeconds()),h=[s,a,r].join("-"),d=[o,l,c].join(":"),u=h+"T"+d;"date"===this.schema.format?u=h:"time"===this.schema.format&&(u=d),this.input.value=u,this.refreshValue(),this.flatpickr&&this.flatpickr.setDate(u)}},destroy:function(){this.flatpickr&&this.flatpickr.destroy(),this.flatpickr=null,this._super()},zeroPad:function(e){return("0"+e).slice(-2)}}),se=q.extend({register:function(){if(this.editors){for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister();this.editors[this.currentEditor]&&this.editors[this.currentEditor].register()}this._super()},unregister:function(){if(this._super(),this.editors)for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister()},getNumColumns:function(){return this.editors[this.currentEditor]?Math.max(this.editors[this.currentEditor].getNumColumns(),4):4},enable:function(){if(this.editors)for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].enable();this._super()},disable:function(){if(this.editors)for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].disable();this._super()},switchEditor:function(){var e=this,t=this.getWatchedFieldValues();if(t){var i=document.location.origin+document.location.pathname+this.template(t);this.editors[this.refs[i]]||this.buildChildEditor(i),this.currentEditor=this.refs[i],this.register(),T(this.editors,(function(t,i){i&&(e.currentEditor===t?i.container.style.display="":i.container.style.display="none")})),this.refreshValue(),this.onChange(!0)}},buildChildEditor:function(e){this.refs[e]=this.editors.length;var t=this.theme.getChildEditorHolder();this.editor_holder.appendChild(t);var i=S({},this.schema,this.jsoneditor.refs[e]),n=this.jsoneditor.getEditorClass(i,this.jsoneditor),s=this.jsoneditor.createEditor(n,{jsoneditor:this.jsoneditor,schema:i,container:t,path:this.path,parent:this,required:!0});this.editors.push(s),s.preBuild(),s.build(),s.postBuild()},preBuild:function(){var e;for(this.refs={},this.editors=[],this.currentEditor="",e=0;e<this.schema.links.length;e++)if("describedby"===this.schema.links[e].rel.toLowerCase()){this.template=this.jsoneditor.compileTemplate(this.schema.links[e].href,this.template_engine);break}this.schema.links=this.schema.links.slice(0,e).concat(this.schema.links.slice(e+1)),0===this.schema.links.length&&delete this.schema.links,this.baseSchema=S({},this.schema)},build:function(){this.editor_holder=document.createElement("div"),this.container.appendChild(this.editor_holder),this.switchEditor()},onWatchedFieldChange:function(){this.switchEditor()},onChildEditorChange:function(e){this.editors[this.currentEditor]&&this.refreshValue(),this._super(e)},refreshValue:function(){this.editors[this.currentEditor]&&(this.value=this.editors[this.currentEditor].getValue())},setValue:function(e,t){this.editors[this.currentEditor]&&(this.editors[this.currentEditor].setValue(e,t),this.refreshValue(),this.onChange())},destroy:function(){T(this.editors,(function(e,t){t&&t.destroy()})),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this._super()},showValidationErrors:function(e){T(this.editors,(function(t,i){i&&i.showValidationErrors(e)}))}}),ae=q.extend({getNumColumns:function(){return 4},build:function(){this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired()),this.container.appendChild(this.title),this.options.enum_titles=this.options.enum_titles||[],this.enum=this.schema.enum,this.selected=0,this.select_options=[],this.html_values=[];for(var e=this,t=0;t<this.enum.length;t++)this.select_options[t]=this.options.enum_titles[t]||"Value "+(t+1),this.html_values[t]=this.getHTML(this.enum[t]);this.switcher=this.theme.getSwitcher(this.select_options),this.container.appendChild(this.switcher),this.display_area=this.theme.getIndentedPanel(),this.container.appendChild(this.display_area),this.options.hide_display&&(this.display_area.style.display="none"),this.switcher.addEventListener("change",(function(){e.selected=e.select_options.indexOf(this.value),e.value=e.enum[e.selected],e.refreshValue(),e.onChange(!0)})),this.value=this.enum[0],this.refreshValue(),1===this.enum.length&&(this.switcher.style.display="none")},refreshValue:function(){var e=this;e.selected=-1;var t=JSON.stringify(this.value);T(this.enum,(function(i,n){if(t===JSON.stringify(n))return e.selected=i,!1})),e.selected<0?e.setValue(e.enum[0]):(this.switcher.value=this.select_options[this.selected],this.display_area.innerHTML=this.html_values[this.selected])},enable:function(){this.always_disabled||(this.switcher.disabled=!1,this._super())},disable:function(e){e&&(this.always_disabled=!0),this.switcher.disabled=!0,this._super()},getHTML:function(e){var t=this;if(null===e)return"<em>null</em>";if("object"===typeof e){var i="";return T(e,(function(n,s){var a=t.getHTML(s);Array.isArray(e)||(a="<div><em>"+n+"</em>: "+a+"</div>"),i+="<li>"+a+"</li>"})),i=Array.isArray(e)?"<ol>"+i+"</ol>":"<ul style='margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;'>"+i+"</ul>"}return"boolean"===typeof e?e?"true":"false":"string"===typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},setValue:function(e){this.value!==e&&(this.value=e,this.refreshValue(),this.onChange())},destroy:function(){this.display_area&&this.display_area.parentNode&&this.display_area.parentNode.removeChild(this.display_area),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),this._super()}}),re=q.extend({register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},setValue:function(e,t,i){if((!this.template||i)&&(null===e||"undefined"===typeof e?e="":"object"===typeof e?e=JSON.stringify(e):"string"!==typeof e&&(e=""+e),e!==this.serialized)){var n=this.sanitize(e);if(this.input.value!==n){this.input.value=n;var s=i||this.getValue()!==e;this.refreshValue(),t?this.is_dirty=!1:"change"===this.jsoneditor.options.show_errors&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),this.onChange(s)}}},getNumColumns:function(){return 2},enable:function(){this._super()},disable:function(){this._super()},refreshValue:function(){this.value=this.input.value,"string"!==typeof this.value&&(this.value=""),this.serialized=this.value},destroy:function(){this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this._super()},sanitize:function(e){return e},onWatchedFieldChange:function(){var e;this.template&&(e=this.getWatchedFieldValues(),this.setValue(this.template(e),!1,!0)),this._super()},build:function(){if(this.format=this.schema.format,!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.input_type="hidden",this.input=this.theme.getFormInputField(this.input_type),this.format&&this.input.setAttribute("data-schemaformat",this.format),this.container.appendChild(this.input),this.schema.template){var e=this.expandCallbacks("template",{template:this.schema.template});"function"===typeof e.template?this.template=e.template:this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()}else this.refreshValue()}}),oe=X.extend({build:function(){this.options.compact=!1,this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.description=this.theme.getDescription(this.schema.description||""),this.control=this.theme.getFormControl(this.label,this.description,null),this.container.appendChild(this.control)},getTitle:function(){return this.schema.title},getNumColumns:function(){return 12}}),le=U.extend({build:function(){if(this._super(),"undefined"!==typeof this.schema.minimum){var e=this.schema.minimum;"undefined"!==typeof this.schema.exclusiveMinimum&&(e+=1),this.input.setAttribute("min",e)}if("undefined"!==typeof this.schema.maximum){var t=this.schema.maximum;"undefined"!==typeof this.schema.exclusiveMaximum&&(t-=1),this.input.setAttribute("max",t)}if("undefined"!==typeof this.schema.step){var i=this.schema.step||1;this.input.setAttribute("step",i)}this.setInputAttributes(["maxlength","pattern","readonly","min","max","step"])},sanitize:function(e){return(e+"").replace(/[^0-9\.\-eE]/g,"")},getNumColumns:function(){return 2},getValue:function(){if(this.dependenciesFulfilled)return""===this.value?void 0:1*this.value}}),ce=le.extend({sanitize:function(e){return(e+="").replace(/[^0-9\-]/g,"")},getNumColumns:function(){return 2}}),he=U.extend({preBuild:function(){if(this._super(),this.schema.options||(this.schema.options={}),!this.schema.options.cleave)switch(this.format){case"ipv6":this.schema.options.cleave={delimiters:[":"],blocks:[4,4,4,4,4,4,4,4],uppercase:!0};break;case"ipv4":this.schema.options.cleave={delimiters:["."],blocks:[3,3,3,3],numericOnly:!0}}this.options=S(this.options,this.schema.options||{})}}),de=U.extend({setValue:function(e,t,i){var n=this._super(e,t,i);void 0!==n&&n.changed&&this.jodit_instance&&this.jodit_instance.setEditorValue(n.value)},build:function(){this.options.format="textarea",this._super(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)},afterInputReady:function(){var e,t=this;window.Jodit?(e=this.expandCallbacks("jodit",S({},{height:300},this.defaults.options.jodit||{},this.options.jodit||{})),this.jodit_instance=new window.Jodit(this.input,e),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&this.jodit_instance.setReadOnly(!0),this.jodit_instance.events.on("change",(function(){t.value=t.jodit_instance.getEditorValue(),t.is_dirty=!0,t.onChange(!0)})),this.theme.afterInputReady(t.input)):this._super()},getNumColumns:function(){return 6},enable:function(){!this.always_disabled&&this.jodit_instance&&this.jodit_instance.setReadOnly(!1),this._super()},disable:function(e){this.jodit_instance&&this.jodit_instance.setReadOnly(!0),this._super(e)},destroy:function(){this.jodit_instance&&(this.jodit_instance.destruct(),this.jodit_instance=null),this._super()}}),ue=q.extend({register:function(){if(this.editors){for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister();this.editors[this.type]&&this.editors[this.type].register()}this._super()},unregister:function(){if(this._super(),this.editors)for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister()},getNumColumns:function(){return this.editors[this.type]?Math.max(this.editors[this.type].getNumColumns(),4):4},enable:function(){if(!this.always_disabled){if(this.editors)for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].enable();this.switcher.disabled=!1,this._super()}},disable:function(e){if(e&&(this.always_disabled=!0),this.editors)for(var t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].disable(e);this.switcher.disabled=!0,this._super()},switchEditor:function(e){var t=this;this.editors[e]||this.buildChildEditor(e);var i=t.getValue();t.type=e,t.register(),T(t.editors,(function(e,n){n&&(t.type===e?(t.keep_values&&n.setValue(i,!0),n.container.style.display=""):n.container.style.display="none")})),t.refreshValue(),t.refreshHeaderText()},buildChildEditor:function(e){var t,i=this,n=this.types[e],s=i.theme.getChildEditorHolder();i.editor_holder.appendChild(s),"string"===typeof n?(t=S({},i.schema)).type=n:(t=S({},i.schema,n),t=i.jsoneditor.expandRefs(t),n&&n.required&&Array.isArray(n.required)&&i.schema.required&&Array.isArray(i.schema.required)&&(t.required=i.schema.required.concat(n.required)));var a=i.jsoneditor.getEditorClass(t);i.editors[e]=i.jsoneditor.createEditor(a,{jsoneditor:i.jsoneditor,schema:t,container:s,path:i.path,parent:i,required:!0}),i.editors[e].preBuild(),i.editors[e].build(),i.editors[e].postBuild(),i.editors[e].header&&(i.editors[e].header.style.display="none"),i.editors[e].option=i.switcher_options[e],s.addEventListener("change_header_text",(function(){i.refreshHeaderText()})),e!==i.type&&(s.style.display="none")},preBuild:function(){if(this.types=[],this.type=0,this.editors=[],this.validators=[],this.keep_values=!0,"undefined"!==typeof this.jsoneditor.options.keep_oneof_values&&(this.keep_values=this.jsoneditor.options.keep_oneof_values),"undefined"!==typeof this.options.keep_oneof_values&&(this.keep_values=this.options.keep_oneof_values),this.schema.oneOf)this.oneOf=!0,this.types=this.schema.oneOf,delete this.schema.oneOf;else if(this.schema.anyOf)this.anyOf=!0,this.types=this.schema.anyOf,delete this.schema.anyOf;else{if(this.schema.type&&"any"!==this.schema.type)Array.isArray(this.schema.type)?this.types=this.schema.type:this.types=[this.schema.type];else if(this.types=["string","number","integer","boolean","object","array","null"],this.schema.disallow){var e=this.schema.disallow;"object"===typeof e&&Array.isArray(e)||(e=[e]);var t=[];T(this.types,(function(i,n){-1===e.indexOf(n)&&t.push(n)})),this.types=t}delete this.schema.type}this.display_text=this.getDisplayText(this.types)},build:function(){var e=this,t=this.container;this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired()),this.container.appendChild(this.header),this.switcher=this.theme.getSwitcher(this.display_text),t.appendChild(this.switcher),this.switcher.addEventListener("change",(function(t){t.preventDefault(),t.stopPropagation(),e.switchEditor(e.display_text.indexOf(this.value)),e.onChange(!0)})),this.editor_holder=document.createElement("div"),t.appendChild(this.editor_holder);var i={};e.jsoneditor.options.custom_validators&&(i.custom_validators=e.jsoneditor.options.custom_validators),this.switcher_options=this.theme.getSwitcherOptions(this.switcher),T(this.types,(function(t,n){var s;e.editors[t]=!1,"string"===typeof n?(s=S({},e.schema)).type=n:(s=S({},e.schema,n),n.required&&Array.isArray(n.required)&&e.schema.required&&Array.isArray(e.schema.required)&&(s.required=e.schema.required.concat(n.required))),e.validators[t]=new R(e.jsoneditor,s,i,e.defaults)})),this.switchEditor(0)},onChildEditorChange:function(e){this.editors[this.type]&&(this.refreshValue(),this.refreshHeaderText()),this._super()},refreshHeaderText:function(){var e=this.getDisplayText(this.types);T(this.switcher_options,(function(t,i){i.textContent=e[t]}))},refreshValue:function(){this.value=this.editors[this.type].getValue()},setValue:function(e,t){var i=this,n=this.type,s={match:0,extra:0,i:this.type},a={match:0,i:null};T(this.validators,(function(t,n){var r=null;"undefined"!==typeof i.anyOf&&i.anyOf&&(r=n.fitTest(e),(s.match<r.match||s.match===r.match&&s.extra>r.extra)&&((s=r).i=t)),n.validate(e).length||null!==a.i||(a.i=t,null!==r&&(a.match=r.match))}));var r=a.i;"undefined"!==typeof i.anyOf&&i.anyOf&&a.match<s.match&&(r=s.i),null===r&&(r=this.type),this.type=r,this.switcher.value=this.display_text[r];var o=this.type!==n;o&&this.switchEditor(this.type),this.editors[this.type].setValue(e,t),this.refreshValue(),i.onChange(o)},destroy:function(){T(this.editors,(function(e,t){t&&t.destroy()})),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),this._super()},showValidationErrors:function(e){var t=this;if(this.oneOf||this.anyOf){var i=this.oneOf?"oneOf":"anyOf";T(this.editors,(function(n,s){if(s){var a=t.path+"."+i+"["+n+"]",r=[];T(e,(function(e,i){if(i.path===a.substr(0,i.path.length)){var n=S({},i);n.path=t.path+n.path.substr(a.length),r.push(n)}})),s.showValidationErrors(r)}}))}else T(this.editors,(function(t,i){i&&i.showValidationErrors(e)}))}}),pe=q.extend({getValue:function(){if(this.dependenciesFulfilled)return null},setValue:function(){this.onChange()},getNumColumns:function(){return 2}}),me=q.extend({getDefault:function(){return S({},this.schema.default||{})},getChildEditors:function(){return this.editors},register:function(){if(this._super(),this.editors)for(var e in this.editors)this.editors.hasOwnProperty(e)&&this.editors[e].register()},unregister:function(){if(this._super(),this.editors)for(var e in this.editors)this.editors.hasOwnProperty(e)&&this.editors[e].unregister()},getNumColumns:function(){return Math.max(Math.min(12,this.maxwidth),3)},enable:function(){if(!this.always_disabled&&(this.editjson_control&&(this.editjson_control.disabled=!1),this.addproperty_button&&(this.addproperty_button.disabled=!1),this._super(),this.editors))for(var e in this.editors)this.editors.hasOwnProperty(e)&&(this.editors[e].isActive()&&this.editors[e].enable(),this.editors[e].optInCheckbox.disabled=!1)},disable:function(e){if(e&&(this.always_disabled=!0),this.editjson_control&&(this.editjson_control.disabled=!0),this.addproperty_button&&(this.addproperty_button.disabled=!0),this.hideEditJSON(),this._super(),this.editors)for(var t in this.editors)this.editors.hasOwnProperty(t)&&(this.editors[t].isActive()&&this.editors[t].disable(e),this.editors[t].optInCheckbox.disabled=!0)},layoutEditors:function(){var e,t,i=this;if(this.row_container){var n;this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort((function(e,t){var n=i.editors[e].schema.propertyOrder,s=i.editors[t].schema.propertyOrder;return"number"!==typeof n&&(n=1e3),"number"!==typeof s&&(s=1e3),n-s}));var s,a="categories"===this.format,r=[],o=null,l=null;if("grid-strict"===this.format){var c=0;if(s=[],T(this.property_order,(function(e,t){var n=i.editors[t];if(!n.property_removed){var a=n.options.hidden?0:n.options.grid_columns||n.getNumColumns(),o=n.options.hidden?0:n.options.grid_offset||0,l=!n.options.hidden&&(n.options.grid_break||!1),h={key:t,width:a,offset:o,height:n.options.hidden?0:n.container.offsetHeight};s.push(h),r[c]=s,l&&(c++,s=[])}})),this.layout===JSON.stringify(r))return!1;for(this.layout=JSON.stringify(r),n=document.createElement("div"),e=0;e<r.length;e++)for(s=this.theme.getGridRow(),n.appendChild(s),t=0;t<r[e].length;t++)o=r[e][t].key,(l=this.editors[o]).options.hidden?l.container.style.display="none":this.theme.setGridColumnSize(l.container,r[e][t].width,r[e][t].offset),s.appendChild(l.container)}else if("grid"===this.format){for(T(this.property_order,(function(e,t){var n=i.editors[t];if(!n.property_removed){for(var s=!1,a=n.options.hidden?0:n.options.grid_columns||n.getNumColumns(),o=n.options.hidden?0:n.container.offsetHeight,l=0;l<r.length;l++)r[l].width+a<=12&&(!o||.5*r[l].minh<o&&2*r[l].maxh>o)&&(s=l);!1===s&&(r.push({width:0,minh:999999,maxh:0,editors:[]}),s=r.length-1),r[s].editors.push({key:t,width:a,height:o}),r[s].width+=a,r[s].minh=Math.min(r[s].minh,o),r[s].maxh=Math.max(r[s].maxh,o)}})),e=0;e<r.length;e++)if(r[e].width<12){var h=!1,d=0;for(t=0;t<r[e].editors.length;t++)(!1===h||r[e].editors[t].width>r[e].editors[h].width)&&(h=t),r[e].editors[t].width*=12/r[e].width,r[e].editors[t].width=Math.floor(r[e].editors[t].width),d+=r[e].editors[t].width;d<12&&(r[e].editors[h].width+=12-d),r[e].width=12}if(this.layout===JSON.stringify(r))return!1;for(this.layout=JSON.stringify(r),n=document.createElement("div"),e=0;e<r.length;e++)for(s=this.theme.getGridRow(),n.appendChild(s),t=0;t<r[e].editors.length;t++)o=r[e].editors[t].key,(l=this.editors[o]).options.hidden?l.container.style.display="none":this.theme.setGridColumnSize(l.container,r[e].editors[t].width),s.appendChild(l.container)}else{if(n=document.createElement("div"),a){var u=document.createElement("div"),p=this.theme.getTopTabHolder(this.schema.title),m=this.theme.getTopTabContentHolder(p);for(T(this.property_order,(function(e,t){var n=i.editors[t];if(!n.property_removed){var s=i.theme.getTabContent(),a=n.schema&&("object"===n.schema.type||"array"===n.schema.type);s.isObjOrArray=a;var r=i.theme.getGridRow();n.tab||("undefined"===typeof i.basicPane?i.addRow(n,p,s):i.addRow(n,p,i.basicPane)),s.id=i.getValidId(n.tab_text.textContent),a?(s.appendChild(r),m.appendChild(s),i.theme.addTopTab(p,n.tab)):(u.appendChild(r),m.childElementCount>0?m.firstChild.isObjOrArray&&(s.appendChild(u),m.insertBefore(s,m.firstChild),i.theme.insertBasicTopTab(n.tab,p),n.basicPane=s):(s.appendChild(u),m.appendChild(s),i.theme.addTopTab(p,n.tab),n.basicPane=s)),n.options.hidden?n.container.style.display="none":i.theme.setGridColumnSize(n.container,12),r.appendChild(n.container),n.rowPane=s}}));this.tabPanesContainer.firstChild;)this.tabPanesContainer.removeChild(this.tabPanesContainer.firstChild);var f=this.tabs_holder.parentNode;f.removeChild(f.firstChild),f.appendChild(p),this.tabPanesContainer=m,this.tabs_holder=p;var g=this.theme.getFirstTab(this.tabs_holder);return void(g&&L(g,"click"))}T(this.property_order,(function(e,t){var a=i.editors[t];a.property_removed||(s=i.theme.getGridRow(),n.appendChild(s),a.options.hidden?a.container.style.display="none":i.theme.setGridColumnSize(a.container,12),s.appendChild(a.container))}))}for(;this.row_container.firstChild;)this.row_container.removeChild(this.row_container.firstChild);this.row_container.appendChild(n)}},getPropertySchema:function(e){var t=this.schema.properties[e]||{};t=S({},t);var i=!!this.schema.properties[e];if(this.schema.patternProperties)for(var n in this.schema.patternProperties){if(this.schema.patternProperties.hasOwnProperty(n))new RegExp(n).test(e)&&(t.allOf=t.allOf||[],t.allOf.push(this.schema.patternProperties[n]),i=!0)}return!i&&this.schema.additionalProperties&&"object"===typeof this.schema.additionalProperties&&(t=S({},this.schema.additionalProperties)),t},preBuild:function(){this._super(),this.editors={},this.cached_editors={};var e=this;if(this.format=this.options.layout||this.options.object_layout||this.schema.format||this.jsoneditor.options.object_layout||"normal",this.schema.properties=this.schema.properties||{},this.minwidth=0,this.maxwidth=0,this.options.table_row)T(this.schema.properties,(function(t,i){var n=e.jsoneditor.getEditorClass(i);e.editors[t]=e.jsoneditor.createEditor(n,{jsoneditor:e.jsoneditor,schema:i,path:e.path+"."+t,parent:e,compact:!0,required:!0}),e.editors[t].preBuild();var s=e.editors[t].options.hidden?0:e.editors[t].options.grid_columns||e.editors[t].getNumColumns();e.minwidth+=s,e.maxwidth+=s})),this.no_link_holder=!0;else{if(this.options.table)throw new Error("Not supported yet");this.schema.defaultProperties||(this.jsoneditor.options.display_required_only||this.options.display_required_only?(this.schema.defaultProperties=[],T(this.schema.properties,(function(t,i){e.isRequiredObject({key:t,schema:i})&&e.schema.defaultProperties.push(t)}))):e.schema.defaultProperties=Object.keys(e.schema.properties)),e.maxwidth+=1,T(this.schema.defaultProperties,(function(t,i){e.addObjectProperty(i,!0),e.editors[i]&&(e.minwidth=Math.max(e.minwidth,e.editors[i].options.grid_columns||e.editors[i].getNumColumns()),e.maxwidth+=e.editors[i].options.grid_columns||e.editors[i].getNumColumns())}))}this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort((function(t,i){var n=e.editors[t].schema.propertyOrder,s=e.editors[i].schema.propertyOrder;return"number"!==typeof n&&(n=1e3),"number"!==typeof s&&(s=1e3),n-s}))},addTab:function(e){var t=this,i=t.rows[e].schema&&("object"===t.rows[e].schema.type||"array"===t.rows[e].schema.type);t.tabs_holder&&(t.rows[e].tab_text=document.createElement("span"),t.rows[e].tab_text.textContent=i?t.rows[e].getHeaderText():"undefined"===typeof t.schema.basicCategoryTitle?"Basic":t.schema.basicCategoryTitle,t.rows[e].tab=t.theme.getTopTab(t.rows[e].tab_text,this.getValidId(t.rows[e].tab_text.textContent)),t.rows[e].tab.addEventListener("click",(function(i){t.active_tab=t.rows[e].tab,t.refreshTabs(),i.preventDefault(),i.stopPropagation()})))},addRow:function(e,t,i){var n=this.rows.length,s="object"===e.schema.type||"array"===e.schema.type;this.rows[n]=e,this.rows[n].rowPane=i,s?(this.addTab(n),this.theme.addTopTab(t,this.rows[n].tab)):"undefined"===typeof this.basicTab?(this.addTab(n),this.basicTab=n,this.basicPane=i,this.theme.addTopTab(t,this.rows[n].tab)):(this.rows[n].tab=this.rows[this.basicTab].tab,this.rows[n].tab_text=this.rows[this.basicTab].tab_text,this.rows[n].rowPane=this.rows[this.basicTab].rowPane)},refreshTabs:function(e){var t=this,i="undefined"!==typeof t.basicTab,n=!1;T(this.rows,(function(s,a){a.tab&&a.rowPane&&a.rowPane.parentNode&&(i&&a.tab===t.rows[t.basicTab].tab&&n||(e?a.tab_text.textContent=a.getHeaderText():(i&&a.tab===t.rows[t.basicTab].tab&&(n=!0),a.tab===t.active_tab?t.theme.markTabActive(a):t.theme.markTabInactive(a))))}))},build:function(){var e=this,t="categories"===this.format;if(this.rows=[],this.active_tab=null,this.options.table_row)this.editor_holder=this.container,T(this.editors,(function(t,i){var n=e.theme.getTableCell();e.editor_holder.appendChild(n),i.setContainer(n),i.build(),i.postBuild(),i.setOptInCheckbox(i.header),e.editors[t].options.hidden&&(n.style.display="none"),e.editors[t].options.input_width&&(n.style.width=e.editors[t].options.input_width)}));else{if(this.options.table)throw new Error("Not supported yet");this.header="",this.options.compact||(this.header=document.createElement("label"),this.header.textContent=this.getTitle()),this.title=this.theme.getHeader(this.header),this.controls=this.theme.getButtonHolder(),this.controls.style.margin="0 0 0 10px",this.container.appendChild(this.title),this.title.appendChild(this.controls),this.container.style.position="relative",this.editjson_holder=this.theme.getModal(),this.editjson_textarea=this.theme.getTextareaInput(),this.editjson_textarea.style.height="170px",this.editjson_textarea.style.width="300px",this.editjson_textarea.style.display="block",this.editjson_save=this.getButton("Save","save","Save"),this.editjson_save.classList.add("json-editor-btntype-save"),this.editjson_save.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.saveJSON()})),this.editjson_copy=this.getButton("Copy","copy","Copy"),this.editjson_copy.classList.add("json-editor-btntype-copy"),this.editjson_copy.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.copyJSON()})),this.editjson_cancel=this.getButton("Cancel","cancel","Cancel"),this.editjson_cancel.classList.add("json-editor-btntype-cancel"),this.editjson_cancel.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.hideEditJSON()})),this.editjson_holder.appendChild(this.editjson_textarea),this.editjson_holder.appendChild(this.editjson_save),this.editjson_holder.appendChild(this.editjson_copy),this.editjson_holder.appendChild(this.editjson_cancel),this.addproperty_holder=this.theme.getModal(),this.addproperty_list=document.createElement("div"),this.addproperty_list.style.width="295px",this.addproperty_list.style.maxHeight="160px",this.addproperty_list.style.padding="5px 0",this.addproperty_list.style.overflowY="auto",this.addproperty_list.style.overflowX="hidden",this.addproperty_list.style.paddingLeft="5px",this.addproperty_list.setAttribute("class","property-selector"),this.addproperty_add=this.getButton("add","add","add"),this.addproperty_add.classList.add("json-editor-btntype-add"),this.addproperty_input=this.theme.getFormInputField("text"),this.addproperty_input.setAttribute("placeholder","Property name..."),this.addproperty_input.style.width="220px",this.addproperty_input.style.marginBottom="0",this.addproperty_input.style.display="inline-block",this.addproperty_add.addEventListener("click",(function(t){if(t.preventDefault(),t.stopPropagation(),e.addproperty_input.value){if(e.editors[e.addproperty_input.value])return void window.alert("there is already a property with that name");e.addObjectProperty(e.addproperty_input.value),e.editors[e.addproperty_input.value]&&e.editors[e.addproperty_input.value].disable(),e.onChange(!0)}})),this.addproperty_input.addEventListener("input",(function(e){e.target.previousSibling.childNodes.forEach((function(t){t.innerText.indexOf(e.target.value)>=0?t.style.display="":t.style.display="none"}))})),this.addproperty_holder.appendChild(this.addproperty_list),this.addproperty_holder.appendChild(this.addproperty_input),this.addproperty_holder.appendChild(this.addproperty_add);var i=document.createElement("div");i.style.clear="both",this.addproperty_holder.appendChild(i),document.addEventListener("click",this.onOutsideModalClick),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.editor_holder=this.theme.getIndentedPanel(),this.container.appendChild(this.editor_holder),this.row_container=this.theme.getGridContainer(),t?(this.tabs_holder=this.theme.getTopTabHolder(this.getValidId(this.schema.title)),this.tabPanesContainer=this.theme.getTopTabContentHolder(this.tabs_holder),this.editor_holder.appendChild(this.tabs_holder)):(this.tabs_holder=this.theme.getTabHolder(this.getValidId(this.schema.title)),this.tabPanesContainer=this.theme.getTabContentHolder(this.tabs_holder),this.editor_holder.appendChild(this.row_container)),T(this.editors,(function(i,n){var s=e.theme.getTabContent(),a=e.theme.getGridColumn(),r=!(!n.schema||"object"!==n.schema.type&&"array"!==n.schema.type);if(s.isObjOrArray=r,t){if(r){var o=e.theme.getGridContainer();o.appendChild(a),s.appendChild(o),e.tabPanesContainer.appendChild(s),e.row_container=o}else"undefined"===typeof e.row_container_basic&&(e.row_container_basic=e.theme.getGridContainer(),s.appendChild(e.row_container_basic),0===e.tabPanesContainer.childElementCount?e.tabPanesContainer.appendChild(s):e.tabPanesContainer.insertBefore(s,e.tabPanesContainer.childNodes[1])),e.row_container_basic.appendChild(a);e.addRow(n,e.tabs_holder,s),s.id=e.getValidId(n.schema.title)}else e.row_container.appendChild(a);n.setContainer(a),n.build(),n.postBuild(),n.setOptInCheckbox(n.header)})),this.rows[0]&&L(this.rows[0].tab,"click"),this.collapsed=!1,this.collapse_control=this.getButton("","collapse",this.translate("button_collapse")),this.collapse_control.style.margin="0 10px 0 0",this.collapse_control.classList.add("json-editor-btntype-toggle"),this.title.insertBefore(this.collapse_control,this.title.childNodes[0]),this.collapse_control.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.collapsed?(e.editor_holder.style.display="",e.collapsed=!1,e.setButtonText(e.collapse_control,"","collapse",e.translate("button_collapse"))):(e.editor_holder.style.display="none",e.collapsed=!0,e.setButtonText(e.collapse_control,"","expand",e.translate("button_expand")))})),this.options.collapsed&&L(this.collapse_control,"click"),this.schema.options&&"undefined"!==typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.collapse_control.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.collapse_control.style.display="none"),this.editjson_control=this.getButton("JSON","edit","Edit JSON"),this.editjson_control.classList.add("json-editor-btntype-editjson"),this.editjson_control.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.toggleEditJSON()})),this.controls.appendChild(this.editjson_control),this.controls.insertBefore(this.editjson_holder,this.controls.childNodes[1]),this.schema.options&&"undefined"!==typeof this.schema.options.disable_edit_json?this.schema.options.disable_edit_json&&(this.editjson_control.style.display="none"):this.jsoneditor.options.disable_edit_json&&(this.editjson_control.style.display="none"),this.addproperty_button=this.getButton("Properties","edit_properties",e.translate("button_object_properties")),this.addproperty_button.classList.add("json-editor-btntype-properties"),this.addproperty_button.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.toggleAddProperty()})),this.controls.appendChild(this.addproperty_button),this.controls.insertBefore(this.addproperty_holder,this.controls.childNodes[1]),this.refreshAddProperties(),this.deactivateNonRequiredProperties()}this.options.table_row?(this.editor_holder=this.container,T(this.property_order,(function(t,i){e.editor_holder.appendChild(e.editors[i].container)}))):(this.layoutEditors(),this.layoutEditors())},deactivateNonRequiredProperties:function(){var e=this;(this.jsoneditor.options.show_opt_in||this.options.show_opt_in)&&T(this.editors,(function(t,i){e.isRequiredObject(i)||e.editors[t].deactivate()}))},showEditJSON:function(){this.editjson_holder&&(this.hideAddProperty(),this.editjson_holder.style.left=this.editjson_control.offsetLeft+"px",this.editjson_holder.style.top=this.editjson_control.offsetTop+this.editjson_control.offsetHeight+"px",this.editjson_textarea.value=JSON.stringify(this.getValue(),null,2),this.disable(),this.editjson_holder.style.display="",this.editjson_control.disabled=!1,this.editing_json=!0)},hideEditJSON:function(){this.editjson_holder&&this.editing_json&&(this.editjson_holder.style.display="none",this.enable(),this.editing_json=!1)},copyJSON:function(){if(this.editjson_holder){var e=document.createElement("textarea");e.value=this.editjson_textarea.value,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}},saveJSON:function(){if(this.editjson_holder)try{var e=JSON.parse(this.editjson_textarea.value);this.setValue(e),this.hideEditJSON(),this.onChange(!0)}catch(t){throw window.alert("invalid JSON"),t}},toggleEditJSON:function(){this.editing_json?this.hideEditJSON():this.showEditJSON()},insertPropertyControlUsingPropertyOrder:function(e,t,i){var n;this.schema.properties[e]&&(n=this.schema.properties[e].propertyOrder),"number"!==typeof n&&(n=1e3),t.propertyOrder=n;for(var s=0;s<i.childNodes.length;s++){var a=i.childNodes[s];if(t.propertyOrder<a.propertyOrder){this.addproperty_list.insertBefore(t,a),t=null;break}}t&&this.addproperty_list.appendChild(t)},addPropertyCheckbox:function(e){var t,i,n,s,a=this;return(t=a.theme.getCheckbox()).style.width="auto",n=this.schema.properties[e]&&this.schema.properties[e].title?this.schema.properties[e].title:e,i=a.theme.getCheckboxLabel(n),(s=a.theme.getFormControl(i,t)).style.paddingBottom=s.style.marginBottom=s.style.paddingTop=s.style.marginTop=0,s.style.height="auto",this.insertPropertyControlUsingPropertyOrder(e,s,this.addproperty_list),t.checked=e in this.editors,t.addEventListener("change",(function(){t.checked?a.addObjectProperty(e):a.removeObjectProperty(e),a.onChange(!0)})),a.addproperty_checkboxes[e]=t,t},showAddProperty:function(){this.addproperty_holder&&(this.hideEditJSON(),this.addproperty_holder.style.left=this.addproperty_button.offsetLeft+"px",this.addproperty_holder.style.top=this.addproperty_button.offsetTop+this.addproperty_button.offsetHeight+"px",this.disable(),this.adding_property=!0,this.addproperty_button.disabled=!1,this.addproperty_holder.style.display="",this.refreshAddProperties())},hideAddProperty:function(){this.addproperty_holder&&this.adding_property&&(this.addproperty_holder.style.display="none",this.enable(),this.adding_property=!1)},toggleAddProperty:function(){this.adding_property?this.hideAddProperty():this.showAddProperty()},removeObjectProperty:function(e){this.editors[e]&&(this.editors[e].unregister(),delete this.editors[e],this.refreshValue(),this.layoutEditors())},addObjectProperty:function(e,t){if(!this.editors[e]){if(this.cached_editors[e]){if(this.editors[e]=this.cached_editors[e],t)return;this.editors[e].register()}else{if(!this.canHaveAdditionalProperties()&&(!this.schema.properties||!this.schema.properties[e]))return;var i=this.getPropertySchema(e);"number"!==typeof i.propertyOrder&&(i.propertyOrder=Object.keys(this.editors).length+1e3);var n=this.jsoneditor.getEditorClass(i);if(this.editors[e]=this.jsoneditor.createEditor(n,{jsoneditor:this.jsoneditor,schema:i,path:this.path+"."+e,parent:this}),this.editors[e].preBuild(),!t){var s=this.theme.getChildEditorHolder();this.editor_holder.appendChild(s),this.editors[e].setContainer(s),this.editors[e].build(),this.editors[e].postBuild(),this.editors[e].setOptInCheckbox(n.header),this.editors[e].activate()}this.cached_editors[e]=this.editors[e]}t||(this.refreshValue(),this.layoutEditors())}},onOutsideModalClick:function(e){this.addproperty_holder&&!this.addproperty_holder.contains(e.target)&&this.adding_property&&(e.preventDefault(),e.stopPropagation(),this.toggleAddProperty())},onChildEditorChange:function(e){this.refreshValue(),this._super(e)},canHaveAdditionalProperties:function(){return"boolean"===typeof this.schema.additionalProperties?this.schema.additionalProperties:!this.jsoneditor.options.no_additional_properties},destroy:function(){T(this.cached_editors,(function(e,t){t.destroy()})),this.editor_holder&&(this.editor_holder.innerHTML=""),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.error_holder&&this.error_holder.parentNode&&this.error_holder.parentNode.removeChild(this.error_holder),this.editors=null,this.cached_editors=null,this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.editor_holder=null,document.removeEventListener("click",this.onOutsideModalClick),this._super()},getValue:function(){if(this.dependenciesFulfilled){var e=this._super();if(this.jsoneditor.options.remove_empty_properties||this.options.remove_empty_properties)for(var t in e)e.hasOwnProperty(t)&&("undefined"===typeof e[t]||""===e[t]||e[t]===Object(e[t])&&0===Object.keys(e[t]).length&&e[t].constructor===Object)&&delete e[t];return e}},refreshValue:function(){for(var e in this.value={},this.editors)this.editors.hasOwnProperty(e)&&this.editors[e].isActive()&&(this.value[e]=this.editors[e].getValue());this.adding_property&&this.refreshAddProperties()},refreshAddProperties:function(){if(this.options.disable_properties||!1!==this.options.disable_properties&&this.jsoneditor.options.disable_properties)this.addproperty_button.style.display="none";else{var e,t,i=0,n=!1;for(t in this.editors)this.editors.hasOwnProperty(t)&&i++;for(t in e=this.canHaveAdditionalProperties()&&!("undefined"!==typeof this.schema.maxProperties&&i>=this.schema.maxProperties),this.addproperty_checkboxes&&(this.addproperty_list.innerHTML=""),this.addproperty_checkboxes={},this.cached_editors)this.cached_editors.hasOwnProperty(t)&&(this.addPropertyCheckbox(t),this.isRequiredObject(this.cached_editors[t])&&t in this.editors&&(this.addproperty_checkboxes[t].disabled=!0),"undefined"!==typeof this.schema.minProperties&&i<=this.schema.minProperties?(this.addproperty_checkboxes[t].disabled=this.addproperty_checkboxes[t].checked,this.addproperty_checkboxes[t].checked||(n=!0)):t in this.editors?n=!0:e||this.schema.properties.hasOwnProperty(t)?(this.addproperty_checkboxes[t].disabled=!1,n=!0):this.addproperty_checkboxes[t].disabled=!0);for(t in this.canHaveAdditionalProperties()&&(n=!0),this.schema.properties)this.schema.properties.hasOwnProperty(t)&&(this.cached_editors[t]||(n=!0,this.addPropertyCheckbox(t)));n?this.canHaveAdditionalProperties()?this.addproperty_add.disabled=!e:(this.addproperty_add.style.display="none",this.addproperty_input.style.display="none"):(this.hideAddProperty(),this.addproperty_button.style.display="none")}},isRequiredObject:function(e){if(e)return"boolean"===typeof e.schema.required?e.schema.required:Array.isArray(this.schema.required)?this.schema.required.indexOf(e.key)>-1:!!this.jsoneditor.options.required_by_default},setValue:function(e,t){var i=this;("object"!==typeof(e=e||{})||Array.isArray(e))&&(e={}),T(this.cached_editors,(function(n,s){"undefined"!==typeof e[n]?(i.addObjectProperty(n),s.setValue(e[n],t)):t||i.isRequiredObject(s)?s.setValue(s.getDefault(),t):i.removeObjectProperty(n)})),T(e,(function(e,n){i.cached_editors[e]||(i.addObjectProperty(e),i.editors[e]&&i.editors[e].setValue(n,t))})),this.refreshValue(),this.onChange()},showValidationErrors:function(e){var t=this,i=[],n=[];T(e,(function(e,s){s.path===t.path?i.push(s):n.push(s)})),this.error_holder&&(i.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",T(i,(function(e,i){i.errorcount&&i.errorcount>1&&(i.message+=" ("+i.errorcount+" errors)"),t.error_holder.appendChild(t.theme.getErrorMessage(i.message))}))):this.error_holder.style.display="none"),this.options.table_row&&(i.length?this.theme.addTableRowError(this.container):this.theme.removeTableRowError(this.container)),T(this.editors,(function(e,t){t.showValidationErrors(n)}))}}),fe=te.extend({preBuild:function(){this.schema.required=!0,this._super()},build:function(){var e=this;this.label="",this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.options.infoText)),this.options.compact&&this.container.classList.add("compact"),this.radioContainer=document.createElement("div"),this.radioGroup=[];for(var t=function(t){e.setValue(this.value),e.onChange(!0)},i=0;i<this.enum_values.length;i++){this.input=this.theme.getFormRadio({name:this.formname,id:this.formname+"["+i+"]",value:this.enum_values[i]}),this.setInputAttributes(["id","value","name"]),this.input.addEventListener("change",t,!1),this.radioGroup.push(this.input);var n=this.theme.getFormRadioLabel(this.enum_display[i]);n.htmlFor=this.input.id;var s=this.theme.getFormRadioControl(n,this.input,!("horizontal"!==this.options.layout&&!this.options.compact));this.radioContainer.appendChild(s)}if(this.schema.readOnly||this.schema.readonly){this.always_disabled=!0;for(var a=0;a<this.radioGroup.length;a++)this.radioGroup[a].disabled=!0;this.radioContainer.classList.add("readonly")}var r=this.theme.getContainer();r.appendChild(this.radioContainer),r.dataset.containerFor="radio",this.input=r,this.control=this.theme.getFormControl(this.label,r,this.description,this.infoButton),this.container.appendChild(this.control),window.requestAnimationFrame((function(){e.input.parentNode&&e.afterInputReady()}))},enable:function(){if(!this.always_disabled){for(var e=0;e<this.radioGroup.length;e++)this.radioGroup[e].disabled=!1;this.radioContainer.classList.remove("readonly"),this._super()}},disable:function(e){e&&(this.always_disabled=!0);for(var t=0;t<this.radioGroup.length;t++)this.radioGroup[t].disabled=!0;this.radioContainer.classList.add("readonly"),this._super()},destroy:function(){this.radioContainer.parentNode&&this.radioContainer.parentNode.parentNode&&this.radioContainer.parentNode.parentNode.removeChild(this.radioContainer.parentNode),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this._super()},getNumColumns:function(){return 2},setValue:function(e){for(var t=0;t<this.radioGroup.length;t++)if(this.radioGroup[t].value===e){this.radioGroup[t].checked=!0,this.value=e,this.onChange();break}}}),ge=U.extend({setValue:function(e,t,i){var n=this._super(e,t,i);void 0!==n&&n.changed&&this.sceditor_instance&&this.sceditor_instance.val(n.value)},build:function(){this.options.format="textarea",this._super(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)},afterInputReady:function(){if(window.sceditor){var e=this.expandCallbacks("sceditor",S({},{format:this.input_type,emoticonsEnabled:!1,width:"100%",height:300,readOnly:this.schema.readOnly||this.schema.readonly||this.schema.template},this.defaults.options.sceditor||{},this.options.sceditor||{},{element:this.input})),t=window.sceditor.instance(this.input);void 0===t&&window.sceditor.create(this.input,e),this.sceditor_instance=t||window.sceditor.instance(this.input),this.sceditor_instance.blur(function(){this.value=this.sceditor_instance.val(),this.sceditor_instance.updateOriginal(),this.is_dirty=!0,this.onChange(!0)}.bind(this)),this.theme.afterInputReady(this.input)}else this._super()},getNumColumns:function(){return 6},enable:function(){!this.always_disabled&&this.sceditor_instance&&this.sceditor_instance.readOnly(!1),this._super()},disable:function(e){this.sceditor_instance&&this.sceditor_instance.readOnly(!0),this._super(e)},destroy:function(){this.sceditor_instance&&(this.sceditor_instance.destroy(),this.sceditor_instance=null),this._super()}}),be=te.extend({setValue:function(e,t){if(this.select2_instance){t?this.is_dirty=!1:"change"===this.jsoneditor.options.show_errors&&(this.is_dirty=!0);var i=this.updateValue(e);this.input.value=i,this.select2v4?this.select2_instance.val(i).trigger("change"):this.select2_instance.select2("val",i),this.onChange(!0)}else this._super(e,t)},afterInputReady:function(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&!this.select2_instance){var e=this,t=this.expandCallbacks("select2",S({},this.defaults.options.select2||{},this.options.select2||{}));this.newEnumAllowed=t.tags=!!t.tags&&"string"===this.schema.type,this.select2_instance=window.jQuery(this.input).select2(t),this.select2v4=this.select2_instance.select2.hasOwnProperty("amd"),this.selectChangeHandler=function(){var t=e.select2v4?e.select2_instance.val():e.select2_instance.select2("val");e.updateValue(t),e.onChange(!0)},this.select2_instance.on("change",this.selectChangeHandler),this.select2_instance.on("select2-blur",this.selectChangeHandler)}this._super()},updateValue:function(e){var t=this.enum_values[0];return e=this.typecast(e||""),-1===this.enum_values.indexOf(e)?this.newEnumAllowed&&(t=this.addNewOption(e)?e:t):t=e,this.value=t,t},addNewOption:function(e){var t,i=this.typecast(e),n=!1;return this.enum_values.indexOf(i)<0&&""!==i&&(this.enum_options.push(""+i),this.enum_display.push(""+i),this.enum_values.push(i),this.schema.enum.push(i),(t=this.input.querySelector('option[value="'+i+'"]'))?t.removeAttribute("data-select2-tag"):this.input.appendChild(new Option(i,i,!1,!1)).trigger("change"),n=!0),n},enable:function(){this.always_disabled||this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!1):this.select2_instance.select2("enable",!0)),this._super()},disable:function(e){this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!0):this.select2_instance.select2("enable",!1)),this._super(e)},destroy:function(){this.select2_instance&&(this.select2_instance.select2("destroy"),this.select2_instance=null),this._super()}}),_e=te.extend({setValue:function(e,t){if(this.selectize_instance){t?this.is_dirty=!1:"change"===this.jsoneditor.options.show_errors&&(this.is_dirty=!0);var i=this.updateValue(e);this.input.value=i,this.selectize_instance.clear(!0),this.selectize_instance.setValue(i),this.onChange(!0)}else this._super(e,t)},afterInputReady:function(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&!this.selectize_instance){var e=this,t=this.expandCallbacks("selectize",S({},this.defaults.options.selectize||{},this.options.selectize||{}));this.newEnumAllowed=t.create=!!t.create&&"string"===this.schema.type,this.selectize_instance=window.jQuery(this.input).selectize(t)[0].selectize,this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=function(t){e.updateValue(t),e.onChange(!0)},this.selectize_instance.on("change",this.multiselectChangeHandler)}this._super()},updateValue:function(e){var t=this.enum_values[0];return e=this.typecast(e||""),-1===this.enum_values.indexOf(e)?this.newEnumAllowed&&(t=this.addNewOption(e)?e:t):t=e,this.value=t,t},addNewOption:function(e){var t=this.typecast(e),i=!1;return this.enum_values.indexOf(t)<0&&""!==t&&(this.enum_options.push(""+t),this.enum_display.push(""+t),this.enum_values.push(t),this.schema.enum.push(t),this.selectize_instance.addItem(t),this.selectize_instance.refreshOptions(!1),i=!0),i},onWatchedFieldChange:function(){if(this._super(),this.selectize_instance){var e=this;this.selectize_instance.clear(!0),this.selectize_instance.clearOptions(!0),this.enum_options.forEach((function(t,i){e.selectize_instance.addOption({value:t,text:e.enum_display[i]})})),this.selectize_instance.addItem(this.value+"",!0)}},enable:function(){!this.always_disabled&&this.selectize_instance&&this.selectize_instance.unlock(),this._super()},disable:function(e){this.selectize_instance&&this.selectize_instance.lock(),this._super(e)},destroy:function(){this.selectize_instance&&(this.selectize_instance.destroy(),this.selectize_instance=null),this._super()}}),ye=U.extend({build:function(){var e=this;this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description));var t=this.formname.replace(/\W/g,"");if("function"===typeof SignaturePad){this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input);var i=document.createElement("div");i.classList.add("signature-container");var n=document.createElement("canvas");n.setAttribute("name",t),n.classList.add("signature"),i.appendChild(n),e.signaturePad=new window.SignaturePad(n,{onEnd:function(){e.signaturePad.isEmpty()?e.input.value="":e.input.value=e.signaturePad.toDataURL(),e.is_dirty=!0,e.refreshValue(),e.watch_listener(),e.jsoneditor.notifyWatchers(e.path),e.parent?e.parent.onChildEditorChange(e):e.jsoneditor.onChange()}});var s=document.createElement("div"),a=document.createElement("button");a.classList.add("tiny","button"),a.innerHTML="Clear signature",s.appendChild(a),i.appendChild(s),this.options.compact&&this.container.setAttribute("class",this.container.getAttribute("class")+" compact"),(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,T(this.inputs,(function(e,t){n.setAttribute("readOnly","readOnly"),t.disabled=!0}))),a.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.signaturePad.clear(),e.signaturePad.strokeEnd()})),this.control=this.theme.getFormControl(this.label,i,this.description),this.container.appendChild(this.control),this.refreshValue(),n.width=i.offsetWidth,e.options&&e.options.canvas_height?n.height=e.options.canvas_height:n.height="300"}else{var r=document.createElement("p");r.innerHTML="Signature pad is not available, please include SignaturePad from https://github.com/szimek/signature_pad",this.container.appendChild(r)}},setValue:function(e){if("function"===typeof SignaturePad){var t=this.sanitize(e);if(this.value===t)return;return this.value=t,this.input.value=this.value,this.signaturePad.clear(),e&&""!==e&&this.signaturePad.fromDataURL(e),this.watch_listener(),this.jsoneditor.notifyWatchers(this.path),!1}},destroy:function(){this.signaturePad.off(),delete this.signaturePad}}),ve=U.extend({setValue:function(e,t,i){var n=this._super(e,t,i);void 0!==n&&n.changed&&this.simplemde_instance&&this.simplemde_instance.value(n.value)},build:function(){this.options.format="textarea",this._super(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)},afterInputReady:function(){var e,t=this;window.SimpleMDE?(e=this.expandCallbacks("simplemde",S({},{height:300},this.defaults.options.simplemde||{},this.options.simplemde||{},{element:this.input})),this.simplemde_instance=new window.SimpleMDE(e),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.simplemde_instance.codemirror.options.readOnly=!0),this.simplemde_instance.codemirror.on("change",(function(){t.value=t.simplemde_instance.value(),t.is_dirty=!0,t.onChange(!0)})),e.autorefresh&&this.startListening(this.simplemde_instance.codemirror,this.simplemde_instance.codemirror.state.autoRefresh={delay:250}),this.theme.afterInputReady(t.input)):this._super()},getNumColumns:function(){return 6},enable:function(){!this.always_disabled&&this.simplemde_instance&&(this.simplemde_instance.codemirror.options.readOnly=!1),this._super()},disable:function(e){this.simplemde_instance&&(this.simplemde_instance.codemirror.options.readOnly=!0),this._super(e)},destroy:function(){this.simplemde_instance&&(this.simplemde_instance.toTextArea(),this.simplemde_instance=null),this._super()},startListening:function(e,t){var i=this;function n(){e.display.wrapper.offsetHeight?(i.stopListening(e,t),e.display.lastWrapHeight!==e.display.wrapper.clientHeight&&e.refresh()):t.timeout=window.setTimeout(n,t.delay)}t.timeout=window.setTimeout(n,t.delay),t.hurry=function(){window.clearTimeout(t.timeout),t.timeout=window.setTimeout(n,50)},e.on(window,"mouseup",t.hurry),e.on(window,"keyup",t.hurry)},stopListening:function(e,t){window.clearTimeout(t.timeout),e.off(window,"mouseup",t.hurry),e.off(window,"keyup",t.hurry)}}),we=U.extend({build:function(){var e=this;if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.options.infoText)),this.options.compact&&this.container.classList.add("compact"),this.ratingContainer=document.createElement("div"),this.ratingContainer.classList.add("starrating"),void 0===this.schema.enum){var t=this.schema.maximum?this.schema.maximum:5;this.schema.exclusiveMaximum&&t--,this.enum_values=[];for(var i=0;i<t;i++)this.enum_values.push(i+1)}else this.enum_values=this.schema.enum;this.radioGroup=[];for(var n=function(t){t.preventDefault(),t.stopPropagation(),e.setValue(this.value),e.onChange(!0)},s=this.enum_values.length-1;s>-1;s--){var a=this.formname+(s+1),r=this.theme.getFormInputField("radio");r.name=this.formname+"[starrating]",r.value=this.enum_values[s],r.id=a,r.addEventListener("change",n,!1),this.radioGroup.push(r);var o=document.createElement("label");o.htmlFor=a,o.title=this.enum_values[s],this.options.displayValue&&o.classList.add("starrating-display-enabled"),this.ratingContainer.appendChild(r),this.ratingContainer.appendChild(o)}if(this.options.displayValue&&(this.displayRating=document.createElement("div"),this.displayRating.classList.add("starrating-display"),this.displayRating.innerText=this.enum_values[0],this.ratingContainer.appendChild(this.displayRating)),this.schema.readOnly||this.schema.readonly){this.always_disabled=!0;for(var l=0;l<this.radioGroup.length;l++)this.radioGroup[l].disabled=!0;this.ratingContainer.classList.add("readonly")}var c=this.theme.getContainer();c.appendChild(this.ratingContainer),this.input=c,this.control=this.theme.getFormControl(this.label,c,this.description,this.infoButton),this.container.appendChild(this.control),this.refreshValue()},enable:function(){if(!this.always_disabled){for(var e=0;e<this.radioGroup.length;e++)this.radioGroup[e].disabled=!1;this.ratingContainer.classList.remove("readonly"),this._super()}},disable:function(e){e&&(this.always_disabled=!0);for(var t=0;t<this.radioGroup.length;t++)this.radioGroup[t].disabled=!0;this.ratingContainer.classList.add("readonly"),this._super()},destroy:function(){this.ratingContainer.parentNode&&this.ratingContainer.parentNode.parentNode&&this.ratingContainer.parentNode.parentNode.removeChild(this.ratingContainer.parentNode),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this._super()},getNumColumns:function(){return 2},getValue:function(){if(this.dependenciesFulfilled)return"integer"===this.schema.type?""===this.value?void 0:1*this.value:this.value},setValue:function(e){for(var t=0;t<this.radioGroup.length;t++)if(this.radioGroup[t].value==e){this.radioGroup[t].checked=!0,this.value=e,this.options.displayValue&&(this.displayRating.innerHTML=this.value),this.onChange(!0);break}}}),Ee=J.extend({register:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].register()},unregister:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].unregister()},getNumColumns:function(){return Math.max(Math.min(12,this.width),3)},preBuild:function(){var e=this.jsoneditor.expandRefs(this.schema.items||{});this.item_title=e.title||"row",this.item_default=e.default||null,this.item_has_child_editors=e.properties||e.items,this.width=12,this._super()},build:function(){this.table=this.theme.getTable(),this.container.appendChild(this.table),this.thead=this.theme.getTableHead(),this.table.appendChild(this.thead),this.header_row=this.theme.getTableRow(),this.thead.appendChild(this.header_row),this.row_holder=this.theme.getTableBody(),this.table.appendChild(this.row_holder);var e=this.getElementEditor(0,!0);if(this.item_default=e.getDefault(),this.width=e.getNumColumns()+2,this.options.compact?(this.panel=document.createElement("div"),this.container.appendChild(this.panel)):(this.header=document.createElement("label"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.error_holder=document.createElement("div"),this.panel.appendChild(this.error_holder)),this.panel.appendChild(this.table),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.item_has_child_editors)for(var t=e.getChildEditors(),i=e.property_order||Object.keys(t),n=0;n<i.length;n++){var s=this.theme.getTableHeaderCell(t[i[n]].getTitle());t[i[n]].options.hidden&&(s.style.display="none"),this.header_row.appendChild(s)}else this.header_row.appendChild(this.theme.getTableHeaderCell(this.item_title));e.destroy(),this.row_holder.innerHTML="",this.controls_header_cell=this.theme.getTableHeaderCell(" "),this.header_row.appendChild(this.controls_header_cell),this.addControls()},onChildEditorChange:function(e){this.refreshValue(),this._super()},getItemDefault:function(){return S({},{default:this.item_default}).default},getItemTitle:function(){return this.item_title},getElementEditor:function(e,t){var i=S({},this.schema.items),n=this.jsoneditor.getEditorClass(i,this.jsoneditor),s=this.row_holder.appendChild(this.theme.getTableRow()),a=s;this.item_has_child_editors||(a=this.theme.getTableCell(),s.appendChild(a));var r=this.jsoneditor.createEditor(n,{jsoneditor:this.jsoneditor,schema:i,container:a,path:this.path+"."+e,parent:this,compact:!0,table_row:!0});return r.preBuild(),t||(r.build(),r.postBuild(),r.controls_cell=s.appendChild(this.theme.getTableCell()),r.row=s,r.table_controls=this.theme.getButtonHolder(),r.controls_cell.appendChild(r.table_controls),r.table_controls.style.margin=0,r.table_controls.style.padding=0),r},destroy:function(){this.innerHTML="",this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.row_holder&&this.row_holder.parentNode&&this.row_holder.parentNode.removeChild(this.row_holder),this.table&&this.table.parentNode&&this.table.parentNode.removeChild(this.table),this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel),this.rows=this.title=this.description=this.row_holder=this.table=this.panel=null,this._super()},setValue:function(e,t){if(e=e||[],this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemDefault());if(this.schema.maxItems&&e.length>this.schema.maxItems&&(e=e.slice(0,this.schema.maxItems)),JSON.stringify(e)!==this.serialized){var i=!1,n=this;T(e,(function(e,t){n.rows[e]?n.rows[e].setValue(t):(n.addRow(t),i=!0)}));for(var s=e.length;s<n.rows.length;s++){var a=n.rows[s].container;n.item_has_child_editors||n.rows[s].row.parentNode.removeChild(n.rows[s].row),n.rows[s].destroy(),a.parentNode&&a.parentNode.removeChild(a),n.rows[s]=null,i=!0}n.rows=n.rows.slice(0,e.length),n.refreshValue(),(i||t)&&n.refreshRowButtons(),n.onChange()}},refreshRowButtons:function(){var e=this,t=this.schema.minItems&&this.schema.minItems>=this.rows.length,i=!1;T(this.rows,(function(n,s){s.movedown_button&&(n===e.rows.length-1?s.movedown_button.style.display="none":(i=!0,s.movedown_button.style.display="")),s.delete_button&&(t?s.delete_button.style.display="none":(i=!0,s.delete_button.style.display="")),s.moveup_button&&(i=!0)})),T(this.rows,(function(e,t){t.controls_cell.style.display=i?"":"none"})),this.controls_header_cell.style.display=i?"":"none";var n=!1;this.value.length?1===this.value.length?(this.table.style.display="",this.remove_all_rows_button.style.display="none",t||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",n=!0)):(this.table.style.display="",t||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",n=!0),t||this.hide_delete_all_rows_buttons?this.remove_all_rows_button.style.display="none":(this.remove_all_rows_button.style.display="",n=!0)):(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none",this.table.style.display="none"),this.schema.maxItems&&this.schema.maxItems<=this.rows.length||this.hide_add_button?this.add_row_button.style.display="none":(this.add_row_button.style.display="",n=!0),this.controls.style.display=n?"":"none"},refreshValue:function(){var e=this;this.value=[],T(this.rows,(function(t,i){e.value[t]=i.getValue()})),this.serialized=JSON.stringify(this.value)},addRow:function(e){var t=this,i=this.rows.length;t.rows[i]=this.getElementEditor(i);var n=t.rows[i].table_controls;this.hide_delete_buttons||(t.rows[i].delete_button=this.getButton("","delete",this.translate("button_delete_row_title_short")),t.rows[i].delete_button.classList.add("delete","json-editor-btntype-delete"),t.rows[i].delete_button.setAttribute("data-i",i),t.rows[i].delete_button.addEventListener("click",(function(e){if(e.preventDefault(),e.stopPropagation(),!t.askConfirmation())return!1;var i=1*this.getAttribute("data-i"),n=t.getValue(),s=[];T(n,(function(e,t){e!==i&&s.push(t)})),t.setValue(s),t.onChange(!0),t.jsoneditor.trigger("deleteRow",t.rows[i])})),n.appendChild(t.rows[i].delete_button)),i&&!this.hide_move_buttons&&(t.rows[i].moveup_button=this.getButton("","moveup",this.translate("button_move_up_title")),t.rows[i].moveup_button.classList.add("moveup","json-editor-btntype-move"),t.rows[i].moveup_button.setAttribute("data-i",i),t.rows[i].moveup_button.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();var i=1*this.getAttribute("data-i");if(!(i<=0)){var n=t.getValue(),s=n[i-1];n[i-1]=n[i],n[i]=s,t.setValue(n),t.onChange(!0),t.jsoneditor.trigger("moveRow",t.rows[i-1])}})),n.appendChild(t.rows[i].moveup_button)),this.hide_move_buttons||(t.rows[i].movedown_button=this.getButton("","movedown",this.translate("button_move_down_title")),t.rows[i].movedown_button.classList.add("movedown","json-editor-btntype-move"),t.rows[i].movedown_button.setAttribute("data-i",i),t.rows[i].movedown_button.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();var i=1*this.getAttribute("data-i"),n=t.getValue();if(!(i>=n.length-1)){var s=n[i+1];n[i+1]=n[i],n[i]=s,t.setValue(n),t.onChange(!0),t.jsoneditor.trigger("moveRow",t.rows[i+1])}})),n.appendChild(t.rows[i].movedown_button)),e&&t.rows[i].setValue(e)},addControls:function(){var e=this;this.collapsed=!1,this.toggle_button=this.getButton("","collapse",this.translate("button_collapse")),this.toggle_button.classList.add("json-editor-btntype-toggle"),this.toggle_button.style.margin="0 10px 0 0",this.title_controls&&(this.title.insertBefore(this.toggle_button,this.title.childNodes[0]),this.toggle_button.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.collapsed?(e.collapsed=!1,e.panel.style.display="",e.setButtonText(this,"","collapse",e.translate("button_collapse"))):(e.collapsed=!0,e.panel.style.display="none",e.setButtonText(this,"","expand",e.translate("button_expand")))})),this.options.collapsed&&L(this.toggle_button,"click"),this.schema.options&&"undefined"!==typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none")),this.add_row_button=this.getButton(this.getItemTitle(),"add",this.translate("button_add_row_title",[this.getItemTitle()])),this.add_row_button.classList.add("json-editor-btntype-add"),this.add_row_button.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation();var i=e.addRow();e.refreshValue(),e.refreshRowButtons(),e.onChange(!0),e.jsoneditor.trigger("addRow",i)})),e.controls.appendChild(this.add_row_button),this.delete_last_row_button=this.getButton(this.translate("button_delete_last",[this.getItemTitle()]),"subtract",this.translate("button_delete_last_title",[this.getItemTitle()])),this.delete_last_row_button.classList.add("json-editor-btntype-deletelast"),this.delete_last_row_button.addEventListener("click",(function(t){if(t.preventDefault(),t.stopPropagation(),!e.askConfirmation())return!1;var i=e.getValue(),n=i.pop();e.setValue(i),e.onChange(!0),e.jsoneditor.trigger("deleteRow",n)})),e.controls.appendChild(this.delete_last_row_button),this.remove_all_rows_button=this.getButton(this.translate("button_delete_all"),"delete",this.translate("button_delete_all_title")),this.remove_all_rows_button.classList.add("json-editor-btntype-deleteall"),this.remove_all_rows_button.addEventListener("click",(function(t){if(t.preventDefault(),t.stopPropagation(),!e.askConfirmation())return!1;e.setValue([]),e.onChange(!0),e.jsoneditor.trigger("deleteAllRows")})),e.controls.appendChild(this.remove_all_rows_button)}}),xe=q.extend({getNumColumns:function(){return 4},build:function(){var e=this;if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.options.infoText)),this.options=this.expandCallbacks("upload",S({},{title:"Browse",icon:"",auto_upload:!1,hide_input:!1,enable_drag_drop:!1,drop_zone_text:"Drag & Drop file here",drop_zone_top:!1,alt_drop_zone:"",mime_type:"",max_upload_size:0,upload_handler:function(e,t,i,n){window.alert('No upload_handler defined for "'+e.path+'". You must create your own handler to enable upload to server')}.bind(null,this)},this.defaults.options.upload||{},this.options.upload||{})),this.options.mime_type=this.options.mime_type?[].concat(this.options.mime_type):[],this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if("function"!==typeof this.options.upload_handler)throw new Error("Upload handler required for upload editor");if(this.uploader=this.theme.getFormInputField("file"),this.uploader.style.display="none",this.options.mime_type.length&&this.uploader.setAttribute("accept",this.options.mime_type),!0===this.options.enable_drag_drop&&!0===this.options.hide_input||(this.clickHandler=function(t){e.uploader.dispatchEvent(new window.MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}))},this.browseButton=this.getButton(this.options.title,this.options.icon,this.options.title),this.browseButton.addEventListener("click",this.clickHandler),this.fileDisplay=this.theme.getFormInputField("input"),this.fileDisplay.setAttribute("readonly",!0),this.fileDisplay.value="No file selected.",this.fileDisplay.addEventListener("dblclick",this.clickHandler),this.fileUploadGroup=this.theme.getInputGroup(this.fileDisplay,[this.browseButton]),this.fileUploadGroup||(this.fileUploadGroup=document.createElement("div"),this.fileUploadGroup.appendChild(this.fileDisplay),this.fileUploadGroup.appendChild(this.browseButton))),!0===this.options.enable_drag_drop){if(""!==this.options.alt_drop_zone){if(this.altDropZone=document.querySelector(this.options.alt_drop_zone),!this.altDropZone)throw new Error('Error: alt_drop_zone selector "'+this.options.alt_drop_zone+'" not found!');this.dropZone=this.altDropZone}else this.dropZone=this.theme.getDropZone(this.options.drop_zone_text);this.dropZone&&(this.dropZone.classList.add("upload-dropzone"),this.dropZone.addEventListener("dblclick",this.clickHandler))}this.uploadHandler=function(t){t.preventDefault(),t.stopPropagation();var i=t.target.files||t.dataTransfer.files;if(i&&i.length)if(0!==e.options.max_upload_size&&i[0].size>e.options.max_upload_size)e.theme.addInputError(e.uploader,"Filesize too large. Max size is "+e.options.max_upload_size);else if(0===e.options.mime_type.length||e.isValidMimeType(i[0].type,e.options.mime_type)){e.fileDisplay&&(e.fileDisplay.value=i[0].name);var n=new window.FileReader;n.onload=function(i){e.preview_value=i.target.result,e.refreshPreview(t),e.onChange(!0),n=null},n.readAsDataURL(i[0])}else e.theme.addInputError(e.uploader,"Wrong file format. Allowed format(s): "+e.options.mime_type.toString())},this.uploader.addEventListener("change",this.uploadHandler),this.dragHandler=function(t){var i=t.dataTransfer.items||t.dataTransfer.files,n=i&&i.length&&(0===e.options.mime_type.length||e.isValidMimeType(i[0].type,e.options.mime_type)),s=t.currentTarget.classList&&t.currentTarget.classList.contains("upload-dropzone")&&n;switch((this===window?"w_":"e_")+t.type){case"w_drop":case"w_dragover":s||(t.dataTransfer.dropEffect="none");break;case"e_dragenter":s?(e.dropZone.classList.add("valid-dropzone"),t.dataTransfer.dropEffect="copy"):e.dropZone.classList.add("invalid-dropzone");break;case"e_dragover":s&&(t.dataTransfer.dropEffect="copy");break;case"e_dragleave":e.dropZone.classList.remove("valid-dropzone","invalid-dropzone");break;case"e_drop":e.dropZone.classList.remove("valid-dropzone","invalid-dropzone"),s&&e.uploadHandler(t)}s||t.preventDefault()},!0===this.options.enable_drag_drop&&(["dragover","drop"].forEach((function(t){window.addEventListener(t,e.dragHandler,!0)})),["dragenter","dragover","dragleave","drop"].forEach((function(t){e.dropZone.addEventListener(t,e.dragHandler,!0)})))}this.preview=document.createElement("div"),this.control=this.input.controlgroup=this.theme.getFormControl(this.label,this.uploader||this.input,this.description,this.infoButton),this.uploader&&(this.uploader.controlgroup=this.control);var t=this.uploader||this.input,i=document.createElement("div");this.dropZone&&!this.altDropZone&&!0===this.options.drop_zone_top&&i.appendChild(this.dropZone),this.fileUploadGroup&&i.appendChild(this.fileUploadGroup),this.dropZone&&!this.altDropZone&&!0!==this.options.drop_zone_top&&i.appendChild(this.dropZone),i.appendChild(this.preview),t.parentNode.insertBefore(i,t.nextSibling),this.container.appendChild(this.control),window.requestAnimationFrame((function(){e.afterInputReady()}))},afterInputReady:function(){var e=this;if(e.value){var t=document.createElement("img");t.style.maxWidth="100%",t.style.maxHeight="100px",t.onload=function(i){e.preview.appendChild(t)},t.onerror=function(e){console.error("upload error",e,this)},t.src=e.container.querySelector("a").href}e.theme.afterInputReady(e.input)},refreshPreview:function(e){if(this.last_preview!==this.preview_value&&(this.last_preview=this.preview_value,this.preview.innerHTML="",this.preview_value)){var t=this,i=(e.target.files||e.dataTransfer.files)[0],n=this.preview_value.match(/^data:([^;,]+)[;,]/);if(i.mimeType=n?n[1]:"unknown",i.size>0){var s=Math.floor(Math.log(i.size)/Math.log(1024));i.formattedSize=parseFloat((i.size/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][s]}else i.formattedSize="0 Bytes";var a=this.getButton("Upload","upload","Upload");a.addEventListener("click",(function(e){e.preventDefault(),a.setAttribute("disabled","disabled"),t.theme.removeInputError(t.uploader),t.theme.getProgressBar&&(t.progressBar=t.theme.getProgressBar(),t.preview.appendChild(t.progressBar)),t.options.upload_handler(t.path,i,{success:function(e){t.setValue(e),t.parent?t.parent.onChildEditorChange(t):t.jsoneditor.onChange(),t.progressBar&&t.preview.removeChild(t.progressBar),a.removeAttribute("disabled")},failure:function(e){t.theme.addInputError(t.uploader,e),t.progressBar&&t.preview.removeChild(t.progressBar),a.removeAttribute("disabled")},updateProgress:function(e){t.progressBar&&(e?t.theme.updateProgressBar(t.progressBar,e):t.theme.updateProgressBarUnknown(t.progressBar))}})})),this.preview.appendChild(this.theme.getUploadPreview(i,a,this.preview_value)),this.options.auto_upload&&(a.dispatchEvent(new window.MouseEvent("click")),this.preview.removeChild(a))}},enable:function(){this.always_disabled||(this.uploader&&(this.uploader.disabled=!1),this._super())},disable:function(e){e&&(this.always_disabled=!0),this.uploader&&(this.uploader.disabled=!0),this._super()},setValue:function(e){this.value!==e&&(this.value=e,this.input.value=this.value,this.onChange())},destroy:function(){var e=this;!0===this.options.enable_drag_drop&&(["dragover","drop"].forEach((function(t){window.removeEventListener(t,e.dragHandler,!0)})),["dragenter","dragover","dragleave","drop"].forEach((function(t){e.dropZone.removeEventListener(t,e.dragHandler,!0)})),this.dropZone.removeEventListener("dblclick",this.clickHandler),this.dropZone&&this.dropZone.parentNode&&this.dropZone.parentNode.removeChild(this.dropZone)),this.uploader&&this.uploader.parentNode&&(this.uploader.removeEventListener("change",this.uploadHandler),this.uploader.parentNode.removeChild(this.uploader)),this.browseButton&&this.browseButton.parentNode&&(this.browseButton.removeEventListener("click",this.clickHandler),this.browseButton.parentNode.removeChild(this.browseButton)),this.fileDisplay&&this.fileDisplay.parentNode&&(this.fileDisplay.removeEventListener("dblclick",this.clickHandler),this.fileDisplay.parentNode.removeChild(this.fileDisplay)),this.fileUploadGroup&&this.fileUploadGroup.parentNode&&this.fileUploadGroup.parentNode.removeChild(this.fileUploadGroup),this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.header&&this.header.parentNode&&this.header.parentNode.removeChild(this.header),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this._super()},isValidMimeType:function(e,t){return t.reduce((function(t,i){return t||new RegExp(i.replace(/\*/g,".*"),"gi").test(e)}),!1)}}),Ce=q.extend({preBuild:function(){this._super(),this.schema.default=this.uuid=this.getUuid(),this.jsoneditor.validator.schema.properties[this.key].pattern=this.schema.pattern="^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$",this.schema.options||(this.schema.options={}),this.schema.options.cleave||(this.schema.options.cleave={delimiters:["-"],blocks:[8,4,4,4,12]})},sanitize:function(e){return this.testUuid(e)||(e=this.uuid),e},setValue:function(e,t,i){this.testUuid(e)||(e=this.uuid),this.uuid=e,this._super(e,t,i)},getUuid:function(){var e=(new Date).getTime();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?i:3&i|8).toString(16)}))},testUuid:function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}),ke=U.extend({postBuild:function(){window.Picker&&(this.input.type="text")},setValue:function(e,t,i){var n=this._super(e,t,i);return this.picker_instance&&this.picker_instance.domElement&&n&&n.changed&&this.picker_instance.setColor(n.value,!0),n},getNumColumns:function(){return 2},afterInputReady:function(){this._super(),this.createPicker(!0)},disable:function(){if(this._super(),this.picker_instance&&this.picker_instance.domElement){this.picker_instance.domElement.style.pointerEvents="none";for(var e=this.picker_instance.domElement.querySelectorAll("button"),t=0;t<e.length;t++)e[t].disabled=!0}},enable:function(){if(this._super(),this.picker_instance&&this.picker_instance.domElement){this.picker_instance.domElement.style.pointerEvents="auto";for(var e=this.picker_instance.domElement.querySelectorAll("button"),t=0;t<e.length;t++)e[t].disabled=!1}},destroy:function(){this.createPicker(!1),this._super()},createPicker:function(e){if(e){if(window.Picker&&!this.picker_instance){var t=this,i=this.expandCallbacks("colorpicker",S({},{editor:!1,alpha:!1,color:this.value,popup:"bottom"},this.defaults.options.colorpicker||{},this.options.colorpicker||{},{parent:this.container})),n=function(e){var i=this.settings.editorFormat,n=this.settings.alpha;t.setValue("hex"===i?n?e.hex:e.hex.slice(0,7):e[i+(n?"a":"")+"String"])};i.popup||"function"===typeof i.onChange?i.popup&&"function"!==typeof i.onDone&&(i.onDone=n):i.onChange=n,this.picker_instance=new window.Picker(i),i.popup||(this.input.style.display="none",this.theme.afterInputReady(this.picker_instance.domElement))}}else this.picker_instance&&(this.picker_instance.destroy(),this.picker_instance=null,this.input.style.display="")}}),je=function(){return{compile:function(e){var t=e.match(/{{\s*([a-zA-Z0-9\-_ .]+)\s*}}/g),i=t&&t.length;if(!i)return function(){return e};for(var n=[],s=function(e){var i,s,a=t[e].replace(/[{}]+/g,"").trim().split("."),r=a.length;r>1?i=function(t){for(s=t,e=0;e<r&&(s=s[a[e]]);e++);return s}:(a=a[0],i=function(e){return e[a]});n.push({s:t[e],r:i})},a=0;a<i;a++)s(a);return function(t){var s,r=e+"";for(a=0;a<i;a++)s=n[a],r=r.replace(s.s,s.r(t));return r}}}},Ne=z.extend({mapping:{collapse:"caret-down",expand:"caret-right",delete:"trash",edit:"pen",add:"plus",subtract:"minus",cancel:"ban",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"copy",clear:"times-circle",time:"clock",calendar:"calendar",edit_properties:"list"},icon_prefix:"fas fa-"}),Oe=function e(t,i){if(!(t instanceof Element))throw new Error("element should be an instance of Element");i=S({},e.defaults.options,i||{}),this.element=t,this.options=i,this.init()};Oe.prototype={constructor:Oe,init:function(){var e=this;this.ready=!1,this.copyClipboard=null;var t=this.options.theme||Oe.defaults.theme,i=Oe.defaults.themes[t];if(!i)throw new Error("Unknown theme "+t);this.schema=this.options.schema,this.theme=new i(this),this.element.setAttribute("data-theme",t),this.theme.options.disable_theme_rules||this.addNewStyleRules(t,this.theme.rules),this.template=this.options.template,this.uuid=0,this.__data={};var n=Oe.defaults.iconlibs[this.options.iconlib||Oe.defaults.iconlib];n&&(this.iconlib=new n),this.root_container=this.theme.getContainer(),this.element.appendChild(this.root_container),this.translate=this.options.translate||Oe.defaults.translate;var s=document.location.origin+document.location.pathname.toString(),a=new F(e.options),r=document.location.toString();this.expandSchema=function(e,t){return a.expandSchema(e,t)},this.expandRefs=function(e,t){return a.expandRefs(e,t)},this.refs=a.refs,a.load(e.options.schema,(function(t){var i={};e.options.custom_validators&&(i.custom_validators=e.options.custom_validators),e.validator=new R(e,null,i,Oe.defaults);var n=e.getEditorClass(t);e.root=e.createEditor(n,{jsoneditor:e,schema:t,required:!0,container:e.root_container}),e.root.preBuild(),e.root.build(),e.root.postBuild(),e.options.hasOwnProperty("startval")&&e.root.setValue(e.options.startval),e.validation_results=e.validator.validate(e.root.getValue()),e.root.showValidationErrors(e.validation_results),e.ready=!0,window.requestAnimationFrame((function(){e.ready&&(e.validation_results=e.validator.validate(e.root.getValue()),e.root.showValidationErrors(e.validation_results),e.trigger("ready"),e.trigger("change"))}))}),s,r)},getValue:function(){if(!this.ready)throw new Error("JSON Editor not ready yet.  Listen for 'ready' event before getting the value");return this.root.getValue()},setValue:function(e){if(!this.ready)throw new Error("JSON Editor not ready yet.  Listen for 'ready' event before setting the value");return this.root.setValue(e),this},validate:function(e){if(!this.ready)throw new Error("JSON Editor not ready yet.  Listen for 'ready' event before validating");return 1===arguments.length?this.validator.validate(e):this.validation_results},destroy:function(){this.destroyed||this.ready&&(this.schema=null,this.options=null,this.root.destroy(),this.root=null,this.root_container=null,this.validator=null,this.validation_results=null,this.theme=null,this.iconlib=null,this.template=null,this.__data=null,this.ready=!1,this.element.innerHTML="",this.element.removeAttribute("data-theme"),this.destroyed=!0)},on:function(e,t){return this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[],this.callbacks[e].push(t),this},off:function(e,t){if(e&&t){this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[];for(var i=[],n=0;n<this.callbacks[e].length;n++)this.callbacks[e][n]!==t&&i.push(this.callbacks[e][n]);this.callbacks[e]=i}else e?(this.callbacks=this.callbacks||{},this.callbacks[e]=[]):this.callbacks={};return this},trigger:function(e,t){if(this.callbacks&&this.callbacks[e]&&this.callbacks[e].length)for(var i=0;i<this.callbacks[e].length;i++)this.callbacks[e][i].apply(this,[t]);return this},setOption:function(e,t){if("show_errors"!==e)throw new Error("Option "+e+" must be set during instantiation and cannot be changed later");return this.options.show_errors=t,this.onChange(),this},getEditorClass:function(e){var t;if(e=this.expandSchema(e),T(Oe.defaults.resolvers,(function(i,n){var s=n(e);if(s&&Oe.defaults.editors[s])return t=s,!1})),!t)throw new Error("Unknown editor for schema "+JSON.stringify(e));if(!Oe.defaults.editors[t])throw new Error("Unknown editor "+t);return Oe.defaults.editors[t]},createEditor:function(e,t){return new e(t=S({},e.options||{},t),Oe.defaults)},onChange:function(){if(this.ready&&!this.firing_change){this.firing_change=!0;var e=this;return window.requestAnimationFrame((function(){e.firing_change=!1,e.ready&&(e.validation_results=e.validator.validate(e.root.getValue()),"never"!==e.options.show_errors?e.root.showValidationErrors(e.validation_results):e.root.showValidationErrors([]),e.trigger("change"))})),this}},compileTemplate:function(e,t){var i;if("string"===typeof(t=t||Oe.defaults.template)){if(!Oe.defaults.templates[t])throw new Error("Unknown template engine "+t);if(!(i=Oe.defaults.templates[t]()))throw new Error("Template engine "+t+" missing required library.")}else i=t;if(!i)throw new Error("No template engine set");if(!i.compile)throw new Error("Invalid template engine set");return i.compile(e)},_data:function(e,t,i){if(3!==arguments.length)return e.hasAttribute("data-jsoneditor-"+t)?this.__data[e.getAttribute("data-jsoneditor-"+t)]:null;var n;e.hasAttribute("data-jsoneditor-"+t)?n=e.getAttribute("data-jsoneditor-"+t):(n=this.uuid++,e.setAttribute("data-jsoneditor-"+t,n)),this.__data[n]=i},registerEditor:function(e){return this.editors=this.editors||{},this.editors[e.path]=e,this},unregisterEditor:function(e){return this.editors=this.editors||{},this.editors[e.path]=null,this},getEditor:function(e){if(this.editors)return this.editors[e]},watch:function(e,t){return this.watchlist=this.watchlist||{},this.watchlist[e]=this.watchlist[e]||[],this.watchlist[e].push(t),this},unwatch:function(e,t){if(!this.watchlist||!this.watchlist[e])return this;if(!t)return this.watchlist[e]=null,this;for(var i=[],n=0;n<this.watchlist[e].length;n++)this.watchlist[e][n]!==t&&i.push(this.watchlist[e][n]);return this.watchlist[e]=i.length?i:null,this},notifyWatchers:function(e){if(!this.watchlist||!this.watchlist[e])return this;for(var t=0;t<this.watchlist[e].length;t++)this.watchlist[e][t]()},isEnabled:function(){return!this.root||this.root.isEnabled()},enable:function(){this.root.enable()},disable:function(){this.root.disable()},setCopyClipboardContents:function(e){this.copyClipboard=e},getCopyClipboardContents:function(){return this.copyClipboard},addNewStyleRules:function(e,t){var i=document.querySelector("#theme-"+e);i||((i=document.createElement("style")).setAttribute("id","theme-"+e),i.appendChild(document.createTextNode("")),document.head.appendChild(i));var n=i.sheet?i.sheet:i.styleSheet,s=this.element.nodeName.toLowerCase();for(var a in t)if(t.hasOwnProperty(a)){var r=s+'[data-theme="'+e+'"] '+a;n.insertRule?n.insertRule(r+" {"+t[a]+"}",0):n.addRule&&n.addRule(r,t[a],0)}}},Oe.defaults=function(){var e={defaults:{themes:{},templates:{},iconlibs:{},editors:{},languages:{},resolvers:[],custom_validators:[]}};return e.defaults.theme="html",e.defaults.template="default",e.defaults.options={},e.defaults.options.prompt_before_delete=!0,e.defaults.options.upload=function(e,t,i){console.log("Upload handler required for upload editor")},e.defaults.translate=function(t,i){var n=e.defaults.languages[e.defaults.language];if(!n)throw new Error("Unknown language "+e.defaults.language);var s=n[t]||e.defaults.languages[e.defaults.default_language][t];if("undefined"===typeof s)throw new Error("Unknown translate string "+t);if(i)for(var a=0;a<i.length;a++)s=s.replace(new RegExp("\\{\\{"+a+"}}","g"),i[a]);return s},e.defaults.default_language="en",e.defaults.language=e.defaults.default_language,e.defaults.languages.en={error_notset:"Property must be set",error_notempty:"Value required",error_enum:"Value must be one of the enumerated values",error_anyOf:"Value must validate against at least one of the provided schemas",error_oneOf:"Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.",error_not:"Value must not validate against the provided schema",error_type_union:"Value must be one of the provided types",error_type:"Value must be of type {{0}}",error_disallow_union:"Value must not be one of the provided disallowed types",error_disallow:"Value must not be of type {{0}}",error_multipleOf:"Value must be a multiple of {{0}}",error_maximum_excl:"Value must be less than {{0}}",error_maximum_incl:"Value must be at most {{0}}",error_minimum_excl:"Value must be greater than {{0}}",error_minimum_incl:"Value must be at least {{0}}",error_maxLength:"Value must be at most {{0}} characters long",error_minLength:"Value must be at least {{0}} characters long",error_pattern:"Value must match the pattern {{0}}",error_additionalItems:"No additional items allowed in this array",error_maxItems:"Value must have at most {{0}} items",error_minItems:"Value must have at least {{0}} items",error_uniqueItems:"Array must have unique items",error_maxProperties:"Object must have at most {{0}} properties",error_minProperties:"Object must have at least {{0}} properties",error_required:"Object is missing the required property '{{0}}'",error_additional_properties:"No additional properties allowed, but property {{0}} is set",error_dependency:"Must have property {{0}}",error_date:"Date must be in the format {{0}}",error_time:"Time must be in the format {{0}}",error_datetime_local:"Datetime must be in the format {{0}}",error_invalid_epoch:"Date must be greater than 1 January 1970",error_ipv4:"Value must be a valid IPv4 address in the form of 4 numbers between 0 and 255, separated by dots",error_ipv6:"Value must be a valid IPv6 address",error_hostname:"The hostname has the wrong format",button_delete_all:"All",button_delete_all_title:"Delete All",button_delete_last:"Last {{0}}",button_delete_last_title:"Delete Last {{0}}",button_add_row_title:"Add {{0}}",button_move_down_title:"Move down",button_move_up_title:"Move up",button_object_properties:"Object Properties",button_delete_row_title:"Delete {{0}}",button_delete_row_title_short:"Delete",button_collapse:"Collapse",button_expand:"Expand",flatpickr_toggle_button:"Toggle",flatpickr_clear_button:"Clear",choices_placeholder_text:"Start typing to add value",default_array_item_title:"item"},e.defaults.callbacks={},T(e.defaults.editors,(function(t,i){e.defaults.editors[t].options=i.options||{}})),e.defaults.resolvers.unshift((function(e){if("string"!==typeof e.type)return"multiple"})),e.defaults.resolvers.unshift((function(e){if(!e.type&&e.properties)return"object"})),e.defaults.resolvers.unshift((function(e){if("string"===typeof e.type)return e.type})),e.defaults.resolvers.unshift((function(e){if("string"===e.type&&"signature"===e.format)return"signature"})),e.defaults.resolvers.unshift((function(e){if("boolean"===e.type)return"checkbox"===e.format||e.options&&e.options.checkbox?"checkbox":"select2"===e.format?"select2":"selectize"===e.format?"selectize":/^(choices|boolean|select)$/.test(e.format)?"choices":"select"})),e.defaults.resolvers.unshift((function(e){if("any"===e.type)return"multiple"})),e.defaults.resolvers.unshift((function(e){if("string"===e.type&&e.media&&"base64"===e.media.binaryEncoding)return"base64"})),e.defaults.resolvers.unshift((function(e){if("string"===e.type&&"url"===e.format&&window.FileReader&&e.options&&e.options.upload===Object(e.options.upload))return"upload"})),e.defaults.resolvers.unshift((function(e){if("array"===e.type&&"table"===e.format)return"table"})),e.defaults.resolvers.unshift((function(e){if(e.enumSource)return"radio"===e.format?"radio":"select2"===e.format?"select2":"selectize"===e.format?"selectize":(e.format,"choices")})),e.defaults.resolvers.unshift((function(e){if(e.enum){if("array"===e.type||"object"===e.type)return"enum";if("number"===e.type||"integer"===e.type||"string"===e.type)return"radio"===e.format?"radio":"select2"===e.format?"select2":"selectize"===e.format?"selectize":(e.format,"choices")}})),e.defaults.resolvers.unshift((function(e){if("array"===e.type&&e.items&&!Array.isArray(e.items)&&["string","number","integer"].indexOf(e.items.type)>=0){if("choices"===e.format||"select"===e.format)return"arrayChoices";if(e.uniqueItems){if("selectize"===e.format)return"arraySelectize";if("select2"===e.format)return"arraySelect2";if("table"!==e.format)return"multiselect"}}})),e.defaults.resolvers.unshift((function(e){if(e.oneOf||e.anyOf)return"multiple"})),e.defaults.resolvers.unshift((function(e){if(-1!==["string","integer"].indexOf(e.type)&&-1!==["date","time","datetime-local"].indexOf(e.format))return"datetime"})),e.defaults.resolvers.unshift((function(e){if(-1!==["string","integer"].indexOf(e.type)&&-1!==["starrating","rating"].indexOf(e.format))return"starrating"})),e.defaults.resolvers.unshift((function(e){if(e.links)for(var t=0;t<e.links.length;t++)if(e.links[t].rel&&"describedby"===e.links[t].rel.toLowerCase())return"describedBy"})),e.defaults.resolvers.unshift((function(e){if("button"===e.format)return"button"})),e.defaults.resolvers.unshift((function(e){if("info"===e.format)return"info"})),e.defaults.resolvers.unshift((function(e){if("string"===e.type&&"uuid"===e.format)return"uuid"})),e.defaults.resolvers.unshift((function(e){if("string"===e.type&&"autocomplete"===e.format)return"autocomplete"})),e.defaults.resolvers.unshift((function(e){if("string"===e.type&&"jodit"===e.format)return"jodit"})),e.defaults.resolvers.unshift((function(e){if("string"===e.type&&"markdown"===e.format)return"simplemde"})),e.defaults.resolvers.unshift((function(e){if("string"===e.type&&-1!==["xhtml","bbcode"].indexOf(e.format))return"sceditor"})),e.defaults.resolvers.unshift((function(e){if("string"===e.type&&-1!==["actionscript","batchfile","c","c++","cpp","coffee","csharp","css","dart","django","ejs","erlang","golang","groovy","handlebars","haskell","haxe","html","ini","jade","java","javascript","json","less","lisp","lua","makefile","matlab","mysql","objectivec","pascal","perl","pgsql","php","python","r","ruby","sass","scala","scss","smarty","sql","sqlserver","stylus","svg","twig","vbscript","xml","yaml"].indexOf(e.format))return"ace"})),e.defaults.resolvers.unshift((function(e){if("string"===e.type&&-1!==["ip","ipv4","ipv6","hostname"].indexOf(e.format))return"ip"})),e.defaults.resolvers.unshift((function(e){if("string"===e.type&&"color"===e.format)return"colorpicker"})),e.defaults}(),Oe.defaults.themes.bootstrap4=D,Oe.AbstractEditor=q,Oe.AbstractTheme=H,Oe.AbstractIconLib=z,(V=Oe.defaults.editors).ace=G,V.array=J,V.arrayChoices=W,V.arraySelect2=Z,V.arraySelectize=Q,V.autocomplete=Y,V.base64=K,V.button=X,V.checkbox=ee,V.choices=ie,V.datetime=ne,V.describedBy=se,V.enum=ae,V.hidden=re,V.info=oe,V.integer=ce,V.ip=he,V.jodit=de,V.multiple=ue,V.multiselect=$,V.null=pe,V.number=le,V.object=me,V.radio=fe,V.sceditor=ge,V.select=te,V.select2=be,V.selectize=_e,V.signature=ye,V.simplemde=ve,V.starrating=we,V.string=U,V.table=Ee,V.upload=xe,V.uuid=Ce,V.colorpicker=ke,Oe.defaults.templates.default=je,Oe.defaults.iconlibs.fontawesome5=Ne,window.JSONEditor=Oe;var Se=U.extend({build:function(){if(this._super(),this.input){var e=this,t=this.input.parentNode,i=this.input.nextSibling,n=function(){var e=document.createElement("button");return e.type="button",e.className="btn btn-light",e.innerHTML=['<input type="file" style="position:absolute;opacity:0;left:0;top:0;bottom:0;width:40px" />','<i class="fas fa-cloud-upload-alt"></i>'].join(""),e}(),s=this.theme.getInputGroup(this.input,[n]);this.progress=function(){var e=document.createElement("div");return e.style=["transition: all .5s;position:absolute;left:0;bottom:0px;z-index:9;","height:2px;background:#007bff;border-radius:1px;width:0"].join(""),e}(),t.insertBefore(s,i),s.insertBefore(this.progress,n.parentNode),n.firstChild.addEventListener("change",(function(t){console.log(t),t.preventDefault(),t.stopPropagation(),this.files&&this.files.length&&e.uploadFile(this.files[0])}))}},uploadFile:function(e){var t=window.formUploader||window.fileUploader;if(t){var i=this;t(e,i.path,{progress:function(e){i.progress.style.opacity="1",i.progress.style.width="".concat(e,"%")},success:function(e){i.progress.style.width="100%",i.progress.style.opacity="0",i.setValue(e),setTimeout((function(){i.progress.style.width="0"}),600)},fail:function(e){i.progress.style.width="0",window._LEGO_UTILS_?window._LEGO_UTILS_.toast(e):alert(e)}})}},afterInputReady:function(){}}),Te=U.extend({build:function(){if(this._super(),this.input){var e=this,t=document.createElement("div");this.switchInput=this.theme.getFormInputField("checkbox"),this.switchInput.className="custom-control-input",this.switchInput.id="switch_"+this.formname,t.className="form-control custom-control custom-switch",t.style="border:none",t.innerHTML='<label class="custom-control-label" for="switch_'.concat(this.formname,'"></label>'),t.insertBefore(this.switchInput,t.firstChild),this.input.parentNode.insertBefore(t,this.input),this.input.setAttribute("type","hidden"),this.switchInput.addEventListener("change",(function(t){e.setValue(t.target.checked)}))}},setValue:function(e){this.switchInput.nextSibling.innerHTML=e,this.switchInput.checked=e,this.value=e,this.input.value=e,this.onChange(!0)}});window.Choices=j.a,Oe.defaults.theme="bootstrap4",Oe.defaults.options.iconlib="fontawesome5",Oe.defaults.options.ace={theme:"ace/theme/monokai"},Oe.defaults.options.choices={shouldSort:!1,searchEnabled:!1,itemSelectText:""},Oe.defaults.options.sceditor={style:"/lego-src/lib/sceditor/content.min.css",plugins:"dragdrop",emoticonsEnabled:!1,icons:"monocons",height:400,toolbar:["bold,italic,underline","font,size,color,removeformat","left,center,right,justify","bulletlist,orderedlist,table,code,quote","image,link,unlink","maximize,source"].join("|"),dragdrop:{allowedTypes:["image/jpeg","image/png","image/gif"],handleFile:function(e,t){var i=window.formUploader||window.fileUploader;if(i){var n=t();i(e,"wysiwyg",{success:function(e){n.insert('<img src="'.concat(e,'" />'))},progress:function(e){console.log(e)},fail:function(e){n.cancel(),alert(e)}})}}}},Oe.defaults.resolvers.unshift((function(e){if("string"===e.type&&"upload"===e.format)return"uploadFile"})),Oe.defaults.resolvers.unshift((function(e){if("boolean"===e.type&&"switch"===e.format)return"switchBool"})),Oe.defaults.editors.uploadFile=Se,Oe.defaults.editors.switchBool=Te;var Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e){var n=Object.assign({disable_edit_json:!0,disable_properties:!0,schema:t},i);return window._editor_=new Oe(e,n)}return null},Ae={"(name)":"\u540d\u79f0","(desc)":"\u63cf\u8ff0","(cate)":"\u5206\u7c7b","(shop)":"\u5546\u5bb6","(show)":"\u663e\u793a","(price|sale)":"\u4ef7\u683c","(url|link)":"\u94fe\u63a5","(product)":"\u5546\u54c1","(hot)":"\u70ed\u5ea6","(order)":"\u6392\u5e8f","(image|img|pic)":"\u56fe\u7247","(state|status)":"\u72b6\u6001","(start)":"\u5f00\u59cb\u65f6\u95f4","(end)":"\u7ed3\u675f\u65f6\u95f4","(time|datetime)":"\u65f6\u95f4","(date)":"\u65e5\u671f","(range)":"\u8303\u56f4","(focus)":"\u7126\u70b9\u56fe","(comment)":"\u8bc4\u8bba","(num)":"\u6570\u91cf","(color)":"\u989c\u8272","(game)":"\u6e38\u620f","(pay|buy)":"\u652f\u4ed8","(amt|amount)":"\u91d1\u989d","(detail)":"\u8be6\u60c5","(click)":"\u70b9\u51fb","(rank)":"\u6392\u884c"},Ie=function(e){for(var t in Ae)if(new RegExp(t,"i").test(e))return Ae[t];return e},Pe=function(e){return"object"==typeof e?"[object Array]"===toString.call(e)?"array":"object":typeof e},Ve={number:function(e){return{type:"number",format:"number",title:Ie(e),options:{grid_columns:3}}},boolean:function(e){return{type:"boolean",format:"boolean",title:Ie(e),options:{grid_columns:3}}},string:function(e,t){var i={type:"string"};switch(i.title=Ie(e),i.format="text",i.options={grid_columns:3},!0){case/\.(jpe?g|png|gif)$/.test(t):i.format="upload",i.links=[{rel:"",href:"{{self}}",mediaType:"image"}];break;case/\.(exe|swf|zip|rar|docx?|pptx?|xlsx?)$/.test(t):i.format="upload",i.download=!0;break;case/\.mp4$/.test(t):i.format="upload",i.links=[{rel:"",href:"{{self}}",mediaType:"video/mp4"}];break;case/^[12]\d{3}-\d{2}-\d{2} [\d:]{8}$/.test(t):i.format="datetime-local",i.options.flatpickr={wrap:!0,showClearButton:!0,time_24hr:!0,allowInput:!1};break;default:i.format="text"}return i},object:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={};for(var s in n.title=Ie(e),n.type="object",n.format="grid",n.properties={},n.options=i,t)n.properties[s]=Ve[Pe(t[s])](s,t[s]);return n},array:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={};return n.title=Ie(e),n.type="array",n.items={},n.options=i,void 0!==t[0]&&(n.items=Ve[Pe(t[0])](e,t[0])),n}},Re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u8868\u5355\u6807\u9898";try{var i="string"==typeof e?JSON.parse(e):e;return Ve[Pe(i)](t,i,{disable_collapse:!0})}catch(n){return console.warn(n),{title:"\u6570\u636e\u89e3\u6790\u51fa\u9519\uff0c\u8bf7\u8fd4\u56de\u91cd\u8bd5",properties:{}}}},Fe=function(e){var t=window.location.search;return t.length?(t.match(new RegExp("[?&]"+e+"=([^&]+)"))||[""]).pop():""},Be=function(e){var t={};return e||(e=window.location.search),e.length<2?{}:(e.replace(/^\?/,"").split("&").forEach((function(e){var i=e.split("=");t[i[0]]=i[1]})),t)},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET",t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s={};return s.method="GET"===e.toUpperCase()?"GET":"POST",s.url=t,"GET"===s.method?s.params=i:s.data="json"===n.type?i:g.a.stringify(i),new Promise((function(e,t){m()(s).then((function(i){var n=i.data;0===n.code?e(n):("300"===String(n.code)&&window.location.replace("/lego/login"),t(n))})).catch((function(e){t({code:-1,msg:String(e),data:null})}))}))},ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,i=document.createElement("div");i.className="lego-toast",i.innerHTML=e,document.body.appendChild(i),setTimeout((function(){document.body.removeChild(i)}),t)},Me=function(e){var t=document.createElement("script"),i="ext_"+Date.now().toString(16);return t.innerHTML="window.".concat(i," = (function () {\n    try {\n      ").concat(e,"\n    } catch (err) { console.warn('ExtJs Error -', err) }\n  })()"),document.body.appendChild(t),[i,t]},De=function(e,t){var i=Be()||{};return t&&(i=Object.assign(i,t)),e.replace(/\{\{[^}]+\}\}/g,(function(e){var t=e.slice(2,-2);return"".concat(i[t]||"")}))},qe=function(e,t){return(/^(http|\/\/)/.test(t)?"":e)+t},Ue=function(e,t){if(e&&0!==t.length){t=0===t.indexOf(".")?t:".".concat(t);for(var i=Object.assign({},e),n=t.match(/\.{1,2}[^.]+/g),s=function(e){var t=n[e],s=t.replace(/\./g,"");if(0===t.indexOf("..")){if(!Array.isArray(i))return{v:void 0};i=i.map((function(e){return e[s]}))}else{if(!i||!i.hasOwnProperty(s))return{v:void 0};i=i[s]}},a=0;a<n.length;a++){var r=s(a);if("object"===typeof r)return r.v}return i}},Ge=function(e){return e.replace(new RegExp("^".concat("/lego","/")),"/")},Je=function(e,t){var i=new Date(parseInt(e));t=t||"yyyy-MM-dd hh:mm:ss";var n={"M+":i.getMonth()+1,"d+":i.getDate(),"h+":i.getHours(),"m+":i.getMinutes(),"s+":i.getSeconds(),"q+":Math.floor((i.getMonth()+3)/3),S:i.getMilliseconds()};for(var s in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(i.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[s]:("00"+n[s]).substr((""+n[s]).length)));return t},$e=function(e){return(new _.a).update(e).digest("hex")},We=window.self!==window.top;window._LEGO_UTILS_={popup:C,parseUrl:Be,toast:ze,copy:function(e){var t=window.$,i=t("<textarea style='width:0;height:0'>".concat(e,"</textarea>"));t("body").append(i),i[0].select(),document.execCommand("Copy"),i.remove(),ze("\u590d\u5236\u6210\u529f\u300c".concat(e,"\u300d"))},md5:$e,dateFormat:Je,kv:Fe};var Ze=function(e){var t=e.children,i=Object(o.useState)(!1),n=Object(r.a)(i,2),s=n[0],a=n[1];return l.a.createElement(l.a.Fragment,null,!We&&l.a.createElement(Xe,{fold:s}),l.a.createElement("div",{className:"frame-body"+(We?" frame-hide-nav":"")},!We&&l.a.createElement(Ke,{fold:s,onSwitchAside:function(){return a(!s)}}),t))},Qe=function(e){var t=e.children,i=e.title,n=void 0===i?"":i,s=e.loading,a=void 0!==s&&s;return l.a.createElement("div",{className:"wrap"},n.length>0&&l.a.createElement("div",{className:"sitepath"},n),l.a.createElement("div",{className:"main-content",style:{padding:We?0:null}},a?l.a.createElement("div",{className:"lego-card"},"loading..."):t))},Ye=l.a.createContext({}),Ke=function(e){var t=e.fold,i=e.onSwitchAside,n=Object(o.useContext)(Ye),s=n._admin,a=n._user;return l.a.createElement("nav",{className:"frame-nav"},l.a.createElement("div",{className:"nav-switch-aside",onClick:i},l.a.createElement("i",{className:"fas fa-"+(t?"indent":"outdent")})),l.a.createElement("div",{style:{flex:1}}),a&&l.a.createElement("div",{className:"nav-user"},l.a.createElement("i",{className:"fas fa-user"}),"\u6b22\u8fce\u4f60\uff0c",a),s&&l.a.createElement("div",{className:"nav-dropdown"},l.a.createElement("i",{className:"fas fa-th-large dropdown-icon"}),l.a.createElement("ul",{className:"nav-dropdown-menu"},l.a.createElement("li",null,l.a.createElement(d.b,{to:"/form/list"},l.a.createElement("i",{className:"fas fa-th-list"}),l.a.createElement("span",null,"\u8868\u5355\u7ba1\u7406"))),l.a.createElement("li",null,l.a.createElement(d.b,{to:"/table/list"},l.a.createElement("i",{className:"fas fa-table"}),l.a.createElement("span",null,"\u5217\u8868\u7ba1\u7406"))),l.a.createElement("li",null,l.a.createElement(d.b,{to:"/chart/list"},l.a.createElement("i",{className:"fas fa-chart-line"}),l.a.createElement("span",null,"\u56fe\u8868\u7ba1\u7406"))),l.a.createElement("li",null,l.a.createElement(d.b,{to:"/board/list"},l.a.createElement("i",{className:"fas fa-tachometer-alt"}),l.a.createElement("span",null,"\u9762\u677f\u7ba1\u7406"))),l.a.createElement("li",null,l.a.createElement(d.b,{to:"/setting"},l.a.createElement("i",{className:"fas fa-cog"}),l.a.createElement("span",null,"\u7cfb\u7edf\u8bbe\u7f6e"))))))},Xe=function(e){var t=e.fold,i=Object(o.useContext)(Ye),n=i.name,s=i._menu,a=void 0===s?[]:s,c=Object(o.useState)(null),h=Object(r.a)(c,2),u=h[0],p=h[1],m=["edit","laptop","gem","th-list","newspaper","map","network-wired","desktop","list","parachute-box","microsoft","paper-plane","cube"],f=function(e){var t=e.idx;return e.to?l.a.createElement(d.c,{className:"link",activeClassName:"active",to:Ge(e.to),onClick:function(){return p(u===t?null:t)}},e.children):l.a.createElement("div",{className:"link"+(u===t?" active":""),onClick:function(){return p(u===t?null:t)}},e.children)};return l.a.createElement("aside",{className:"frame-aside"+(t?" frame-aside-fold":"")},l.a.createElement("h1",{className:n?"name-show":""},l.a.createElement(d.b,{to:"/"},l.a.createElement("i",{className:"fas fa-cubes"}),l.a.createElement("span",null,n||""))),l.a.createElement("ul",{className:"side-menu"},a.map&&a.map((function(e,t){return l.a.createElement("li",{className:"item-v1",key:t},l.a.createElement(f,{idx:t,to:e.url},l.a.createElement("i",{className:"icon fas fa-"+(e.icon||m[t])}),l.a.createElement("span",null,e.name),e.sub&&l.a.createElement("i",{className:"arr fas fa-chevron-down"})),e.sub&&(i=e.sub,n=t,l.a.createElement("ul",{className:"sub-list",style:{height:(u===n?40*i.length+10:0)+"px"}},i.map((function(e,t){return l.a.createElement("li",{className:"item-v2",key:t},l.a.createElement(d.c,{activeClassName:"active",to:Ge(e.url||""),isActive:function(t,i){var s=!!t;return s||e.url&&"/"!==i.pathname&&(s=e.url===i.pathname+i.search),s&&null===u&&p(n),s}},e.name))})))));var i,n}))))},et=i(20),tt=i(60),it={zh:{admin_name:"\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf",submit_success:"\u63d0\u4ea4\u6210\u529f",handle_success:"\u64cd\u4f5c\u6210\u529f",handle_fail:"\u64cd\u4f5c\u5931\u8d25",operation:"\u64cd\u4f5c",submit:"\u63d0\u4ea4",back:"\u8fd4\u56de",order:"\u6392\u5e8f",loading:"\u52a0\u8f7d\u4e2d...",load_success:"\u52a0\u8f7d\u6210\u529f",load_fail:"\u52a0\u8f7d\u5931\u8d25",no_data:"\u6682\u65e0\u6570\u636e",please_enter:"\u8bf7\u8f93\u5165",search:"\u67e5\u8be2",confirm:"\u786e\u8ba4",usr:"\u7528\u6237\u540d",pwd:"\u5bc6\u7801",usr_pwd_empty:"\u7528\u6237\u540d\u548c\u5bc6\u7801\u4e0d\u5f97\u4e3a\u7a7a",login:"\u767b \u5f55",form_invalid:"\u65e0\u6548\u8868\u5355",form_validate_fail:"\u8868\u5355\u586b\u5199\u6709\u8bef",table_selected_number:function(e){return e>0?"\u5df2\u9009".concat(e,", "):""},table_list_total:function(e){return"\u5171".concat(e,"\u6761\u6570\u636e")}},en:{admin_name:"Admin",submit_success:"Submission successful",handle_success:"Operation successful ",handle_fail:"Operation failed",operation:"Operation",submit:"Submit",back:"Back",order:"Order",loading:"Loading...",load_success:"Load Success",load_fail:"Load Fail",no_data:"No Data",please_enter:"Please Enter ",search:"Search",confirm:"Confirm",usr:"Username",pwd:"Password",usr_pwd_empty:"Username and password can't be empty",login:"LOGIN",form_invalid:"Invalid",form_validate_fail:"Form Validate Fail",table_selected_number:function(e){return e>0?"".concat(e," Selected, "):""},table_list_total:function(e){return"".concat(e," In Total")}}},nt=function(e){var t=e.search,i=void 0===t?[]:t,n=e.toolbar,s=void 0===n?[]:n,a=e.onClickHandle,c=e.onSearch,h=Object(o.useState)(!1),d=Object(r.a)(h,2),u=d[0],p=d[1],m=Object(o.useRef)(null);Object(o.useEffect)((function(){p(!0)}),[]);return l.a.createElement("div",{className:"toolbar-row clearfix"},s.map((function(e,t){return function(e,t){switch(e.type){case"input":return l.a.createElement("input",{key:"".concat(e.key,"-").concat(t),name:e.key,style:{width:e.width?parseInt(e.width):void 0},className:"form-control mr-2",placeholder:"".concat(it.zh.please_enter).concat(e.name),id:"toolbar_input_".concat(e.key)});case"choices":var i=e.choices_opts.source_type,n="list"===i?e.choices_opts.source_data.split(";"):[];return u||setTimeout((function(){var t=new window.Choices("#toolbar_choices_".concat(e.key),{shouldSort:!1,itemSelectText:"",searchEnabled:n.length>10,choices:n.map((function(e){var t=e.split(":"),i=Object(r.a)(t,3);return{value:i[0],label:i[1],selected:"true"===i[2]}}))});if("api"===i){var s=e.choices_opts.source_data;"function"===typeof window[s]&&window[s](t),delete window[s]}})),l.a.createElement("select",{key:"".concat(e.key,"-").concat(t),id:"toolbar_choices_".concat(e.key),name:e.key,className:"form-control"});case"datepicker":var s=e.datepicker_opts,o=s.mode,c=s.showtime,h=s.format;return u||setTimeout((function(){window.flatpickr("#toolbar_datepicker_".concat(e.key),{enableTime:c,dateFormat:h,wrap:!0,mode:o})})),l.a.createElement("div",{id:"toolbar_datepicker_".concat(e.key),key:"".concat(e.key,"-").concat(t),className:"input-group mr-2",style:{float:"left",width:"auto"}},l.a.createElement("div",{className:"input-group-prepend",style:{cursor:"pointer"},"data-toggle":!0},l.a.createElement("div",{className:"input-group-text bg-white"},e.name)),l.a.createElement("input",{name:e.key,style:{width:e.width?parseInt(e.width):120*("range"===o?2:1)},className:"form-control",autoComplete:"off","data-input":!0}),l.a.createElement("div",{className:"input-group-append"},l.a.createElement("span",{type:"button",title:"Clear",className:"input-group-text bg-white","data-clear":!0},l.a.createElement("i",{className:"fas fa-times-circle"}))));case"button":var d=e.button_opts,p=d.style,f=d.url,g=d.icon,b=d.action;return l.a.createElement("button",{key:"".concat(e.key,"-").concat(t),id:"toolbar_button_".concat(e.key),className:"btn btn-".concat(p," mr-2"),style:{width:e.width?parseInt(e.width):void 0},onClick:function(){var t={},i=f.match(/{{multi-[^}]+}}/g),n=window.$;document.querySelectorAll(".toolbar-row .form-control").forEach((function(e){t[e.name.replace(/^search_/,"")]=e.value})),i&&i.forEach((function(e){var i=e.match(/{{(multi-[^}]+)}}/).pop(),s=n(".".concat(i,"-col")).filter(".fa-check-square");t[i]=n.map(s,(function(e){return n(e).attr("data")})).join(",")})),a(t,{name:e.name,url:f,action:b})}},g&&l.a.createElement("i",{style:{marginRight:6},className:"fas fa-"+g}),l.a.createElement("span",null,e.name));case"custom":window._lego_table_data_&&(m.current=window._lego_table_data_);var _=e.custom_opts.html.replace(/{{([^}]+)}}/gi,(function(e,t,i,n){return Ue(m.current,t)}));return l.a.createElement("div",{className:"toolbar-custom mr-2",key:"".concat(e.key,"-").concat(t),id:"toolbar_custom_".concat(e.key),style:{width:e.width?parseInt(e.width):void 0},dangerouslySetInnerHTML:{__html:_}});case"break":return l.a.createElement("div",{key:e.key,style:{float:"left",width:"100%"}});default:return null}}(e,t)})),i.map((function(e){return l.a.createElement("input",{key:e.key,name:"search_".concat(e.key),className:"form-control mr-2",id:"toolbar_search_".concat(e.key),placeholder:"".concat(it.zh.please_enter).concat(e.name)})})),i.length+s.filter((function(e){var t=e.key;return/^search_/.test(t)})).length>0&&l.a.createElement("button",{onClick:function(){var e={};document.querySelectorAll(".toolbar-row .form-control").forEach((function(t){0===t.name.indexOf("search_")&&(e[t.name.slice(7)]=t.value)})),c(e)},className:"btn btn-success"},it.zh.search))},st=(i(107),i(108),["file-alt","podcast","paper-plane","bookmark","database","columns","cube","bullseye","calendar"]),at=Object(u.f)((function(e){var t=e.config,i=t&&t.base&&t.cols,n=Object(o.useContext)(Ye),s=Fe("pageNo")||1,a=!!parseInt(Fe("auto")||"1"),c=Object(o.useState)([]),h=Object(r.a)(c,2),d=h[0],u=h[1],p=Object(o.useState)(a),m=Object(r.a)(p,2),f=m[0],g=m[1],b=Object(o.useState)(""),_=Object(r.a)(b,2),y=_[0],v=_[1],w=Object(o.useState)({}),E=Object(r.a)(w,2),x=E[0],k=E[1],j=Object(o.useState)(null),N=Object(r.a)(j,2),O=N[0],S=N[1],T=Object(o.useState)(s),L=Object(r.a)(T,2),A=L[0],I=L[1],P=Object(o.useState)(0),V=Object(r.a)(P,2),R=V[0],F=V[1],B=Object(o.useState)(!0),H=Object(r.a)(B,2),z=H[0],M=H[1],D=Object(o.useRef)(A);if(Object(o.useEffect)((function(){var e=window.$;if(i&&void 0!==n.baseUrl&&(a||Object.keys(x).length>0)){var s=qe(n.baseUrl,t.base.api);He("GET",De(s,Object(et.a)(Object(et.a)({sort:y},x),{},{pageNo:A}))).then((function(i){u(Ue(i,t.base.path)||[]);var n=window._pageFix_||function(){};S(n(i.data)||i.data.page),D.current!==A&&(D.current=A,document.querySelector(".main-content").scrollTop=0),e(".multi-box").on("click",(function(){this.className.indexOf("check")>0?(this.classList.remove("fa-check-square"),this.classList.add("fa-square")):(this.classList.remove("fa-square"),this.classList.add("fa-check-square")),F(e(".table-tbody .fa-check-square").length)})),window._lego_table_data_=i.data,g(!1)})).catch((function(e){ze(e.desc||e.msg||it.zh.load_fail),g(!1),console.log(e)}))}return function(){e(".multi-box").off("click"),F(0),e(".table-list .fa-check-square").removeClass("fa-check-square").addClass("fa-square"),delete window._lego_table_data_}}),[i,a,n.baseUrl,t.base,y,x,A,z]),!i)return l.a.createElement("div",null,"data or config error...");function q(t,i){var s=De(i.url,t);switch(s=De(s,t),i.action){case"open":window.open(s);break;case"link":/^\/(form|table|chart|board)\//.test(s)?e.history.push(s):window.location.assign(s);break;case"api":s=qe(n.baseUrl,s);var a=!1;(/[?&]handle_confirm=0$/.test(s)||window.confirm("".concat(it.zh.confirm).concat(i.name).concat(t.name?" ["+t.name+"] ":"","\uff1f")))&&(a=!0),a&&He("POST",s.replace(/[?&]handle_confirm=0$/,"")).then((function(e){ze(it.zh.handle_success),M(!z),console.log(e)})).catch((function(e){ze(e.desc||e.msg||it.zh.handle_fail),console.warn(e)}));break;case"popup":C.show(s).then((function(){return M(!z)}));break;case"script":window.location.assign("javascript:".concat(s));break;default:console.log(i)}}var U=t.cols,G=void 0===U?[]:U,J=t.handles,$=void 0===J?[]:J,W=$.length>0,Z=t.cols.filter((function(e){return-1!==e.fn.indexOf("search")}));return l.a.createElement("div",null,!f&&l.a.createElement(nt,{toolbar:t.toolbar,search:Z,onClickHandle:q,onSearch:function(e){I(1),k(e)}}),l.a.createElement("table",{className:"table-list"},l.a.createElement("thead",{className:"table-thead"},l.a.createElement("tr",null,G.map((function(e){var t=e.key,i=!1,n="sort";if(e.fn.indexOf("sort")>=0)switch(i=!0,y){case"".concat(t,"-asc"):n="caret-up";break;case"".concat(t,"-desc"):n="caret-down";break;default:n="sort"}return l.a.createElement("th",{className:"table-th"+(i?" th-sort":""),key:t,width:e.width?e.width:void 0,onClick:function(){i&&v(y==="".concat(t,"-desc")?"".concat(t,"-asc"):"".concat(t,"-desc"))}},e.fn.indexOf("multi")>=0&&l.a.createElement("i",{className:"far fa-square",onClick:function(e){var i=e.target,n=window.$;i.className.indexOf("check")>0?(i.className="far fa-square",n(".multi-".concat(t,"-col")).removeClass("fa-check-square").addClass("fa-square"),F(0)):(i.className="far fa-check-square",n(".multi-".concat(t,"-col")).removeClass("fa-square").addClass("fa-check-square"),F(n(".table-tbody .fa-check-square").length)),e.stopPropagation()}}),l.a.createElement("span",null,e.name||t),i&&l.a.createElement("em",{title:it.zh.order,className:"fas fa-"+n}))})),W&&l.a.createElement("th",{width:function(e){var t=0,i=0,n=e.length;return e.forEach((function(e){var n=e.icon,s=e.name;"none"!==n&&t++,i+=s.length-.55*(s.match(/\w+/g)||[]).join("").length})),Math.min(18*t+14*i+15*n+20,350)}($)},it.zh.operation))),l.a.createElement("tbody",{className:"table-tbody"},0===d.length?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:G.length+(W?1:0)},f?it.zh.loading:it.zh.no_data)):d.map((function(e,t){return l.a.createElement("tr",{key:t},G.map((function(t){var i=function(e,t){switch(e){case"image":return'<a href="'.concat(t,'" target="_blank"><img src="').concat(t,'" style="height:120px;margin:10px 0;" /></a>');case"datetime":return Je(t);case"date":return Je(t,"yyyy-MM-dd");case"time":return Je(t,"hh:mm:ss");case"cny":return(t/100).toFixed(2);case"audio":return'<div style="height:35px"><audio style="height:35px;outline:none" controls="controls" src="'.concat(t,'">\u6d4f\u89c8\u5668\u4e0d\u652f\u6301</audio></div>');case"video":return'<div style="height:150px;margin:10px 0"><video style="width:200px;height:150px;outline:none" controls="controls" src="'.concat(t,'" >\u6d4f\u89c8\u5668\u4e0d\u652f\u6301</video></div>');default:return t}}(t.fmt,void 0===e[t.key]?"--":e[t.key]);return"function"===typeof window._colFix_&&(i=window._colFix_(t.key,i,e)||i),t.fn.indexOf("multi")>=0&&(i='<i class="far fa-square multi-box multi-'.concat(t.key,'-col" data="').concat(encodeURIComponent(e[t.key]),'"></i>')+i),l.a.createElement("td",{key:t.key,dangerouslySetInnerHTML:{__html:i}})})),W&&l.a.createElement("td",null,$.map((function(t,i){var s=!0;if(t.show)try{s=new Function("data, account","return ".concat(t.show))(e,{user:n._user,group:n._group,admin:n._admin})}catch(a){console.warn(String(a)),s=!1}return!1!==s?l.a.createElement("span",{onClick:function(){return q(e,t)},key:i,className:"handle"},"none"!==t.icon&&l.a.createElement("i",{className:"fas fa-"+(t.icon||st[i])}),l.a.createElement("em",null,t.name)):null}))))})))),O&&O.total>O.pageSize&&l.a.createElement("div",{className:"pages"},l.a.createElement(tt.a,{onChange:function(e){return I(e)},total:O.total||0,showTotal:function(e){return"".concat(it.zh.table_selected_number(R)).concat(it.zh.table_list_total(e))},pageSize:O.pageSize||20,current:+A,prevIcon:l.a.createElement("i",{className:"fas fa-chevron-left"}),nextIcon:l.a.createElement("i",{className:"fas fa-chevron-right"})})))})),rt=(i(109),function(e){var t=e.config,n=Object(o.useRef)([]),s=Object(o.useRef)([]),a=Object(o.useContext)(Ye),c=Object(o.useCallback)((function(e,t,i){He("GET",De(t)).then((function(t){var n={title:{text:i.name,textStyle:{color:"#369",fontSize:16}},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},toolbox:function(){var e={};return i.toolbox.forEach((function(t){e[t]={},"magicType"===t&&(e.magicType.type=["line","bar","tiled"],e.restore={})})),{feature:e}}(),legend:{data:i.series.map((function(e){return e.name}))},xAxis:{data:i.xAxis.indexOf(",")>0?i.xAxis.split(","):Ue(t,i.xAxis)},yAxis:{},series:i.series.map((function(e){var i=e.name,n=e.type,s=e.label,a=e.path;return{name:i,type:n,label:{show:"1"===s,position:"top"},itemStyle:{color:e.color},data:Ue(t,a)}}))};e.setOption(n)}))}),[]);return Object(o.useEffect)((function(){var e=a.baseUrl;if(t&&void 0!==e){var o={},l=[];return Promise.all([i.e(0).then(i.t.bind(null,119,7)),Promise.all([i.e(0),i.e(1),i.e(2),i.e(10)]).then(i.t.bind(null,356,7)),Promise.all([i.e(0),i.e(1),i.e(2),i.e(9)]).then(i.t.bind(null,357,7)),Promise.all([i.e(0),i.e(8)]).then(i.t.bind(null,358,7)),Promise.all([i.e(0),i.e(1),i.e(7)]).then(i.t.bind(null,359,7)),Promise.all([i.e(0),i.e(12)]).then(i.t.bind(null,360,7)),Promise.all([i.e(0),i.e(6)]).then(i.t.bind(null,361,7)),Promise.all([i.e(0),i.e(11)]).then(i.t.bind(null,362,7))]).then((function(i){var a=Object(r.a)(i,1)[0];t.list.forEach((function(i,r){var h=n.current[r],d=s.current[r]=a.init(h,t.theme),u=qe(e,i.api);l.push(d),o["start_".concat(r)]=setTimeout((function(){c(d,u,i),i.refresh>0&&(o["refresh_".concat(r)]=setInterval((function(){c(d,u,i)}),1e3*i.refresh))}),200*r)}))})),function(){Object.keys(o).forEach((function(e){(/^start/.test(e)?clearTimeout:clearInterval)(o[e])})),l.forEach((function(e){e.dispose()}))}}}),[t,a.baseUrl,c]),l.a.createElement("div",{className:"charts-title"},l.a.createElement("h2",{className:"title"},t.name,l.a.createElement("span",{className:"desc"},t.desc)),l.a.createElement("div",{className:"row"},t.list.map((function(e,t){return l.a.createElement("div",{key:t,className:"col-md-".concat(e.grid)},l.a.createElement("div",{className:"chart-container",style:{height:e.height},ref:function(e){return n.current[t]=e}}))}))))}),ot=function(e){var t=e.value,i=e.extClass,n=e.onClick,s=["btn","btn-sm"];return i&&(s=s.concat(i.split(" "))),l.a.createElement("button",{className:s.join(" "),onClick:n},t)},lt=function(e){var t=e.schema,i=e.onUpdate,n=Object(o.useState)(Object.assign({title:"",type:"",format:"",options:{}},t)),s=Object(r.a)(n,2),a=s[0],c=s[1],h=Object(o.useRef)(null),d=Object(o.useRef)(null);return Object(o.useLayoutEffect)((function(){return d.current=new window.Choices("#formTypeSelect",{position:"bottom",shouldSort:!1}),function(){d.current.destroy()}}),[]),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-control-label"},"\u8868\u5355\u7c7b\u578b"),l.a.createElement("select",{id:"formTypeSelect",className:"form-control",value:a.format||a.type,onChange:function(e){var t=e.target.value,i={title:a.title,type:"string",format:t,options:{grid_columns:a.options.grid_columns}};switch(t){case"number":i.type="number";break;case"boolean":case"switch":i.type="boolean";break;case"choices":i.type="string",i.enum=["item1","item2","item3","item4"],i.options.enum_titles=["\u9009\u98791","\u9009\u98792","\u9009\u98793","\u9009\u98794"];break;case"datetime-local":case"date":case"time":i.type="integer",i.options.flatpickr={wrap:!0,showClearButton:!0,time_24hr:!0,allowInput:!1};break;case"upload":i.type="string",i.links=[{rel:"view",href:"{{self}}",mediaType:"image"}];break;case"range":i.type="number",i.minimum=1,i.maximum=100,i.step=2;break;default:i.type="string"}c(i)}},l.a.createElement("option",{value:"text"},"\u5355\u884c\u6587\u672c"),l.a.createElement("option",{value:"textarea"},"\u591a\u884c\u6587\u672c"),l.a.createElement("option",{value:"number"},"\u6570\u503c"),l.a.createElement("option",{value:"boolean"},"\u5e03\u5c14\u503c-\u4e0b\u62c9"),l.a.createElement("option",{value:"switch"},"\u5e03\u5c14\u503c-\u5f00\u5173"),l.a.createElement("option",{value:"choices"},"\u4e0b\u62c9\u6846"),l.a.createElement("option",{value:"datetime-local"},"\u65e5\u671f\u65f6\u95f4"),l.a.createElement("option",{value:"date"},"\u4ec5\u65e5\u671f"),l.a.createElement("option",{value:"time"},"\u4ec5\u65f6\u95f4"),l.a.createElement("option",{value:"upload"},"\u4e0a\u4f20\u56fe\u7247"),l.a.createElement("option",{value:"password"},"\u5bc6\u7801"),l.a.createElement("option",{value:"url"},"\u7f51\u5740"),l.a.createElement("option",{value:"range"},"\u6ed1\u52a8\u6761"),l.a.createElement("option",{value:"xhtml"},"\u5bcc\u6587\u672c\u7f16\u8f91\u5668"),l.a.createElement("option",{value:"json"},"\u4ee3\u7801\u7f16\u8f91\u5668-JSON"),l.a.createElement("option",{value:"html"},"\u4ee3\u7801\u7f16\u8f91\u5668-HTML"),l.a.createElement("option",{value:"java"},"\u4ee3\u7801\u7f16\u8f91\u5668-JAVA"),l.a.createElement("option",{value:"javascript"},"\u4ee3\u7801\u7f16\u8f91\u5668-JS")))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-control-label"},"Grid"),l.a.createElement("input",{className:"form-control",type:"number",min:"3",max:"12",onChange:function(e){var t=e.target.value,i=Object.assign({},a);i.options.grid_columns=parseInt(t)||3,c(i)},value:a.options.grid_columns||3}))),l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"form-group",style:{height:200}},l.a.createElement(ht,{type:"json",code:JSON.stringify(a,null,2),onReady:function(e){return h.current=e}}))),l.a.createElement("div",{className:"col-md-12",style:{textAlign:"right"}},l.a.createElement("button",{className:"btn btn-sm btn-outline-primary",onClick:function(){return window.open("https://github.com/json-editor/json-editor#json-editor")}},"\u5e2e\u52a9"),l.a.createElement("button",{className:"btn btn-sm btn-success",style:{marginLeft:10},onClick:function(){return i(JSON.parse(h.current.getValue()))}},"\u4fdd\u5b58")))},ct=(i(110),function(e){var t=e.schema,i=e.startval,n=e.show,s=void 0===n||n,a=e.editable,c=void 0!==a&&a,h=e.onReady,d=e.onSchemaUpdate,u=Object(o.useRef)(null),p=Object(o.useRef)(null),m=Object(o.useRef)(null),f=Object(o.useRef)(h),g=Object(o.useState)(!1),b=Object(r.a)(g,2),_=b[0],y=b[1],v=Object(o.useState)(null),w=Object(r.a)(v,2),E=w[0],x=w[1];return Object(o.useLayoutEffect)((function(){if(t){var e=i?{startval:i}:{},n=Le(u.current,t,e);return n&&"function"===typeof f.current&&f.current(n),function(){n&&n.destroy()}}}),[t,i]),t?l.a.createElement("div",{className:"form-view"+(c?" form-edit":"")},l.a.createElement("div",{style:{display:s?"block":"none"},ref:u,className:"schema-form",onClick:function(e){var i=e.target.dataset,n=i.schematype,s=i.schemapath;if(c&&s&&/string|integer|number|boolean/.test(n)){var a=function(e,t){if("root"===t)return e;for(var i=Object.assign({},e),n=t.split(".").slice(1),s=0,a=n.length;s<a;s++)"object"===i.type?i=i.properties[n[s]]:"array"===i.type&&(i=i.items);return i}(t,s);m.current=s,x(a)}}}),c&&l.a.createElement("div",{className:"schema-box"+(_?" schema-show":"")},l.a.createElement(ot,{key:"update",value:"\u66f4\u65b0\u81f3\u8868\u5355",onClick:function(){if("function"===typeof d){var e=null;try{e=JSON.parse(p.current.getValue())}catch(t){ze("Schema\u683c\u5f0f\u6709\u8bef\uff0c\u8bf7\u68c0\u67e5")}e&&d(e)}}}),l.a.createElement("div",{className:"switch-btn",title:"\u7f16\u8f91schema",onClick:function(){return y(!_)}},l.a.createElement("i",{className:"fa fa-angle-"+(_?"right":"left")})),l.a.createElement(ht,{type:"json",code:JSON.stringify(t,null,2),onReady:function(e){return p.current=e}})),c&&E&&l.a.createElement("div",{className:"popup-mask"},l.a.createElement("div",{className:"popup-main",style:{width:600,height:350,padding:15}},l.a.createElement("div",{className:"popup-hide",title:"\u5173\u95ed",onClick:function(){return x(null)}},l.a.createElement("i",{className:"fas fa-times"})),l.a.createElement(lt,{schema:E,onUpdate:function(e){d(function(e,t,i){var n=Object.assign({},e),s=t.split(".").slice(1);if("root"===t)return Object.assign({},i);for(var a=0,r=s.length-1;a<r;a++)"object"===n.type?n=n.properties[s[a]]:"array"===n.type&&(n=n.items);return n.properties[s[a]]=i,n}(t,m.current,e)),x(null)}})))):null}),ht=function(e){var t=e.code,i=void 0===t?"":t,n=e.type,s=void 0===n?"json":n,a=e.onReady,r=Object(o.useRef)(null),c=Object(o.useRef)(null);return Object(o.useEffect)((function(){var e=window.ace;c.current||(c.current=e.edit(r.current,{mode:"ace/mode/"+s}),c.current.setTheme("ace/theme/monokai"),"function"===typeof a&&a(c.current)),c.current.setValue(i,-1),c.current.resize()}),[i,s]),l.a.createElement("div",{style:{height:"100%"},ref:r})},dt={title:"\u7cfb\u7edf\u8bbe\u7f6e",type:"object",format:"grid",properties:{name:{title:"\u7cfb\u7edf\u540d\u79f0",type:"string",minLength:1,options:{grid_columns:2}},baseUrl:{title:"\u63a5\u53e3\u524d\u7f00",type:"string",options:{grid_columns:5,inputAttributes:{placeholder:"\u5982 https:/domain.com/api/ \u6216 /api/"}}},permissionApi:{title:"\u6743\u9650/\u83dc\u5355\u63a5\u53e3",type:"string",options:{grid_columns:5}},sideMenu:{title:"\u6743\u9650/\u83dc\u5355\u914d\u7f6e",type:"string",format:"javascript",default:'[\n  {\n    "name": "\u4e00\u7ea7\u83dc\u5355",\n    "url": "/v1/link/",\n    "icon": "gift"\n  },\n  {\n    "name": "\u4e00\u7ea7\u83dc\u5355",\n    "sub": [\n      {\n        "name": "\u4e8c\u7ea7\u83dc\u5355",\n        "url": "/v2/link/"\n      }\n    ]\n  }\n]',options:{grid_columns:12}},uploadFn:{title:"\u4e0a\u4f20\u65b9\u6cd5",type:"string",format:"javascript",default:"/**\n * \u5b9e\u73b0 window.fileUploader\n * \n * file \u6587\u4ef6\u5bf9\u8c61\n * path \u4e0a\u4f20\u8868\u5355\u5728schema\u4e2d\u7684\u8def\u5f84\uff0c\u5982 root.info.image\n * cbs \u5b9a\u4e49\u56de\u8c03\n * \n * cbs.progress: \u66f4\u65b0\u8fdb\u5ea6, int, \u503c\u4e3a0-100\uff08success\u65f6\u81ea\u52a8\u8bbe\u4e3a100\uff09\n * cbs.fail: \u5931\u8d25\u56de\u8c03, string, \u503c\u4e3a\u5931\u8d25\u8bf4\u660e\n * cbs.success: \u6210\u529f\u56de\u8c03, string, \u503c\u4e3a\u6587\u4ef6URI\n */\nwindow.fileUploader = function (file, path, cbs) {\n  setTimeout(() => {\n    cbs.progress(30);\n  }, 500);\n\n  setTimeout(() => {\n    cbs.success('//www.sogo.com/web/index/images/logo_440x140.v.4.png');\n  }, 2e3);\n};",options:{grid_columns:12}}}},ut={title:"\u521b\u5efa\u8868\u5355",type:"object",format:"grid",options:{disable_collapse:!0},properties:{name:{title:"\u8868\u5355\u540d\u79f0",type:"string",minLength:1,options:{grid_columns:3}},api:{title:"\u63d0\u4ea4API",type:"string",minLength:1,options:{grid_columns:3}},origin:{title:"\u6570\u636eAPI",type:"string",options:{grid_columns:3}},desc:{title:"\u8868\u5355\u5907\u6ce8",type:"string",options:{grid_columns:3}},json:{title:"\u6570\u636e\u793a\u4f8b",description:"\u8bf7\u586b\u5199\u6570\u636e\u793a\u4f8b\uff0c\u7cfb\u7edf\u6839\u636e\u6570\u636e\u7ed3\u6784\u81ea\u52a8\u751f\u6210schema",type:"string",format:"json",default:JSON.stringify({shop:"\u641c\u72d7\u81ea\u8425",name:"\u641c\u72d7\u7ffb\u8bd1\u7b14",desc:"\u9ad8\u6e05\u5f55\u97f3 \u8bed\u97f3\u8f6c\u6587\u5b57 \u540c\u58f0\u4f20\u8bd1 \u5f55\u97f3\u901f\u8bb0 \u5fae\u578b\u4fbf\u643a",show:!0,price:398,cate:"\u667a\u80fd\u4ea7\u54c1",time:"2019-08-01 18:26:42",state:"\u672a\u5f00\u552e",imgs:[{name:"\u7ffb\u8bd1\u5b9d",desc:"\u9ad8\u6e05\u5f55\u97f3 \u8bed\u97f3\u8f6c\u6587\u5b57",color:"\u84dd\u8272",url:"//mall02.sogoucdn.com/image/2019/03/08/20190308130338_4522.jpg"}]},null,2),options:{grid_columns:12}}}},pt={title:"\u521b\u5efa\u5217\u8868",type:"object",format:"grid",options:{disable_collapse:!0},properties:{base:{type:"object",title:"\u57fa\u7840\u914d\u7f6e",format:"grid",properties:{name:{title:"\u540d\u79f0",type:"string",minLength:1,options:{grid_columns:3}},api:{type:"string",title:"\u6570\u636e\u6e90",options:{grid_columns:3}},path:{type:"string",title:"\u6570\u636e\u8def\u5f84",default:"data.list",options:{grid_columns:3}},desc:{title:"\u5907\u6ce8",type:"string",options:{grid_columns:3}}}},cols:{type:"array",title:"\u5217\u8868\u5b57\u6bb5",format:"table",minItems:1,options:{collapsed:!0},items:{title:"\u5217",type:"object",properties:{key:{type:"string",options:{input_width:"150px"}},name:{title:"\u540d\u79f0",type:"string",options:{input_width:"150px"}},fmt:{title:"\u683c\u5f0f\u5316",type:"string",enum:["none","image","datetime","date","time","cny","audio","video"],options:{enum_titles:["\u65e0","\u56fe\u7247","\u65e5\u671f\u65f6\u95f4","\u4ec5\u65e5\u671f","\u4ec5\u65f6\u95f4","\u91d1\u989d","\u97f3\u9891","\u89c6\u9891"],input_width:"120px"}},width:{title:"\u5217\u5bbd\uff08\u9009\u586b\uff09",type:"string",options:{input_width:"120px"}},fn:{title:"\u529f\u80fd",type:"array",format:"choices",uniqueItems:!0,items:{type:"string",enum:["search","sort","multi"],options:{enum_titles:["\u641c\u7d22","\u6392\u5e8f","\u591a\u9009"]}}}}}},handles:{title:"\u6570\u636e\u64cd\u4f5c",type:"array",format:"table",options:{collapsed:!0},items:{type:"object",properties:{name:{title:"\u540d\u79f0",type:"string"},icon:{title:"\u56fe\u6807\uff08\u9009\u586b\uff09",type:"string"},url:{title:"URL",type:"string"},show:{title:"\u663e\u9690\u63a7\u5236",type:"string"},action:{title:"\u884c\u4e3a",type:"string",enum:["link","open","popup","api","script"],options:{enum_titles:["\u5185\u9875\u6253\u5f00","\u65b0\u7a97\u6253\u5f00","\u5f39\u7a97\u6d6e\u5c42","\u63a5\u53e3\u8bf7\u6c42","\u6267\u884c\u811a\u672c"],input_width:"180px"}}}}},toolbar:{type:"array",title:"\u5de5\u5177\u680f\u914d\u7f6e",format:"tabs-top",options:{collapsed:!0},items:{type:"object",format:"grid",headerTemplate:"{{ self.name }}",properties:{type:{title:"\u7c7b\u578b",type:"string",enum:["input","choices","datepicker","button","custom","break"],options:{enum_titles:["\u8f93\u5165\u6846","\u4e0b\u62c9\u6846","\u65f6\u95f4\u9009\u62e9","\u6309\u94ae","\u81ea\u5b9a\u4e49","\u6362\u884c"],grid_columns:3}},name:{title:"\u540d\u79f0",type:"string",options:{grid_columns:3}},key:{title:"Key\uff08\u5fc5\u586b\u4e14\u4e0d\u80fd\u91cd\u590d\uff09",description:'\u67e5\u8be2\u5b57\u6bb5\u4ee5"search_"\u5f00\u5934',type:"string",minLength:1,options:{grid_columns:3}},width:{title:"\u5bbd\u5ea6\uff08\u4e3a\u7a7a\u65f6\u81ea\u9002\u5e94\uff09",type:"string",default:"",options:{grid_columns:3}},choices_opts:{title:"\u914d\u7f6e",type:"object",format:"grid",options:{disable_collapse:!0,grid_columns:12,dependencies:{type:"choices"}},properties:{source_type:{title:"\u6570\u636e\u6e90\u7c7b\u578b",type:"string",enum:["list","api"],options:{enum_titles:["\u56fa\u5b9a\u5217\u8868","\u63a5\u53e3\u8bfb\u53d6"],grid_columns:4}},source_data:{title:"\u6570\u636e\u5185\u5bb9",description:"\u300c\u56fa\u5b9a\u5217\u8868\u300d\u4ee5\u591a\u7ec4value:display\u5206\u53f7\u9694\u5f00\uff0c\u300c\u63a5\u53e3\u8bfb\u53d6\u300d\u586b\u5199\u51fd\u6570\u540d\uff08\u89c1\u5e2e\u52a9\uff09",type:"string",options:{grid_columns:8}}}},datepicker_opts:{title:"\u914d\u7f6e",type:"object",format:"grid",options:{disable_collapse:!0,grid_columns:12,dependencies:{type:"datepicker"}},properties:{mode:{title:"\u6a21\u5f0f",type:"string",enum:["single","range"]},format:{title:"\u683c\u5f0f\u5316\uff08Y-m-d H:i:S\uff09",type:"string",default:"Y-m-d"},showtime:{title:"\u9009\u62e9\u65f6\u95f4",type:"boolean",format:"switch"}}},button_opts:{title:"\u914d\u7f6e",type:"object",format:"grid",options:{disable_collapse:!0,dependencies:{type:"button"}},properties:{style:{title:"\u98ce\u683c",type:"string",enum:["primary","info","success","danger","outline-primary","outline-info","outline-success","outline-danger"],options:{grid_columns:3}},url:{title:"URL",type:"string",options:{grid_columns:3}},icon:{title:"\u56fe\u6807\uff08\u9009\u586b\uff09",type:"string",options:{grid_columns:3}},action:{title:"\u884c\u4e3a",type:"string",enum:["link","open","popup","api","script"],options:{enum_titles:["\u5185\u9875\u6253\u5f00","\u65b0\u7a97\u6253\u5f00","\u5f39\u7a97\u6d6e\u5c42","\u63a5\u53e3\u8bf7\u6c42","\u6267\u884c\u811a\u672c"],grid_columns:3}}}},custom_opts:{title:"\u914d\u7f6e",type:"object",format:"grid",options:{disable_collapse:!0,dependencies:{type:"custom"}},properties:{html:{title:"HTML",type:"string",format:"textarea",options:{grid_columns:12}}}}}}}}},mt={title:"\u521b\u5efa\u56fe\u8868",type:"object",format:"grid",options:{disable_collapse:!0},properties:{name:{title:"\u540d\u79f0",type:"string",minLength:1,options:{grid_columns:3}},theme:{title:"\u914d\u8272",type:"string",format:"choices",enum:["light","dart"],options:{grid_columns:3}},desc:{title:"\u5907\u6ce8",type:"string",options:{grid_columns:6}},list:{title:"\u56fe\u8868\u96c6",type:"array",format:"tabs-top",minItems:1,options:{disable_collapse:!0},items:{title:"\u56fe\u8868",type:"object",format:"grid",headerTemplate:"{{self.name}}",properties:{name:{type:"string",title:"\u540d\u79f0",options:{grid_columns:3}},api:{type:"string",title:"\u6570\u636e\u6e90",options:{grid_columns:3}},xAxis:{type:"string",title:"\u6a2a\u5750\u6807",options:{inputAttributes:{placeholder:"\u586b\u5199path\u53d6\u503c\u6216\u7528\u9017\u53f7\u5206\u9694"},grid_columns:3}},refresh:{type:"number",title:"\u5b9a\u65f6\u5237\u65b0(\u79d2)",enum:[0,5,15,30,60],options:{grid_columns:3}},grid:{type:"number",format:"number",title:"Grid",default:6,options:{grid_columns:3}},height:{type:"number",format:"number",title:"\u9ad8\u5ea6",default:350,options:{grid_columns:3}},toolbox:{title:"\u5de5\u5177\u680f",type:"array",format:"select",uniqueItems:!0,items:{type:"string",enum:["saveAsImage","dataZoom","magicType"]},options:{grid_columns:6}},series:{type:"array",format:"table",title:"\u7cfb\u5217",minItems:1,options:{disable_collapse:!0},items:{type:"object",properties:{name:{type:"string",title:"\u540d\u79f0",options:{input_width:"150px"}},path:{type:"string",title:"\u8def\u5f84",options:{inputAttributes:{placeholder:"\u5982 data.series.pv"}}},type:{type:"string",title:"\u7c7b\u578b",enum:["line","bar","pie"],options:{enum_titles:["\u6298\u7ebf\u56fe","\u67f1\u72b6\u56fe","\u997c\u72b6\u56fe"],input_width:"160px"}},color:{type:"string",title:"\u989c\u8272\uff08\u53ef\u9009\uff09",options:{input_width:"150px",inputAttributes:{placeholder:"\u5982 #d48265"}}},label:{type:"string",title:"\u663e\u793a\u6570\u503c",enum:["1","0"],options:{enum_titles:["\u663e\u793a","\u9690\u85cf"],input_width:"150px"}}}}}}}}}},ft={title:"\u521b\u5efa\u9762\u677f",type:"object",format:"grid",options:{disable_collapse:!0},properties:{name:{title:"\u540d\u79f0",type:"string",minLength:1,options:{grid_columns:4}},mode:{title:"\u6837\u5f0f",type:"string",enum:["tiled","tab"],options:{enum_titles:["\u5e73\u94fa\u533a\u5757","\u6807\u7b7e\u5207\u6362"],grid_columns:4}},desc:{title:"\u5907\u6ce8",type:"string",options:{grid_columns:4}},list:{title:"\u533a\u5757\u5217\u8868",type:"array",format:"tabs-top",minItems:1,options:{disable_collapse:!0},items:{type:"object",title:"\u533a\u5757",format:"grid",headerTemplate:"{{ self.name }}",properties:{name:{type:"string",title:"\u533a\u5757\u540d\u79f0",options:{grid_columns:6}},height:{type:"number",title:"\u9ad8\u5ea6",default:400,options:{grid_columns:6}},mods:{type:"array",title:"\u6a21\u5757\u5217\u8868",format:"table",items:{title:"\u6a21\u5757",type:"object",id:"mod_item",properties:{type:{type:"string",title:"\u7c7b\u578b",enum:["none","table","chart"],options:{enum_titles:["\u9009\u62e9\u7c7b\u578b","\u5217\u8868","\u56fe\u8868"],input_width:"180px"}},module:{type:"string",title:"\u6a21\u5757",watch:{type:"mod_item.type"},enumSource:[{setter:"getBoardModules"}]},grid:{type:"number",title:"Grid",enum:[4,6,8,12],options:{input_width:"150px"}}}}}}}}}},gt="/lego-api",bt=gt+"/form",_t=gt+"/table",yt=gt+"/chart",vt=gt+"/board",wt=function(e){var t=Object(o.useCallback)((function(e){t.current=Le(e,dt,{disable_collapse:!0})}),[]),i=Object(o.useContext)(Ye);return Object(o.useEffect)((function(){if(i.name){var e=i.name,n=i.baseUrl,s=i.permissionApi,a=i.sideMenu,r=i.uploadFn;t.current.setValue({name:e,baseUrl:n,permissionApi:s,sideMenu:a,uploadFn:r})}}),[i,t]),l.a.createElement(Qe,null,l.a.createElement("div",{className:"lego-card"},l.a.createElement("div",{ref:t}),l.a.createElement("div",{className:"btns-row"},l.a.createElement(ot,{key:"save",value:"\u4fdd\u5b58",onClick:function(){var n=t.current,s=n.validate();if(s.length>0)ze("\u8868\u5355\u586b\u5199\u6709\u8bef\uff1a<br />".concat(s.map((function(e){return e.path+": "+e.message})).join("<br />")));else{var a=n.getValue();He("POST","/lego-api/setting",a).then((function(){var t=i._menu,n=i._admin;e.updateSetting(Object(et.a)({_menu:t,_admin:n},a)),ze("\u4fdd\u5b58\u6210\u529f\uff0c\u5373\u5c06\u5237\u65b0\u9875\u9762"),setTimeout((function(){window.location.reload()}),2e3)})).catch((function(e){console.log(e)}))}},extClass:"btn-success"}),l.a.createElement(ot,{key:"help",onClick:function(){return window.open("".concat("/lego","/help/setting"))},value:"\u5e2e\u52a9",extClass:"btn-outline-primary"}),l.a.createElement(ot,{key:"log",onClick:function(){return window.open("".concat("/lego","/log/list"))},value:"\u64cd\u4f5c\u65e5\u5fd7",extClass:"btn-outline-info"}),l.a.createElement("span",{className:"btn btn-sm text-muted float-right mr-0"},"Version ","1.1.0"))))},Et=(i(111),function(){return l.a.createElement(Qe,null,l.a.createElement("div",{className:"guide-help"},l.a.createElement("div",{className:"guide-node"},l.a.createElement("h2",{className:"help-title help-title-main"},l.a.createElement("span",null,"\u7cfb\u7edf\u8bbe\u7f6e")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"\u8bbe\u7f6e\u7cfb\u7edf\u540d\u79f0\u3001\u8fd0\u884c\u6a21\u5f0f\u3001\u6743\u9650\u3001\u83dc\u5355\u7b49\u57fa\u7840\u914d\u7f6e"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("label",null,"\u7cfb\u7edf\u540d\u79f0"),l.a.createElement("p",null,"\u5fc5\u586b\uff0c\u540e\u53f0\u7cfb\u7edf\u7684\u540d\u79f0\uff0c\u663e\u793a\u5728\u5de6\u4fa7\u83dc\u5355\u548c\u9875\u9762\u6807\u9898\u5904")),l.a.createElement("li",null,l.a.createElement("label",null,"\u63a5\u53e3\u524d\u7f00"),l.a.createElement("p",null,"\u53ef\u9009\uff0c\u586b\u5199\u6b64\u503c\u540e\uff0c\u914d\u7f6e\u6a21\u5757\u63a5\u53e3\u65f6\u5982\u679c\u662f\u76f8\u5bf9\u5730\u5740\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u4ee5\u6b64\u4e3a\u524d\u7f00\u8fdb\u884c\u62fc\u63a5\u3002")),l.a.createElement("li",null,l.a.createElement("label",null,"\u6743\u9650/\u83dc\u5355\u63a5\u53e3"),l.a.createElement("p",null,"\u53ef\u9009\uff0c\u586b\u5199\u540e\u53ef\u6839\u636e\u63a5\u53e3\u8fd4\u56de\u503c\u5b9a\u5236\u5de6\u4fa7\u83dc\u5355\u3001\u63a7\u5236LEGO\u7f16\u8f91\u6743\u9650\uff0c\u5b9a\u5236\u65b9\u6cd5\u89c1\u300c\u6743\u9650/\u83dc\u5355\u914d\u7f6e\u300d\u90e8\u5206\u3002\u901a\u8fc7\u914d\u7f6e\u6839\u76ee\u5f55",l.a.createElement("code",null,".env"),"\u53ef\u5b9e\u73b0\u767b\u5f55\u6001\u6821\u9a8c\u548c\u767b\u5f55\u529f\u80fd\u3002")),l.a.createElement("li",null,l.a.createElement("label",null,"\u8fd0\u884c\u6a21\u5f0f"),l.a.createElement("p",null,"\u72ec\u7acb\u6a21\u5f0f\u4f1a\u663e\u793a\u5de6\u4fa7\u83dc\u5355\uff0c\u5d4c\u5165\u6a21\u5f0f\u4ec5\u663e\u793a\u4e3b\u5185\u5bb9\u533a\u57df\uff0c\u5f53\u4f5c\u4e3aiframe\u5d4c\u5165\u5230\u5176\u4ed6\u9875\u9762\u65f6\u81ea\u52a8\u5207\u6362\u4e3a\u5d4c\u5165\u6a21\u5f0f\u3002")),l.a.createElement("li",null,l.a.createElement("label",null,"\u6743\u9650/\u83dc\u5355\u914d\u7f6e"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("p",null,"\u672a\u914d\u7f6e\u6743\u9650/\u63a5\u53e3\u83dc\u5355\u65f6\uff0c\u76f4\u63a5\u914d\u7f6e\u83dc\u5355\u5185\u5bb9\uff0c\u683c\u5f0f\u5982\u4e0b\uff1a"),l.a.createElement("pre",null,'[\n  {\n    "name": "\u4e00\u7ea7\u83dc\u5355",\n    "url": "/v1/link/",\n    "icon": "gift"\n  },\n  {\n    "name": "\u4e00\u7ea7\u83dc\u5355",\n    "sub": [\n      {\n        "name": "\u4e8c\u7ea7\u83dc\u5355",\n        "url": "/v2/link/"\n      }\n    ]\n  }\n]')),l.a.createElement("li",null,l.a.createElement("p",null,"\u5f53\u914d\u7f6e\u6743\u9650/\u63a5\u53e3\u83dc\u5355\u65f6\uff0c\u901a\u8fc7\u5b9a\u4e49",l.a.createElement("code",null,"main"),"\u51fd\u6570\u5b9a\u5236\u6743\u9650\u548c\u83dc\u5355\uff0c\u89c1\u793a\u4f8b\uff1a"),l.a.createElement("pre",null,"function main(data) {\n  // data\u4e3a\u6743\u9650\u63a5\u53e3\u8fd4\u56de\u6570\u636e\n  if (data.condition1) {\n    return {\n      admin: true, // \u662f\u5426\u4e3a\u7ba1\u7406\u5458\uff0c\u7ba1\u7406\u5458\u53ef\u5bf9LEGO\u8fdb\u884c\u7f16\u8f91\uff0c\u9ed8\u8ba4\u4e3afalse\n      user: 'account@mail.com', // \u767b\u5f55\u7528\u6237\u540d\n      menu: [] // \u683c\u5f0f\u540c\u4e0a\n    }\n  } else {\n    return {\n      admin: false,\n      user: 'account@mail.com',\n      menu: []\n    }\n  }\n}")))),l.a.createElement("li",null,l.a.createElement("label",null,"\u4e0a\u4f20\u65b9\u6cd5"),l.a.createElement("p",null,"\u89c1",l.a.createElement(d.b,{to:"/help/general#file-upload"},"\u901a\u7528\u8bf4\u660e-\u6587\u4ef6\u4e0a\u4f20"))))))))}),xt=function(){return l.a.createElement(Qe,null,l.a.createElement("div",{className:"guide-help"},l.a.createElement("div",{className:"guide-node"},l.a.createElement("h2",{className:"help-title help-title-main"},l.a.createElement("span",null,"\u521b\u5efa\u8868\u5355")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"\u4ee5JSON\u6570\u636e\u4e3a\u6a21\u578b\uff0c\u81ea\u52a8\u751f\u6210\u8868\u5355\uff0c\u5e76\u63d0\u4f9b\u9ad8\u5ea6\u6269\u5c55\u548c\u5b9a\u5236\u3002\u4e3a\u4f7f\u8868\u5355\u62e5\u6709\u66f4\u597d\u7684\u4f53\u9a8c\u548c\u4e30\u5bcc\u7684\u529f\u80fd\uff0c\u9700\u7f16\u5199\u5c11\u91cf\u4ee3\u7801\uff0c\u4e0b\u9762\u8be6\u7ec6\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u3002"))),l.a.createElement("div",{className:"guide-node",id:"step-1"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#step-1"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"\u7b2c\u4e00\u6b65\uff1a\u6784\u9020\u6570\u636e\u7ed3\u6784\uff0c\u586b\u5199\u8868\u5355\u57fa\u672c\u4fe1\u606f")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"\u540e\u53f0\u5f00\u53d1\u4eba\u5458\u9996\u5148\u8981\u660e\u786e\u8868\u5355\u7684\u5185\u5bb9\u3001\u529f\u80fd\u548c\u6570\u636e\u7ed3\u6784\uff0c\u81ea\u884c\u6784\u9020\u51faJSON\u6570\u636e"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("label",null,"\u8868\u5355\u540d\u79f0"),l.a.createElement("p",null,"\u8868\u5355\u7684\u540d\u79f0\uff0c\u6bd4\u5982\u7f16\u8f91\u5546\u54c1\u3001\u6e38\u620f\u914d\u7f6e\u7b49")),l.a.createElement("li",null,l.a.createElement("label",null,"\u63d0\u4ea4API"),l.a.createElement("p",null,"\u8868\u5355\u4ee5",l.a.createElement("code",null,"POST"),"\u65b9\u5f0f\u63d0\u4ea4\u5230\u6b64API\uff08\u652f\u6301",l.a.createElement(d.b,{to:"/help/general#url-variable"},"URL\u53d8\u91cf"),"\uff09\uff0c\u652f\u6301\u5b8c\u6574\u8def\u5f84\u548c\u76f8\u5bf9\u8def\u5f84\uff0c\u586b\u5199\u76f8\u5bf9\u8def\u5f84\u65f6\u4f1a\u81ea\u52a8\u62fc\u63a5\u7cfb\u7edf\u8bbe\u7f6e\u91cc\u7684\u300c\u63a5\u53e3\u524d\u7f00\u300d")),l.a.createElement("li",null,l.a.createElement("label",null,"\u6570\u636eAPI"),l.a.createElement("p",null,"\u7f16\u8f91\u8868\u5355\u65f6\u56de\u586b\u6570\u636e\u7684API\uff08\u652f\u6301",l.a.createElement(d.b,{to:"/help/general#url-variable"},"URL\u53d8\u91cf"),"\uff09\uff0c\u6570\u636e\u7ed3\u6784\u5fc5\u987b\u4e0e\u8868\u5355\u76f8\u5339\u914d\uff0c\u5426\u5219\u4f1a\u53d1\u751f\u4e0d\u53ef\u9884\u671f\u7684\u9519\u8bef\u3002")),l.a.createElement("li",null,l.a.createElement("label",null,"\u6570\u636e\u793a\u4f8b"),l.a.createElement("p",null,"\u6570\u636e\u793a\u4f8b\u662f\u751f\u6210\u8868\u5355\u7684",l.a.createElement("b",null,"\u6838\u5fc3"),"\uff0c\u8bf7\u81ea\u884c\u8bbe\u8ba1JSON\u6570\u636e\u7ed3\u6784\u548c\u5185\u5bb9\uff0c\u5c3d\u91cf\u4f7f\u7528\u771f\u5b9e\u503c\uff0c\u7cfb\u7edf\u4f1a\u6839\u636e\u7c7b\u578b\u751f\u6210\u76f8\u5e94\u7684\u8868\u5355\uff08\u5982\u65e5\u671f\u3001\u6587\u4ef6\u4e0a\u4f20\u7b49\uff09\uff0c\u4ea6\u53ef\u5728\u540e\u7eed\u6b65\u9aa4\u4e2d\u5b8c\u5584\u3002")),l.a.createElement("li",null,l.a.createElement("label",null,"\u8868\u5355\u5907\u6ce8"),l.a.createElement("p",null,"\u8868\u5355\u5907\u6ce8\u4fe1\u606f\uff0c\u53ef\u8bb0\u5f55\u8868\u5355\u7528\u9014\u3001\u6ce8\u610f\u4e8b\u9879\u7b49\uff0c\u65b9\u4fbf\u540e\u671f\u67e5\u9605"))),l.a.createElement("blockquote",null,"\u586b\u5199\u4ee5\u4e0a\u5185\u5bb9\u540e\uff0c\u70b9\u51fb\u9875\u9762\u5e95\u90e8\u300c\u4e0b\u4e00\u6b65\u300d\uff0c\u9884\u89c8\u751f\u6210\u7684\u8868\u5355\u5e76\u8fdb\u884c\u5b8c\u5584\u3002"))),l.a.createElement("div",{className:"guide-node",id:"step-2"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#step-2"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"\u7b2c\u4e8c\u6b65\uff1a\u9884\u89c8\u3001\u5b8c\u5584\u548c\u4fdd\u5b58\u8868\u5355")),l.a.createElement("div",{className:"help-content"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("label",null,"\u9884\u89c8"),l.a.createElement("p",null,"\u7cfb\u7edf\u6839\u636e\u7528\u6237\u63d0\u4f9b\u7684\u6570\u636e\u793a\u4f8b\u81ea\u52a8\u751f\u6210\u8868\u5355\uff0c\u5982\u679c\u6b64\u65f6\u8868\u5355\u7b26\u5408\u4f60\u7684\u9700\u6c42\uff0c\u53ef\u8df3\u8fc7\u4e0b\u9762\u6b65\u9aa4\uff0c\u76f4\u63a5\u4fdd\u5b58\u3002")),l.a.createElement("li",null,l.a.createElement("label",null,"\u5b8c\u5584\u548c\u6269\u5c55"),l.a.createElement("p",null,"\u5f53\u8868\u5355\u4e0d\u7b26\u5408\u9700\u6c42\u65f6\uff0c\u901a\u8fc7\u4e24\u65b9\u9762\u8fdb\u884c\u5b8c\u5584\uff1a"),l.a.createElement("ul",null,l.a.createElement("li",null,"1. \u901a\u8fc7\u300c",l.a.createElement(d.b,{to:"/help/general#json-schema"},"JSON-Schema"),"\u300d\uff0c\u70b9\u51fb\u8868\u5355\u53f3\u4e0a\u89d2\u84dd\u8272\u7bad\u5934\u67e5\u770b\u548c\u7f16\u8f91\u751f\u6210\u7684JSON-Schema\uff0c\u53c2\u8003",l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/json-editor/json-editor"},"JSON-Editor\u6587\u6863"),"\u8fdb\u884c\u7f16\u8f91\uff0c \u5b8c\u6210\u540e\u70b9\u51fb\u300c\u66f4\u65b0\u81f3\u8868\u5355\u300d\u8fdb\u884c\u9884\u89c8\u3002"),l.a.createElement("li",null,"2. \u901a\u8fc7\u300c\u8868\u5355\u6269\u5c55\u300d\uff0c\u7f16\u5199JavaScript\u8fdb\u884c\u6269\u5c55\u3002",l.a.createElement("br",null),"2.1 ",l.a.createElement("code",null,"window._editor_"),"\u53ef\u83b7\u53d6\u7f16\u8f91\u5668\u5b9e\u4f8b\uff0c\u53c2\u8003",l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/json-editor/json-editor"},"JSON-Editor\u6587\u6863"),"\u5bf9\u8868\u5355\u8fdb\u884c\u6269\u5c55\u3002",l.a.createElement("br",null),"2.2 \u58f0\u660e",l.a.createElement("code",null,"window._onDataReady_"),"\u81ea\u5b9a\u4e49\u6570\u636e\u56de\u586b \uff0c\u6b64\u65b9\u6cd5\u5728\u83b7\u53d6\u5230\u56de\u586b\u6570\u636e\u540e\u6267\u884c\uff0c\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1aeditor\u5b9e\u4f8b\u548c\u56de\u586b\u6570\u636e\u3002",l.a.createElement("br",null),"2.3 \u58f0\u660e",l.a.createElement("code",null,"window._submitFix_"),"\u81ea\u5b9a\u4e49\u63d0\u4ea4\u6570\u636e\uff0c\u53c2\u6570\u4e3a\u8868\u5355\u6570\u636e\uff0c\u53ef\u81ea\u884c\u5b9e\u73b0\u5bf9\u6570\u636e\u7684\u6539\u9020\u548c\u6821\u9a8c\uff0c\u5982\uff1a",l.a.createElement("pre",null,"window._submitFix_ = function(data){\n  if (someCondiction) {\n    // \u81ea\u884c\u5bf9\u8868\u5355\u6570\u636e\u6539\u9020\uff0c\u83b7\u5f97\u60f3\u8981\u7684\u683c\u5f0f\u548c\u5185\u5bb9\n    return {\n      k1: data.k1 * 100,\n      k2: format(data.k2)\n    }\n  } else {\n    // \u8fd4\u56defalse\u8868\u660e\u6570\u636e\u975e\u6cd5\n    _LEGO_UTILS_.toast('xxx\u586b\u5199\u6709\u8bef')\n    return false\n  }\n}"),"Content-Type\u9ed8\u8ba4\u4e3a",l.a.createElement("code",null,"application/x-www-form-urlencoded"),"\uff0c\u53ef\u6309\u9700\u4fee\u6539\uff1a",l.a.createElement("pre",null,"window._submitFix_ = function(data){\n  return {\n    _contentType: 'json', // \u6307\u5b9acontent-type\u4e3aapplication/json\n    data: data\n  }\n}"),l.a.createElement("br",null),"2.4 \u58f0\u660e",l.a.createElement("code",null,"window._afterSubmit_"),"\u5b9a\u5236\u63d0\u4ea4\u8868\u5355\u540e\u7684\u52a8\u4f5c\uff0c\u63a5\u6536\u4e24\u4e2a\u53c2\u6570",l.a.createElement("code",null,"submit_params"),"\u548c",l.a.createElement("code",null,"response_data"),l.a.createElement("br",null),"2.5 \u58f0\u660e",l.a.createElement("code",null,"window.formUploader"),"\u53ef\u5b9a\u5236\u5f53\u524d\u8868\u5355\u4e0a\u4f20\u65b9\u6cd5\uff0c\u53c2\u6570\u540c",l.a.createElement("code",null,"window.fileUploader"),"\uff08\u89c1",l.a.createElement(d.b,{to:"/help/general#file-upload"},"\u6587\u4ef6\u4e0a\u4f20"),"\uff09")),l.a.createElement("p",null),l.a.createElement("blockquote",null,"\u5e38\u89c1\u95ee\u9898\u548c\u4f7f\u7528\u6280\u5de7\u89c1",l.a.createElement("a",{href:"#supplement"},"\u9644\u5f55"))),l.a.createElement("li",null,l.a.createElement("label",null,"\u6d4b\u8bd5\u548c\u4fdd\u5b58"),l.a.createElement("p",null,"\u5b8c\u5584\u8868\u5355\u540e\uff0c\u9700\u8fdb\u884c\u8bd5\u7528\u548c\u6d4b\u8bd5\u3002\u70b9\u51fb\u300cconsole.log\u300d\u5728\u6d4f\u89c8\u5668\u6253\u5370\u8868\u5355\u6570\u636e\uff0c\u6838\u5bf9\u65e0\u8bef\u540e\u70b9\u51fb\u300c\u4fdd\u5b58\u300d\u5b8c\u6210\u521b\u5efa\u3002"))))),l.a.createElement("div",{className:"guide-node",id:"supplement"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#supplement"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"\u9644\uff1a")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,l.a.createElement("b",null,"1. \u5982\u4f55\u8fdb\u5165\u8868\u5355\u7f16\u8f91\u6a21\u5f0f\uff1f"),l.a.createElement("br",null),"\u53ea\u8981\u5728\u8868\u5355URL\u4e0a\u8ffd\u52a0\u53c2\u6570",l.a.createElement("code",null,"do=edit"),"\u5373\u53ef\uff0c\u4f8b\u5982 ",l.a.createElement("code",null,"http://lego.com/htm/form/use/1?do=edit"),"\uff0c\u7f16\u8f91\u6a21\u5f0f\u4e0b\u7cfb\u7edf\u4f1a\u8bf7\u6c42",l.a.createElement("b",null,"\u6570\u636eAPI"),"\u8fdb\u884c\u6570\u636e\u56de\u586b\u3002")))))},Ct=function(){return l.a.createElement(Qe,null,l.a.createElement("div",{className:"guide-help"},l.a.createElement("div",{className:"guide-node"},l.a.createElement("h2",{className:"help-title help-title-main"},l.a.createElement("span",null,"\u521b\u5efa\u5217\u8868")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"\u6839\u636e\u540e\u7aef\u63d0\u4f9b\u7684API\u751f\u6210\u652f\u6301\u5206\u9875\u3001\u641c\u7d22\u3001\u591a\u9009\u3001\u6392\u5e8f\u7684\u6570\u636e\u5217\u8868\u3002"))),l.a.createElement("div",{className:"guide-node",id:"base"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#base"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"\u57fa\u7840\u914d\u7f6e")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"\u586b\u5199\u5217\u8868\u57fa\u672c\u4fe1\u606f\uff0c",l.a.createElement("code",null,"\u6570\u636e\u6e90"),"\u6307\u6570\u636e\u6765\u6e90API\uff08\u652f\u6301",l.a.createElement(d.b,{to:"/help/general#url-variable"},"URL\u53d8\u91cf"),"\uff09\uff0c",l.a.createElement("code",null,"\u6570\u636e\u8def\u5f84"),"\u6839\u636e\u540e\u7aef\u8fd4\u56de\u7684JSON\u6570\u636e\u7ed3\u6784\u586b\u5199\uff0c\u4ee5\u6b64\u5b9a\u4f4d\u5217\u8868\u6570\u636e\u3002"))),l.a.createElement("div",{className:"guide-node",id:"field"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#field"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"\u5217\u8868\u5b57\u6bb5")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"\u7528\u6765\u5b9a\u4e49\u5404\u5217\u6570\u636e\uff0c\u70b9\u51fb",l.a.createElement("code",null,"+\u5217"),"\u6dfb\u52a0\u4e00\u5217\uff0c\u586b\u5199API\u4e2d\u5bf9\u5e94\u7684",l.a.createElement("code",null,"key"),"\uff0c\u7cfb\u7edf\u636e\u6b64\u8bfb\u53d6\u6570\u636e\uff0c\u53ef\u6309\u9700\u6dfb\u52a0\u641c\u7d22\u3001\u6392\u5e8f\u3001\u591a\u9009\u529f\u80fd\uff08\u67e5\u8be2\u5b9e\u73b0\u4f9d\u8d56\u540e\u7aef\u63a5\u53e3\uff09\u3002"),l.a.createElement("blockquote",null,"\u641c\u7d22\uff1a\u5728\u6570\u636e\u63a5\u53e3\u6dfb\u52a0\u67e5\u8be2\u53c2\u6570\uff0c\u7528URL\u53d8\u91cf\u8868\u793a\uff0c\u4f8b\u5982",l.a.createElement("code",null,"&search_key={{key}}"),"\uff0c","{{key}}","\u5c06\u88ab\u66ff\u6362\u4e3a\u5bf9\u5e94\u7684\u67e5\u8be2\u503c\uff1b",l.a.createElement("br",null),"\u6392\u5e8f\uff1a\u5728\u6570\u636e\u63a5\u53e3\u6dfb\u52a0\u67e5\u8be2\u53c2\u6570\uff0c\u7528URL\u53d8\u91cf\u8868\u793a\uff0c\u4f8b\u5982",l.a.createElement("code",null,"&order={{sort}}"),"\uff0c","{{sort}}","\u5c06\u6309\u7167","{key}-{asc|desc}","\u683c\u5f0f\u8fdb\u884c\u66ff\u6362\uff08\u4ec5\u652f\u6301\u5355\u5217\u6392\u5e8f\uff09",l.a.createElement("br",null),"\u591a\u9009\uff1a\u9700\u914d\u5408\u5de5\u5177\u680f-\u6309\u94ae\u4f7f\u7528\uff0c\u8be6\u89c1\u5de5\u5177\u680f-\u6309\u94ae\u914d\u7f6e\u3002"))),l.a.createElement("div",{className:"guide-node",id:"handle"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#handle"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"\u6570\u636e\u64cd\u4f5c")),l.a.createElement("div",{className:"help-content"},l.a.createElement("ul",null,l.a.createElement("li",null,"\u53ef\u6dfb\u52a0\u591a\u4e2a\u64cd\u4f5c\uff0c\u652f\u6301\u5185\u9875\u6253\u5f00\u3001\u65b0\u7a97\u6253\u5f00\u3001\u5f39\u7a97\u6d6e\u5c42\u3001\u63a5\u53e3\u8bf7\u6c42\u548c",l.a.createElement(d.b,{to:"/help/general#exec-script"},"\u6267\u884c\u811a\u672c"),"\uff0c\u53ef\u914d\u7f6e",l.a.createElement(d.b,{to:"/help/general#icon-font"},"IconFont"),"\uff0c\u652f\u6301",l.a.createElement(d.b,{to:"/help/general#url-variable"},"URL\u53d8\u91cf"),"\uff0c\u53d8\u91cf\u6570\u636e\u4ece\u884c\u6570\u636e\u548c\u9875\u9762URL\u53c2\u6570\u4e2d\u8bfb\u53d6\uff0c\u884c\u6570\u636e\u4f18\u5148\u7ea7\u66f4\u9ad8\u3002"),l.a.createElement("li",null,"\u63a5\u53e3\u8bf7\u6c42\u4f1a\u6709\u4e8c\u6b21\u786e\u8ba4\u5f39\u7a97\uff0c\u53d6\u6d88\u9700\u5728url\u7ed3\u5c3e\u589e\u52a0\u53c2\u6570",l.a.createElement("code",null,"handle_confirm=0")),l.a.createElement("li",null,"\u56fe\u6807\u7559\u7a7a\u65f6\u4f1a\u81ea\u52a8\u6dfb\u52a0\u56fe\u6807\uff0c\u4e0d\u663e\u793a\u56fe\u6807\u8bf7\u586b",l.a.createElement("code",null,"none")),l.a.createElement("li",null,l.a.createElement("p",null,"\u663e\u9690\u63a7\u5236\u7528\u6765\u63a7\u5236\u64cd\u4f5c\u7684\u663e\u793a\u60c5\u51b5\uff0c\u503c\u4e3a\u4e0e\u975e\u8868\u8fbe\u5f0f\uff0c\u53ef\u76f4\u63a5\u4f7f\u7528",l.a.createElement("code",null,"data"),"\uff08\u5f53\u524d\u884c\u6570\u636e\uff09\u548c",l.a.createElement("code",null,"account"),"\uff08\u7528\u6237\u4fe1\u606fadmin, user, group\uff09\u53d8\u91cf\uff0c\u5982\uff1a"),l.a.createElement("pre",null,"data.display == 'show' && account.group == 'editor'"))))),l.a.createElement("div",{className:"guide-node",id:"handle"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#handle"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"\u5de5\u5177\u680f\u914d\u7f6e")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"\u7528\u6765\u5b9a\u5236\u8868\u5934\u4e0a\u65b9\u5de5\u5177\u680f\uff0c\u53ef\u6dfb\u52a0\u8f93\u5165\u6846\u3001\u4e0b\u62c9\u6846\u3001\u65f6\u95f4\u9009\u62e9\u5668\u3001\u6309\u94ae\u7b49\u7ec4\u4ef6\u3002"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u7c7b\u578b\uff1a\u9009\u62e9\u5de5\u5177\u7c7b\u578b"),l.a.createElement("li",null,"\u540d\u79f0\uff1a\u586b\u5199\u5de5\u5177\u540d\u79f0"),l.a.createElement("li",null,"Key\uff1a\u6b64\u5de5\u5177\u552f\u4e00\u952e\uff0c\u5f53\u5de5\u5177\u4e3a\u67e5\u8be2\u5b57\u6bb5\u65f6\uff0cKey\u5fc5\u987b\u4ee5",l.a.createElement("code",null,"search_"),"\u5f00\u5934\uff08URL\u53d8\u91cf\u4e2d\u65e0\u9700search_\uff09"),l.a.createElement("li",null,"\u5bbd\u5ea6\uff1a\u5de5\u5177\u5360\u4f4d\u5bbd\u5ea6"),l.a.createElement("li",null,l.a.createElement("strong",null,"\u914d\u7f6e"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("p",null,"\u4e0b\u62c9\u6846\uff1a",l.a.createElement("br",null),"\u300c\u56fa\u5b9a\u5217\u8868\u300d\u4ee5\u591a\u7ec4value:display[:true]\u5206\u53f7\u9694\u5f00\uff0c",l.a.createElement("code",null,":true"),"\uff08\u53ef\u9009\uff09\u8868\u793a\u9ed8\u8ba4\u9009\u4e2d\uff0c\u5982",l.a.createElement("code",null,"\u9009\u98791:value1;\u9009\u98792:value2:true;\u9009\u98793:value3"),"\u9ed8\u8ba4\u9009\u4e2d\u9009\u98792",l.a.createElement("br",null),"\u300c\u63a5\u53e3\u8bfb\u53d6\u300d\u586b\u5199\u51fd\u6570\u540d\uff0c\u5e76\u5728\u6269\u5c55\u4e2d\u5b9e\u73b0\uff0c\u5982\uff1a"),l.a.createElement("pre",null,"window._updateChoices_ = function(choices_instance){\n  // async_function \u4e3a\u5f02\u6b65\u83b7\u53d6\u6570\u636e\u4f2a\u51fd\u6570\n  async_function().then(function(data){\n    // \u4f7f\u7528\u5b9e\u4f8b\u7684setChoices\u65b9\u6cd5\u8bbe\u7f6e\u9009\u9879\uff0c\u683c\u5f0f\u5982\u4e0b\uff1a\n    choices_instance.setChoices([\n      {\n        value: value1,\n        label: name1\n      },\n      {\n        value: value2,\n        label: name2\n        selected: true // \u9009\u4e2d\n      }\n    ])\n  })\n\n}")),l.a.createElement("li",null,"\u65f6\u95f4\u9009\u62e9\uff1a\u652f\u6301\u5355\u9009\u548c\u65f6\u95f4\u8303\u56f4\u6a21\u5f0f\uff0c\u9009\u62e9\u65f6\u95f4\u9ed8\u8ba4\u4e3a\u5173\uff0c\u53ef\u914d\u7f6e\u8f93\u51fa\u683c\u5f0f\u3002"),l.a.createElement("li",null,"\u6309\u94ae\uff1a\u652f\u63018\u79cd\u98ce\u683c\uff0c\u6309\u94ae\u529f\u80fd\u548c\u884c\u4e3a\u540c\u300c\u6570\u636e\u64cd\u4f5c\u300d\uff0c\u53ef\u914d\u5408\u5217\u7684\u591a\u9009\u529f\u80fd\u5b9e\u73b0\u591a\u9009\u64cd\u4f5c\uff0c\u901a\u8fc7URL\u53d8\u91cf",l.a.createElement("code",null,"{{multi-key}}"),"\u83b7\u53d6\u4ee5\u9017\u53f7\u5206\u9694\u7684\u591a\u9009\u6570\u636e\u3002"),l.a.createElement("li",null,"\u81ea\u5b9a\u4e49\uff1a\u81ea\u5b9a\u4e49HTML\uff0c\u53ef\u901a\u8fc7",l.a.createElement(d.b,{to:"/help/general#path-map"},"PathMap"),"\u83b7\u53d6\u5217\u8868\u63a5\u53e3\u6570\u636e\uff0c\u5982",l.a.createElement("code",null,"{{table.type}}"),"\uff0c")))),l.a.createElement("blockquote",null,"\u5de5\u5177\u680f\u4fdd\u5b58\u540e\u4e0d\u53ef\u4fee\u6539\u7c7b\u578b\uff0c\u53ef\u5220\u9664\u540e\u91cd\u65b0\u6dfb\u52a0\u3002"))),l.a.createElement("div",{className:"guide-node",id:"extend"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#extend"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"\u5217\u8868\u6269\u5c55")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"\u5f53\u914d\u7f6e\u65e0\u6cd5\u6ee1\u8db3\u9700\u6c42\u65f6\uff0c\u901a\u8fc7JavaScript\u8fdb\u884c\u6269\u5c55\u3002"),l.a.createElement("p",null,"1. \u4fee\u6b63\u5217\u6570\u636e\uff1a\u58f0\u660e",l.a.createElement("code",null,"window._colFix_"),"\u5bf9\u6570\u636e\u8fdb\u884c\u4fee\u6b63\u3002",l.a.createElement("br",null),"\u4f8b\u5982\u67d0\u5217\u6570\u636e",l.a.createElement("code",null,'{"price": 1500, "img": "http://xx.com/img/123.jpg"}'),"\uff0cprice\u5355\u4f4d\u4e3a\u5206\uff0c\u9884\u5c55\u793a\u4ee5\u5143\u4e3a\u5355\u4f4d\u7684\u4ef7\u683c\u5e76\u663e\u793a\u56fe\u7247\uff0c\u6309\u5982\u4e0b\u65b9\u5f0f\u4fee\u6b63\uff1a"),l.a.createElement("pre",null,"window._colFix_ = function (key, value, row) {\n  switch (key) {\n    case 'price':\n      return (value / 100) + '\u5143';\n\n    case 'img':\n      return '<img src=\"'+ value +'\" width=\"100\" height=\"80\" />'\n  }\n}"),l.a.createElement("blockquote",null,"\u53ef\u901a\u8fc7",l.a.createElement("code",null,"switch-case"),"\u540c\u65f6\u4fee\u6b63\u591a\u5217\u6570\u636e\uff0c\u82e5\u4f7f\u7528ES6\u8bed\u6cd5\uff0c\u8bf7\u786e\u4fddLEGO\u8fd0\u884c\u5728\u652f\u6301\u7684\u6d4f\u89c8\u5668\u4e2d\u3002"),l.a.createElement("p",null,"2. \u4fee\u6b63\u5206\u9875\u6570\u636e\uff1a\u58f0\u660e",l.a.createElement("code",null,"window._pageFix_"),"\u5bf9\u5206\u9875\u6570\u636e\u8fdb\u884c\u4fee\u6b63\u5e76\u8fd4\u56de",l.a.createElement("b",null,"\u6570\u636e\u603b\u6570 total"),"\u548c",l.a.createElement("b",null,"\u5206\u9875\u5927\u5c0f pageSize"),"\u3002",l.a.createElement("br",null),"\u4f8b\u5982\u63a5\u53e3\u5206\u9875\u6570\u636e\u4e3a\uff1a",l.a.createElement("pre",null,'{\n  "code": 0,\n  "data": {\n    "pageInfo": {\n      "total": 2192,\n      "size": 30\n    }\n  }\n}')),l.a.createElement("p",null,"\u5219\u5b9a\u4e49\u4fee\u6b63\u65b9\u6cd5\uff1a",l.a.createElement("pre",null,"window._pageFix_ = function (data) {\n  return {\n    total: data.pageInfo.total,\n    pageSize: data.pageInfo.size\n  }\n}")),"\u82e5\u63a5\u53e3\u5206\u9875\u6570\u636e\u4e3a\u5982\u4e0b\u6807\u51c6\u7ed3\u6784\uff0c\u5219\u65e0\u9700\u4fee\u6b63\uff1a",l.a.createElement("pre",null,'{\n  "code": 0,\n  "data": {\n    "page": {\n      "total": 2192,\n      "pageSize": 30\n    }\n  }\n}')))))},kt=function(){return l.a.createElement(Qe,null,l.a.createElement("div",{className:"guide-help"},l.a.createElement("div",{className:"guide-node"},l.a.createElement("h2",{className:"help-title help-title-main"},l.a.createElement("span",null,"\u521b\u5efa\u56fe\u8868")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"\u4ec5\u9700\u7b80\u5355\u914d\u7f6e\uff0c\u5373\u53ef\u5feb\u901f\u751f\u6210\u8868\u73b0\u529b\u4e30\u5bcc\u7684\u6570\u636e\u56fe\u8868\uff0c\u652f\u6301\u6298\u7ebf\u56fe\u3001\u67f1\u72b6\u56fe\u3001\u997c\u72b6\u56fe\uff0c\u652f\u6301\u5b9a\u65f6\u5237\u65b0\uff0c\u53ef\u5728\u5355\u9875\u5c55\u793a\u591a\u4e2a\u56fe\u8868\u5b9e\u4f8b\uff0c\u65b9\u4fbf\u5bf9\u6bd4\u5206\u6790\u3002"))),l.a.createElement("div",{className:"guide-node",id:"step-1"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#step-1"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"\u7b2c\u4e00\u6b65\uff1a\u586b\u5199\u57fa\u672c\u4fe1\u606f")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"\u586b\u5199\u56fe\u8868\u540d\u79f0\u3001\u914d\u8272\u548c\u5907\u6ce8\u7b49\u57fa\u672c\u4fe1\u606f\uff0c\u6309\u7167\u4f60\u7684\u9700\u8981\u586b\u5199\u5373\u53ef\u3002"))),l.a.createElement("div",{className:"guide-node",id:"step-2"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#step-2"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"\u7b2c\u4e8c\u6b65\uff1a\u914d\u7f6e\u56fe\u8868")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"\u53ef\u914d\u7f6e\u591a\u4e2a\u56fe\u8868\uff0c\u901a\u8fc7\u6392\u7248\u548c\u7ec4\u5408\u65b9\u4fbf\u7684\u67e5\u770b\u3001\u5bf9\u6bd4\u3001\u5206\u6790\u6570\u636e\u3002\u9700\u8981\u7279\u522b\u8bf4\u660e\u7684\u662f\uff1a"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("label",null,"\u6570\u636e\u6e90"),l.a.createElement("p",null,"\u83b7\u53d6\u6570\u636e\u7684API\uff0c\u652f\u6301",l.a.createElement(d.b,{to:"/help/general#url-variable"},"URL\u53d8\u91cf"))),l.a.createElement("li",null,l.a.createElement("label",null,"\u6a2a\u5750\u6807"),l.a.createElement("p",null,"\u6a2a\u5750\u6807\u652f\u6301\u4e24\u79cd\u65b9\u5f0f\uff1a",l.a.createElement("br",null),"1. \u5982\u679c\u6a2a\u5750\u6807\u4e3a\u5e38\u91cf\uff0c\u53ef\u76f4\u63a5\u586b\u5199\uff0c\u5e76\u7528\u9017\u53f7\u5206\u9694\uff0c\u5982\uff1a",l.a.createElement("code",null,"\u5468\u4e00,\u5468\u4e8c,\u5468\u4e09,\u5468\u56db,\u5468\u4e94,\u5468\u516d,\u5468\u65e5"),l.a.createElement("br",null),"2. \u5982\u679c\u6a2a\u5750\u6807\u4ece\u6570\u636e\u6e90\u8bfb\u53d6\uff0c\u6709\u4e24\u79cd\u65b9\u5f0f\u53d6\u503c\uff0c\u8bf7\u770b\u4ee5\u4e0b\u6570\u636e\u793a\u4f8b\uff1a",l.a.createElement("br",null),l.a.createElement("pre",null,'{\n  "code": 0,\n  "data": {\n    "dau": [\n      {\n        "uv": 2100,\n        "pv": 10021,\n        "day": "2020-01-01"\n      },\n      {\n        "uv": 2100,\n        "pv": 10021,\n        "day": "2020-01-02"\n      },\n      {\n        "uv": 2100,\n        "pv": 10021,\n        "day": "2020-01-03"\n      },\n      {\n        "uv": 2100,\n        "pv": 10021,\n        "day": "2020-01-04"\n      },\n      {\n        "uv": 2100,\n        "pv": 10021,\n        "day": "2020-01-05"\n      }\n    ],\n    "xAxis": ["\u5468\u4e00", "\u5468\u4e8c", "\u5468\u4e09", "\u5468\u56db", "\u5468\u4e94", "\u5468\u516d", "\u5468\u65e5"]\n  }\n}'),"2.1 \u5982\u679c\u63a5\u53e3\u76f4\u63a5\u8fd4\u56de\u6a2a\u5750\u6807\u6570\u636e\uff0c\u586b\u5199\u5bf9\u5e94Path\u5373\u53ef\uff0c\u5982",l.a.createElement("code",null,"data.xAxis"),l.a.createElement("br",null),"2.2 \u5982\u679c\u6a2a\u5750\u6807\u662f\u6570\u636e\u5217\u8868\u4e2d\u7684\u5b57\u6bb5\uff0c\u53ef\u4f7f\u7528",l.a.createElement(d.b,{to:"/help/general#path-map"},"PathMap"),"\u53d6\u503c\uff0c\u5982",l.a.createElement("code",null,"data.dau..day"))),l.a.createElement("li",null,l.a.createElement("label",null,"\u5de5\u5177\u680f"),l.a.createElement("p",null,"\u53ef\u5728\u56fe\u8868\u53f3\u4e0a\u89d2\u6dfb\u52a0\u5b9e\u7528\u5de5\u5177\uff1asaveAsImage \u4fdd\u5b58\u4e3a\u56fe\u7247\uff0cdataZoom \u533a\u57df\u7f29\u653e\uff0cmagicType \u5207\u6362\u56fe\u8868\u7c7b\u578b")),l.a.createElement("li",null,l.a.createElement("label",null,"\u7cfb\u5217"),l.a.createElement("p",null,"\u4e00\u4e2a\u56fe\u8868\u53ef\u6dfb\u52a0\u591a\u4e2a\u7cfb\u5217\uff0c\u6309\u7167\u4f60\u7684\u9700\u8981\u586b\u5199\u540d\u79f0\u3001\u8def\u5f84\uff08\u652f\u6301",l.a.createElement(d.b,{to:"/help/general#path-map"},"PathMap"),"\uff09\u3001\u7c7b\u578b\u7b49\u3002")))))))},jt=function(){return l.a.createElement(Qe,null,l.a.createElement("div",{className:"guide-help"},l.a.createElement("div",{className:"guide-node"},l.a.createElement("h2",{className:"help-title help-title-main"},l.a.createElement("span",null,"\u901a\u7528\u8bf4\u660e")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"\u5bf9\u7cfb\u7edf\u901a\u7528\u529f\u80fd\u548c\u6a21\u5757\u505a\u7edf\u4e00\u8bf4\u660e\uff0c\u5e2e\u52a9\u5f00\u53d1\u8005\u66f4\u597d\u7684\u7406\u89e3\u548c\u4f7f\u7528LEGO\u3002"))),l.a.createElement("div",{className:"guide-node",id:"json-schema"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#json-schema"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"JSON-Schema")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"\u8981\u4e86\u89e3",l.a.createElement("code",null,"JSON Schema"),"\u662f\u4ec0\u4e48\uff0c\u6211\u4eec\u9996\u5148\u8981\u4e86\u89e3",l.a.createElement("code",null,"JSON"),"\u662f\u4ec0\u4e48\u3002JSON\uff08JavaScript Object Notation\uff09\u662f\u4e00\u79cd\u7b80\u5355\u7684\u4e92\u8054\u7f51\u6570\u636e\u4ea4\u6362\u683c\u5f0f\u3002JSON\u57fa\u4e8eJavaScript\u800c\u6765\uff0c\u5b83\u5df2\u88ab\u8bc1\u660e\u8db3\u591f\u6709\u7528\u4e14\u8db3\u591f\u7b80\u5355\uff0c\u73b0\u5728\u4e5f\u88ab\u7528\u4e8e\u8bb8\u591a\u5176\u4ed6\u4e0d\u6d89\u53ca\u4e92\u8054\u7f51\u6570\u636e\u4ea4\u6362\u7684\u73af\u5883\u4e2d\u3002",l.a.createElement("b",null,"JSON-Schema\u662f\u63cf\u8ff0JSON\u6570\u636e\u7ed3\u6784\u7684\u58f0\u660e\u683c\u5f0f"),"\uff0c\u5b83\u672c\u8eab\u4e5f\u662f\u7528JSON\u7f16\u5199\u7684\uff0c\u53ef\u4ee5\u4e3aJSON\u6570\u636e\u63d0\u4f9b\u6e05\u6670\u3001\u4e25\u8c28\u7684\u58f0\u660e\uff0c\u5e76\u53ef\u7528\u4e8e\u6570\u636e\u9a8c\u8bc1\uff0c\u4fdd\u8bc1\u6570\u636e\u4ea4\u6362\u7684\u6b63\u786e\u6027\u3002\u5173\u4e8eJSON-Schema\u66f4\u591a\u5185\u5bb9\uff0c\u8bf7\u67e5\u9605\u5b98\u7f51",l.a.createElement("a",{href:"https://json-schema.org/",target:"_blank",rel:"noopener noreferrer"},"https://json-schema.org/")))),l.a.createElement("div",{className:"guide-node",id:"response-data"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#response-data"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"\u7ea6\u5b9a\u63a5\u53e3\u683c\u5f0f")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"LEGO\u63a5\u5165\u7684\u63a5\u53e3\u8bf7\u6309\u4ee5\u4e0b\u7ed3\u6784\u8fd4\u56de\uff1a"),l.a.createElement("pre",null,"{\n  code: 0, // \u8fd4\u56de\u72b6\u6001\u7801\uff0c0\u4ee3\u8868\u6210\u529f\n  data: {}, // \u6570\u636e\u4e3b\u4f53\n  msg: '' // \u6216 desc\n}"))),l.a.createElement("div",{className:"guide-node",id:"url-variable"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#url-variable"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"URL\u53d8\u91cf")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"URL\u53d8\u91cf\u662f\u4e00\u79cd\u5b9a\u5236URL\u53c2\u6570\u7684\u65b9\u5f0f\uff0c\u7528\u5728\u8868\u5355\u63d0\u4ea4\u3001\u8868\u5355\u56de\u586b\u3001\u5217\u8868\u3001\u56fe\u8868\u6570\u636e\u7b49\u6a21\u5757\u3002\u5f00\u53d1\u8005\u6839\u636e\u9700\u8981\u63d0\u4f9b\u5e26\u53d8\u91cf\u7684URL\uff0c\u5b9e\u73b0\u5bf9API\u7684\u5b9a\u5236\uff0c\u7cfb\u7edf\u6240\u6709API\u90fd\u652f\u6301URL\u53d8\u91cf\u3002"),l.a.createElement("p",null,"\u683c\u5f0f\u5982\uff1a",l.a.createElement("code",null,"https://example.com/api/{{model}}/?id={{orderid}}&state={{state}}"),"\uff0c\u53d8\u91cf",l.a.createElement("code",null,"{{key}}"),"\u4f1a\u88ab\u66ff\u6362\u4e3a\u5f53\u524d\u9875\u9762URL\u4e2d\u540c\u540d\u53c2\u6570\u7684\u503c\uff0c\u82e5\u627e\u4e0d\u5230\u5bf9\u5e94\u53c2\u6570\u5219\u66ff\u6362\u4e3a\u7a7a\u3002\u4f8b\u5982\u5f53\u524d\u9875URL\u4e3a https://lego.com/htm/form/use/1?orderid=123&model=order\uff0c\u5219API\u88ab\u66ff\u6362\u4e3a","https://example.com/api/order/?id=123&state="))),l.a.createElement("div",{className:"guide-node",id:"path-map"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#path-map"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"PathMap")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"PathMap\u662fLEGO\u7279\u6709\u7684\u4e00\u79cd\u83b7\u53d6\u63a5\u53e3\u6570\u636e\u7684\u65b9\u5f0f\uff0c\u4e00\u822c\u83b7\u53d6JSON\u76f8\u5e94\u8282\u70b9\u6570\u636e\u65f6\u53ef\u4f7f\u7528Path\uff0c\u4f46\u8403\u53d6\u5217\u8868\u4e2d\u67d0\u5b57\u6bb5\u65f6\uff0c\u5c31\u8981\u7528\u5230PathMap\u4e86\u3002\u4f8b\u5982\uff1a"),l.a.createElement("pre",null,'{\n  "code": 0,\n  "data": {\n    "list": [\n      {\n        "price": 125,\n        "day": "2019-12-11",\n        "view": 218\n      },\n      {\n        "price": 116,\n        "day": "2019-12-12",\n        "view": 1116\n      },\n      {\n        "price": 126,\n        "day": "2019-12-13",\n        "view": 519\n      }\n    ],\n    "userInfo": {\n      "uid": 623241545,\n      "nickName": "FIGO",\n      "lastLogin": ["2019-12-11 14:25:59", "2019-12-07 10:16:06", "2019-12-12 08:06:28"]\n    }\n  }\n}'),l.a.createElement("p",null,"\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u53d6\u503c\u53ef\u5f97\u5230\uff1a",l.a.createElement("br",null),l.a.createElement("code",null,"data.userInfo.nickName")," => ",l.a.createElement("code",null,'"FIGO"'),l.a.createElement("br",null),l.a.createElement("code",null,"data.userInfo.lastLogin")," =>"," ",l.a.createElement("code",null,'["2019-12-11 14:25:59", "2019-12-07 10:16:06", "2019-12-12 08:06:28"]'),l.a.createElement("br",null),l.a.createElement("code",null,"data.list..view")," => ",l.a.createElement("code",null,"[218, 1116, 519]")))),l.a.createElement("div",{className:"guide-node",id:"show-popup"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#file-upload"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"\u81ea\u5b9a\u4e49\u5f39\u7a97")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"\u4e3a\u65b9\u4fbf\u90e8\u5206\u64cd\u4f5c\u5728\u5f53\u524d\u9875\u8fdb\u884c\uff0cLEGO\u652f\u6301\u81ea\u5b9a\u4e49\u5f39\u7a97\uff0c\u652f\u6301iframe\u548chtml\u6e32\u67d3\uff0c\u7528\u6cd5\u5982\u4e0b\uff1a"),l.a.createElement("pre",null,'window.popupShow(\n  src: "https://xxx.com/htm/somepage.html", // url\u6216html\uff0c\u53ef\u5d4c\u5165\u8868\u5355\u6216\u5176\u4ed6\u9875\u9762\n  width: 700, // \u5f39\u7a97\u5bbd\u5ea6\uff0c\u9ed8\u8ba4700\n  height: 400 // \u5f39\u7a97\u9ad8\u5ea6\uff0c\u9ed8\u8ba4400\uff0c\u6700\u5927\u4e0d\u5f97\u8d85\u8fc7800\n);\n\nwindow.popupShow() // \u5173\u95ed\u5f39\u7a97'))),l.a.createElement("div",{className:"guide-node",id:"file-upload"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#file-upload"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"\u6587\u4ef6\u4e0a\u4f20")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"LEGO\u9ed8\u8ba4\u4f7f\u7528\u300c\u7cfb\u7edf\u8bbe\u7f6e-\u4e0a\u4f20\u65b9\u6cd5\u300d\u4e0a\u4f20\u6587\u4ef6\u6216\u56fe\u7247\uff0c\u5f00\u53d1\u8005\u6839\u636e\u4e0a\u4f20\u63a5\u53e3\u5b9a\u4e49",l.a.createElement("code",null,"window.fileUploader"),"\u65b9\u6cd5\u6765\u5b9e\u73b0\uff0c\u5e76\u5c06\u4e0a\u4f20\u7ed3\u679c\u8fd4\u56de\u7ed9LEGO\u3002",l.a.createElement("br",null),"\u5982\u679c\u67d0\u8868\u5355\u9700\u8981\u81ea\u5b9a\u4e49\u4e0a\u4f20\u65b9\u6cd5\uff0c\u5728\u8868\u5355\u6269\u5c55\u4e2d\u58f0\u660e",l.a.createElement("code",null,"window.formUploader"),"\uff0c\u7528\u6cd5\u76f8\u540c\u3002\u53c2\u6570\u53ca\u7528\u6cd5Demo\uff1a"),l.a.createElement("pre",null,"/**\n * \u5b9e\u73b0 window.fileUploader\n * \n * file \u6587\u4ef6\u5bf9\u8c61\n * path \u4e0a\u4f20\u8868\u5355\u5728schema\u4e2d\u7684\u8def\u5f84\uff0c\u5982 \"root.info.image\"\uff0c\u5bcc\u6587\u672c\u7f16\u8f91\u5668\u7684path\u4e3a\u5e38\u91cf \"wysiwyg\"\n * cbs \u6309\u9700\u6267\u884c\u56de\u8c03\uff0c\u5c06\u4e0a\u4f20\u7ed3\u679c\u56de\u4f20\n * \n * cbs.progress: \u66f4\u65b0\u8fdb\u5ea6, int, \u503c\u4e3a0-100\uff08success\u65f6\u81ea\u52a8\u8bbe\u4e3a100\uff09\n * cbs.fail: \u5931\u8d25\u56de\u8c03, string, \u503c\u4e3a\u5931\u8d25\u8bf4\u660e\n * cbs.success: \u6210\u529f\u56de\u8c03, string, \u503c\u4e3a\u6587\u4ef6URI\n */\nwindow.fileUploader = function (file, path, cbs) {\n  var formData = new FormData();\n  formData.append('file', file);\n\n  $.ajax({\n    url: '/api/file/upload',\n    type: 'post',\n    data: formData,\n    contentType: false,\n    processData: false,\n    success: function(res) {\n      if (res.code === 0) {\n        cbs.success(res.data.imageUrl);\n      } else {\n        window._LEGO_UTILS_.toast(res.errorMsg);\n      }\n    }\n  });\n};"))),l.a.createElement("div",{className:"guide-node",id:"icon-font"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#icon-font"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"IconFont")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"\u7cfb\u7edf\u5185\u7f6e1500+",l.a.createElement("a",{href:"https://fontawesome.com/icons?d=gallery&m=free",target:"_blank",rel:"noopener noreferrer"},"Font Awesome"),"\u5b57\u4f53\u56fe\u6807\uff0c\u53ef\u5728\u300c\u7cfb\u7edf\u8bbe\u7f6e-\u5de6\u4fa7\u83dc\u5355\u300d\u3001\u300c\u5217\u8868\u914d\u7f6e-\u6570\u636e\u64cd\u4f5c\u300d\u76f4\u63a5\u586b\u5199\u56fe\u6807\u540d\u79f0\u8fdb\u884c\u914d\u7f6e\u3002"))),l.a.createElement("div",{className:"guide-node",id:"exec-script"},l.a.createElement("h2",{className:"help-title help-title-sub"},l.a.createElement("a",{className:"hash",href:"#exec-script"},l.a.createElement("i",{className:"fas fa-link"})),l.a.createElement("span",null,"\u6267\u884c\u811a\u672c")),l.a.createElement("div",{className:"help-content"},l.a.createElement("p",null,"\u6307\u5728\u67d0\u4e9b\u6a21\u5757\u914d\u7f6e\u6267\u884cJavaScript\u811a\u672c\uff0c\u4e00\u822c\u7528\u5728\u5217\u8868\u6a21\u5757\u7684\u64cd\u4f5c\u4e2d\uff0c\u5b9e\u73b0\u4ea4\u4e92\u590d\u6742\u7684\u6570\u636e\u64cd\u4f5c\u3002LEGO\u5185\u7f6e\u4e86\u4e30\u5bcc\u7684\u5de5\u5177\u7c7b",l.a.createElement("code",null,"_LEGO_UTILS_")),l.a.createElement("pre",null,"_LEGO_UTILS_ = {\n  popup.show(src, [width, height]), // src \u4e3aurl\u6216html\n  parseUrl([url]), // url \u9ed8\u8ba4\u53d6location.search\n  toast(msg, [duration]), // duration \u6beb\u79d2\uff0c\u9ed8\u8ba4 3000\n  copy(text),\n  md5(text),\n  dateFormat(ms, [fmt]), // fmt \u9ed8\u8ba4 yyyy-MM-dd hh:mm:ss\n  kv(key), // \u53d6url\u5bf9\u5e94\u53c2\u6570\u503c\n}")))))},Nt=function(){return l.a.createElement(Qe,null,l.a.createElement("div",{className:"guide-home"},l.a.createElement("h1",null,"\u4f7f\u7528LEGO\u5feb\u901f\u642d\u5efa\u540e\u53f0"),l.a.createElement("div",{className:"subtitle"},"LEGO\u62e5\u6709\u4e30\u5bcc\u7684\u5185\u5efa\u6a21\u5757\uff0c\u53ef\u5728\u6570\u5206\u949f\u5185\u642d\u5efa\u5f3a\u5927\u7684\u540e\u53f0\u754c\u9762"),l.a.createElement("div",{className:"entry"},l.a.createElement(d.b,{to:"/form/create",className:"item"},l.a.createElement("p",null,l.a.createElement("i",{className:"fas fa-th-list"})),l.a.createElement("h2",null,"\u521b\u5efa\u8868\u5355"),l.a.createElement("p",{className:"desc"},"\u4ee5JSON\u6570\u636e\u4e3a\u6a21\u578b\u81ea\u52a8\u521b\u5efa\u8868\u5355\uff0c\u652f\u6301\u65e5\u671f\u3001\u4e0a\u4f20\u3001\u7f16\u8f91\u5668\u7b49\u591a\u79cd\u8868\u5355\u6a21\u578b")),l.a.createElement(d.b,{to:"/table/create",className:"item"},l.a.createElement("p",null,l.a.createElement("i",{className:"fas fa-table"})),l.a.createElement("h2",null,"\u521b\u5efa\u5217\u8868"),l.a.createElement("p",{className:"desc"},"\u914d\u7f6e\u63a5\u53e3\u548c\u8868\u5934\uff0c\u4e00\u952e\u751f\u6210\u5217\u8868\u9875\uff0c\u652f\u6301\u6392\u5e8f\u3001\u591a\u9009\u3001\u641c\u7d22\u3001\u5206\u9875\u7b49\u5217\u8868\u5e38\u7528\u529f\u80fd")),l.a.createElement(d.b,{to:"/chart/create",className:"item"},l.a.createElement("p",null,l.a.createElement("i",{className:"fas fa-chart-line"})),l.a.createElement("h2",null,"\u521b\u5efa\u56fe\u8868"),l.a.createElement("p",{className:"desc"},"\u901a\u8fc7\u7b80\u5355\u914d\u7f6e\u751f\u6210\u6298\u7ebf\u56fe\u3001\u67f1\u72b6\u56fe\u3001\u997c\u72b6\u56fe\u7b49\u591a\u79cd\u6570\u636e\u56fe\u8868\uff0c\u652f\u6301\u5b9a\u65f6\u5237\u65b0")),l.a.createElement(d.b,{to:"/board/create",className:"item"},l.a.createElement("p",null,l.a.createElement("i",{className:"fas fa-tachometer-alt"})),l.a.createElement("h2",null,"\u521b\u5efa\u9762\u677f"),l.a.createElement("p",{className:"desc"},"\u4efb\u610f\u7ec4\u5408\u5df2\u521b\u5efa\u7684\u5217\u8868\u548c\u56fe\u8868\uff0c\u5b9a\u5236\u5177\u6709\u4e30\u5bcc\u5c55\u73b0\u529b\u7684\u4eea\u8868\u76d8\uff0c\u8ba9\u4f60\u7684\u7cfb\u7edf\u7efd\u653e\u5149\u5f69"))),l.a.createElement("div",{className:"info lnks"},"\u5e2e\u52a9\u6587\u6863\uff1a",l.a.createElement(d.b,{to:"/help/general"},"\u901a\u7528\u8bf4\u660e"),l.a.createElement(d.b,{to:"/help/setting"},"\u7cfb\u7edf\u8bbe\u7f6e"),l.a.createElement(d.b,{to:"/help/form"},"\u521b\u5efa\u8868\u5355"),l.a.createElement(d.b,{to:"/help/table"},"\u521b\u5efa\u5217\u8868"),l.a.createElement(d.b,{to:"/help/chart"},"\u521b\u5efa\u56fe\u8868"),l.a.createElement(d.b,{to:"/help/board"},"\u521b\u5efa\u9762\u677f")),l.a.createElement("div",{className:"info"},"Driven by React, JSON-Editor, Koa, Sqlite3. Powered by hanlongfei@sogou-inc.com")))},Ot=(i(112),function(e){var t=Object(o.useState)(1),i=Object(r.a)(t,2),n=i[0],s=i[1],a=Object(o.useState)({schema:{},data:{}}),c=Object(r.a)(a,2),h=c[0],d=c[1],u=Object(o.useState)(!1),p=Object(r.a)(u,2),m=p[0],f=p[1],g=Object(o.useRef)(null),b=Object(o.useRef)(null),_=Object(o.useRef)(null);return l.a.createElement(Qe,null,l.a.createElement("div",{className:"lego-card"},l.a.createElement(ct,{onReady:function(e){return g.current=e},show:1===n,schema:ut}),2===n&&l.a.createElement(l.a.Fragment,null,l.a.createElement(ct,{schema:h.schema,startval:h.data,editable:!0,onReady:function(e){return b.current=e},onSchemaUpdate:function(e){return d((function(t){return{data:t.data,schema:e}}))}}),l.a.createElement("div",{className:"form-ext card "+(m?"form-ext-show":"")},l.a.createElement("h3",null,l.a.createElement("label",null,"\u8868\u5355\u6269\u5c55"),l.a.createElement("span",{className:"switch-ext",onClick:function(){return f(!m)}},l.a.createElement("i",{className:"fa fa-angle-right"}))),l.a.createElement(ht,{type:"javascript",onReady:function(e){return _.current=e}}))),l.a.createElement("div",{className:"btns-row"},1===n&&[l.a.createElement(ot,{key:"next",value:"\u4e0b\u4e00\u6b65",onClick:function(){var e=g.current,t=e.validate();if(t.length>0)ze("\u8868\u5355\u586b\u5199\u6709\u8bef\uff1a<br />".concat(t.map((function(e){return e.path+": "+e.message})).join("<br />")));else{var i=e.getValue(),n=i.name,a=i.json,r=JSON.parse(a);d({schema:Re(r,n),data:r}),s(2)}},extClass:"btn-primary"}),l.a.createElement(ot,{key:"help",onClick:function(){return window.open("".concat("/lego","/help/form"))},value:"\u5e2e\u52a9",extClass:"btn-outline-primary"})],2===n&&[l.a.createElement(ot,{key:"save",value:"\u4fdd\u5b58",onClick:function(){var t=h.schema,i=g.current.getValue(),n=i.name,s=i.api,a=i.origin,r=i.desc,o=_.current.getValue();He("POST",bt,{name:n,api:s,origin:a,desc:r,ext:o,schema:JSON.stringify(t)}).then((function(){ze("\u4fdd\u5b58\u6210\u529f"),e.history.push("/form/list")})).catch((function(e){ze(e.msg||e.desc)}))},extClass:"btn-success"}),l.a.createElement(ot,{key:"log",value:"console.log",onClick:function(){console.log(b.current.getValue())},extClass:"btn-outline-primary"}),l.a.createElement(ot,{key:"help",onClick:function(){return window.open("".concat("/lego","/help/form"))},value:"\u5e2e\u52a9",extClass:"btn-outline-primary"}),l.a.createElement(ot,{key:"back",value:"\u8fd4\u56de",onClick:function(){return s(1)},extClass:"btn-outline-secondary"})])))}),St=function(e){var t=window.location.host,i="//".concat(t,"/lego-api/"),n={base:{name:"\u8868\u5355\u7ba1\u7406",api:i+"form/list?name={{name}}&pn={{pageNo}}",path:"data.list"},cols:[{key:"id",name:"ID",width:"80",fn:[]},{key:"name",name:"\u8868\u5355\u540d\u79f0",width:"240",fn:["search"]},{key:"desc",name:"\u5907\u6ce8",width:"",fn:[]}],handles:[{key:"view",name:"\u9884\u89c8",icon:"eye",url:"/form/use/{{id}}",action:"link"},{key:"edit",name:"\u7f16\u8f91",icon:"edit",url:"/form/edit/{{id}}",action:"link"},{key:"delete",name:"\u5220\u9664",icon:"trash-alt",url:i+"form/delete?id={{id}}",action:"api"}]};return l.a.createElement(Qe,null,l.a.createElement("div",{className:"lego-card"},l.a.createElement("div",{id:"tableTopHook",className:"table-top clearfix"},l.a.createElement("h2",{className:"title"},n.base.name),l.a.createElement("div",{className:"btns"},l.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:function(){return e.history.push("/form/create")}},l.a.createElement("i",{className:"fas fa-plus"}),l.a.createElement("span",null,"\u521b\u5efa\u8868\u5355")))),l.a.createElement(at,{config:n})))},Tt=i(24),Lt=function(e){var t=Object(o.useState)({name:"",api:"",origin:"",schema:"{}",desc:"",ext:"",loading:!0}),i=Object(r.a)(t,2),n=i[0],s=i[1],a=Object(o.useRef)(null),c=Object(o.useRef)(null);function h(e){var t=e.target,i=t.value,a=t.name;s(Object.assign({},n,Object(Tt.a)({},a,i)))}return Object(o.useEffect)((function(){var t=e.match.params.id;He("GET",bt,{id:t}).then((function(e){var t=e.data,i=t.name,n=t.api,a=t.origin,r=t.desc,o=t.schema,l=t.ext;s({name:i,api:n,origin:a,desc:r,schema:o,ext:l,loading:!1})}))}),[e.match.params.id]),l.a.createElement(Qe,{loading:n.loading},l.a.createElement("div",{className:"lego-card"},l.a.createElement(ct,{schema:JSON.parse(n.schema),onReady:function(e){return a.current=e},onSchemaUpdate:function(e){return s((function(t){return Object.assign({},t,{schema:JSON.stringify(e)})}))},editable:!0}),l.a.createElement("div",{className:"card card-body",style:{marginTop:20,background:"#fafafa"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-control-label"},"\u8868\u5355\u540d\u79f0"),l.a.createElement("input",{type:"text",value:n.name,onChange:h,name:"name",className:"form-control"}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-control-label"},"\u63d0\u4ea4API"),l.a.createElement("input",{type:"text",onChange:h,value:n.api,name:"api",className:"form-control"}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-control-label"},"\u6570\u636eAPI"),l.a.createElement("input",{type:"text",onChange:h,value:n.origin,name:"origin",className:"form-control"}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-control-label"},"\u8868\u5355\u5907\u6ce8"),l.a.createElement("input",{type:"text",onChange:h,value:n.desc,name:"desc",className:"form-control"}))),l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-control-label"},"\u8868\u5355\u6269\u5c55"),l.a.createElement("div",{style:{height:350}},l.a.createElement(ht,{code:n.ext,type:"javascript",onReady:function(e){return c.current=e}})))))),l.a.createElement("div",{className:"btns-row"},l.a.createElement(ot,{value:"\u4fdd\u5b58",onClick:function(){var t=Object.assign({},n,{id:e.match.params.id,ext:c.current.getValue(),loading:void 0});He("POST",bt,t).then((function(){ze("\u4fdd\u5b58\u6210\u529f"),e.history.push("/form/list")})).catch((function(e){ze(e.msg||e.desc)}))},extClass:"btn-success"}),l.a.createElement(ot,{value:"console.log",onClick:function(){console.log(a.current.getValue())},extClass:"btn-outline-primary"}),l.a.createElement(ot,{key:"help",onClick:function(){return window.open("".concat("/lego","/help/form"))},value:"\u5e2e\u52a9",extClass:"btn-outline-primary"}),l.a.createElement(ot,{value:"\u8fd4\u56de",onClick:function(){e.history.goBack()},extClass:"btn-outline-secondary"}))))},At=function(e){var t=Fe("debug"),i=Object(o.useContext)(Ye),n=Object(o.useState)({api:"",origin:"",schema:"{}",loading:!0}),s=Object(r.a)(n,2),a=s[0],c=s[1],h=Object(o.useRef)(null);return Object(o.useEffect)((function(){var t,i,n=e.match.params.id;return He("GET",bt,{id:n}).then((function(e){var n=e.data,s=n.api,a=n.origin,o=n.schema,l=n.ext,h=n.state;if(0===(void 0===h?0:h))ze(it.zh.form_invalid),c({schema:'{"title":"'.concat(it.zh.form_invalid,'","properties":{},"options":{"disable_collapse":true}}'),loading:!1});else{c({api:s,origin:a,schema:o,loading:!1});var d=Me(l),u=Object(r.a)(d,2);t=u[0],i=u[1]}})),function(){try{console.log("unmount ".concat(t)),delete window._onDataReady_,delete window._editor_,delete window._submitFix_,delete window._afterSubmit_,delete window[t],i.remove()}catch(e){console.warn(e)}}}),[e.match.params.id]),Object(o.useEffect)((function(){var e=Be();if(e&&"edit"===e.do&&a.origin&&void 0!==i.baseUrl){var t=qe(i.baseUrl,a.origin),n=De(t,e);He("GET",n).then((function(e){if(0===e.code)try{"function"===typeof window._onDataReady_?window._onDataReady_(h.current,e.data):h.current.setValue(e.data)}catch(t){ze(t.desc||t.msg),console.warn(t)}})).catch((function(e){return console.log(e)}))}if(We)try{setTimeout((function(){window.parent.postMessage(JSON.stringify({type:"LEGO_POPUP_HEIGHT",height:document.querySelector(".lego-card").offsetHeight}))}),100)}catch(s){console.warn(s)}}),[a.origin,i.baseUrl]),l.a.createElement(Qe,{loading:a.loading},l.a.createElement("div",{className:"lego-card"},l.a.createElement(ct,{schema:JSON.parse(a.schema),onReady:function(e){return h.current=e}}),l.a.createElement("div",{className:"btns-row"},l.a.createElement(ot,{onClick:function(){var e=h.current,t=e.validate(),n=Be();if(t.length>0)ze(["".concat(it.zh.form_validate_fail,"<br />"),"".concat(t.map((function(e){return e.path+": "+e.message})).join("<br />"))].join(""));else{var s=qe(i.baseUrl,a.api),r={};if("function"===typeof window._submitFix_){if(!(n=window._submitFix_(Object.assign(n,e.getValue()))))return void console.warn("Form: Function window._submitFix_ return invalid value");/json$/.test(n._contentType)&&(r.type="json")}else n.data=JSON.stringify(e.getValue());delete n.do,delete n.debug,delete n._contentType,He("POST",De(s),n,r).then((function(e){0===e.code&&(ze(it.zh.submit_success),We&&setTimeout((function(){try{window.parent._LEGO_UTILS_.popup.hide(!0)}catch(e){console.warn(e)}}),2e3)),"function"===typeof window._afterSubmit_&&window._afterSubmit_(n,e)})).catch((function(e){ze(e.msg||e.desc)}))}},value:it.zh.submit,extClass:"btn-primary"}),t&&l.a.createElement(ot,{onClick:function(){var e=h.current,t=Be();"function"===typeof window._submitFix_?t=window._submitFix_(Object.assign(t,e.getValue())):t.data=JSON.stringify(e.getValue()),delete t.do,delete t.debug,delete t._contentType,console.log(t)},value:"console.log",extClass:"btn-outline-primary"}),!We&&e.history.length>1&&l.a.createElement(ot,{onClick:function(){return e.history.goBack()},value:it.zh.back,extClass:"btn-outline-secondary"}))))},It=function(e){var t="/table/edit/:id"===e.match.path,i=Object(o.useRef)(null),n=Object(o.useRef)(null);return pt.title=t?"\u7f16\u8f91\u5217\u8868":"\u521b\u5efa\u5217\u8868",Object(o.useEffect)((function(){if(t){var s=e.match.params.id;He("GET",_t,{id:s}).then((function(e){var t=e.data,s=t.config,a=t.ext;s&&setTimeout((function(){i.current.setValue(Object.assign({toolbar:[]},JSON.parse(s)))})),a&&n.current.setValue(a)}))}}),[t,e.match.params.id]),l.a.createElement(Qe,null,l.a.createElement("div",{className:"lego-card"},l.a.createElement(ct,{onReady:function(e){return i.current=e},schema:pt}),l.a.createElement("div",{className:"card card-body",style:{marginTop:20,background:"#fafafa"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-control-label"},"\u5e38\u89c4\u529f\u80fd\u65e0\u6cd5\u6ee1\u8db3\u65f6\uff0c\u5229\u7528JavaScript\u8fdb\u884c\u6269\u5c55"),l.a.createElement("div",{style:{height:300}},l.a.createElement(ht,{type:"javascript",onReady:function(e){return n.current=e}})))))),l.a.createElement("div",{className:"btns-row"},l.a.createElement(ot,{onClick:function(){var s=i.current,a=s.validate();if(a.length>0)ze("\u8868\u5355\u586b\u5199\u6709\u8bef\uff1a<br />".concat(a.map((function(e){return e.path+": "+e.message})).join("<br />")));else{var r=s.getValue(),o=r.base,l=o.name,c=o.desc,h={name:l,origin:origin,desc:c,config:JSON.stringify(r),ext:n.current.getValue()};t&&(h.id=e.match.params.id),He("POST",_t,h).then((function(){ze("\u4fdd\u5b58\u6210\u529f"),e.history.push("/table/list")})).catch((function(e){ze(e.msg||e.desc)}))}},value:"\u63d0\u4ea4",extClass:"btn-primary"}),l.a.createElement(ot,{value:"\u5e2e\u52a9",onClick:function(){return window.open("".concat("/lego","/help/table"))},extClass:"btn-outline-primary"}),l.a.createElement(ot,{onClick:function(){return e.history.goBack()},value:"\u8fd4\u56de",extClass:"btn-outline-secondary"}))))},Pt=function(e){var t=window.location.host,i="//".concat(t,"/lego-api/"),n={base:{name:"\u5217\u8868\u7ba1\u7406",api:i+"table/list?name={{name}}&pn={{pageNo}}",path:"data.list"},cols:[{key:"id",name:"ID",width:"100",fn:[]},{key:"name",name:"\u5217\u8868\u540d\u79f0",width:"300",fn:["search"]},{key:"desc",name:"\u5907\u6ce8",width:"",fn:[]}],handles:[{key:"preview",name:"\u9884\u89c8",icon:"eye",url:"/table/use/{{id}}",action:"link"},{key:"edit",name:"\u7f16\u8f91",icon:"edit",url:"/table/edit/{{id}}",action:"link"},{key:"delete",name:"\u5220\u9664",icon:"trash-alt",url:i+"table/delete?id={{id}}",action:"api"}]};return l.a.createElement(Qe,null,l.a.createElement("div",{className:"lego-card"},l.a.createElement("div",{id:"tableTopHook",className:"table-top clearfix"},l.a.createElement("h2",{className:"title"},n.base.name),l.a.createElement("div",{className:"btns"},l.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:function(){return e.history.push("/table/create")}},l.a.createElement("i",{className:"fas fa-plus"}),l.a.createElement("span",null,"\u521b\u5efa\u5217\u8868")))),l.a.createElement(at,{config:n})))},Vt=function(e){var t=Object(o.useState)(null),i=Object(r.a)(t,2),n=i[0],s=i[1];return Object(o.useEffect)((function(){var t,i,n=e.match.params.id;return He("GET",_t,{id:n}).then((function(e){s(JSON.parse(e.data.config));var n=Me(e.data.ext),a=Object(r.a)(n,2);t=a[0],i=a[1]})),function(){try{s(null),console.log("unmount ".concat(t)),delete window[t],delete window._colFix_,delete window._pageFix_,i.remove()}catch(e){console.warn(e)}}}),[e.match.params.id]),l.a.createElement(Qe,null,l.a.createElement("div",{className:"lego-card"},l.a.createElement("div",{id:"tableTopHook",className:"table-top clearfix"},l.a.createElement("h2",{className:"title"},n?n.base.name:"")),n&&l.a.createElement(at,{config:n})))},Rt=function(e){var t="/chart/edit/:id"===e.match.path,i=Object(o.useRef)(null);return mt.title=t?"\u7f16\u8f91\u56fe\u8868":"\u521b\u5efa\u56fe\u8868",Object(o.useEffect)((function(){if(t){var n=e.match.params.id;He("GET",yt,{id:n}).then((function(e){var t=e.data.config;t&&i.current.setValue(JSON.parse(t))}))}}),[t,e.match.params.id]),l.a.createElement(Qe,null,l.a.createElement("div",{className:"lego-card"},l.a.createElement(ct,{onReady:function(e){return i.current=e},schema:mt}),l.a.createElement("div",{className:"btns-row"},l.a.createElement(ot,{onClick:function(){var n=i.current,s=n.validate();if(s.length>0)ze("\u8868\u5355\u586b\u5199\u6709\u8bef\uff1a<br />".concat(s.map((function(e){return e.path+": "+e.message})).join("<br />")));else{var a=n.getValue(),r={name:a.name,desc:a.desc,config:JSON.stringify(a)};t&&(r.id=e.match.params.id),He("POST",yt,r).then((function(){ze("\u4fdd\u5b58\u6210\u529f"),e.history.push("/chart/list")})).catch((function(e){ze(e.msg||e.desc)}))}},value:"\u63d0\u4ea4",extClass:"btn-primary"}),l.a.createElement(ot,{value:"\u5e2e\u52a9",onClick:function(){return window.open("".concat("/lego","/help/chart"))},extClass:"btn-outline-primary"}),l.a.createElement(ot,{onClick:function(){return e.history.goBack()},value:"\u8fd4\u56de",extClass:"btn-outline-secondary"}))))},Ft=function(e){var t=window.location.host,i="//".concat(t,"/lego-api/"),n={base:{name:"\u56fe\u8868\u7ba1\u7406",api:i+"chart/list?name={{name}}&pn={{pageNo}}",path:"data.list"},cols:[{key:"id",name:"ID",width:"100",fn:[]},{key:"name",name:"\u56fe\u8868\u540d\u79f0",width:"300",fn:["search"]},{key:"desc",name:"\u5907\u6ce8",width:"",fn:[]}],handles:[{key:"preview",name:"\u9884\u89c8",icon:"eye",url:"/chart/use/{{id}}",action:"link"},{key:"edit",name:"\u7f16\u8f91",icon:"edit",url:"/chart/edit/{{id}}",action:"link"},{key:"delete",name:"\u5220\u9664",icon:"trash-alt",url:i+"chart/delete?id={{id}}",action:"api"}]};return l.a.createElement(Qe,null,l.a.createElement("div",{className:"lego-card"},l.a.createElement("div",{id:"tableTopHook",className:"table-top clearfix"},l.a.createElement("h2",{className:"title"},n.base.name),l.a.createElement("div",{className:"btns"},l.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:function(){return e.history.push("/chart/create")}},l.a.createElement("i",{className:"fas fa-plus"}),l.a.createElement("span",null,"\u521b\u5efa\u56fe\u8868")))),l.a.createElement(at,{config:n})))},Bt=function(e){var t=Object(o.useState)(null),i=Object(r.a)(t,2),n=i[0],s=i[1];return Object(o.useEffect)((function(){var t=e.match.params.id;He("GET",yt,{id:t}).then((function(e){return s(JSON.parse(e.data.config))}))}),[e.match.params.id]),l.a.createElement(Qe,null,l.a.createElement("div",{className:"lego-card"},n&&l.a.createElement(rt,{config:n})))},Ht=function(e){var t="/board/edit/:id"===e.match.path,i=Object(o.useRef)(null),n=Object(o.useRef)({});function r(e,t){return t.map((function(t){var i=t.id,n=t.name;return{value:"/".concat(e,"/use/").concat(i),label:"".concat(n)}}))}return ft.title=t?"\u7f16\u8f91\u9762\u677f":"\u521b\u5efa\u9762\u677f",Object(o.useEffect)((function(){var o=i.current;function l(){return(l=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([He("GET","".concat(gt,"/table/list")),He("GET","".concat(gt,"/chart/list"))]).then((function(e){n.current.table=r("table",e[0].data.list),n.current.chart=r("chart",e[1].data.list)}));case 2:window.getBoardModules=function(e,t){var i=t.type;"none"!==i&&n.current[i]&&e.updateChoices(n.current[i])};case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(function(){l.apply(this,arguments)}(),t){var c=e.match.params.id;He("GET",vt,{id:c}).then((function(e){var t=e.data.config;t&&o.setValue(JSON.parse(t))}))}return function(){delete window.getBoardModules}}),[t,e.match.params.id]),l.a.createElement(Qe,null,l.a.createElement("div",{className:"lego-card"},l.a.createElement(ct,{onReady:function(e){return i.current=e},schema:ft}),l.a.createElement("div",{className:"btns-row"},l.a.createElement(ot,{onClick:function(){var n=i.current,s=n.validate();if(s.length>0)ze("\u8868\u5355\u586b\u5199\u6709\u8bef\uff1a<br />".concat(s.map((function(e){return e.path+": "+e.message})).join("<br />")));else{var a=n.getValue(),r={name:a.name,desc:a.desc,config:JSON.stringify(a)};t&&(r.id=e.match.params.id),He("POST",vt,r).then((function(){ze("\u4fdd\u5b58\u6210\u529f"),e.history.push("/board/list")})).catch((function(e){ze(e.msg||e.desc)}))}},value:"\u63d0\u4ea4",extClass:"btn-primary"}),l.a.createElement(ot,{value:"\u5e2e\u52a9",onClick:function(){return window.open("".concat("/lego","/help/board"))},extClass:"btn-outline-primary"}),l.a.createElement(ot,{onClick:function(){return e.history.goBack()},value:"\u8fd4\u56de",extClass:"btn-outline-secondary"}))))},zt=function(e){var t=window.location.host,i="//".concat(t,"/lego-api/"),n={base:{name:"\u9762\u677f\u7ba1\u7406",api:i+"board/list?name={{name}}&pn={{pageNo}}",path:"data.list"},cols:[{key:"id",name:"ID",width:"100",fn:[]},{key:"name",name:"\u9762\u677f\u540d\u79f0",width:"300",fn:["search"]},{key:"desc",name:"\u5907\u6ce8",width:"",fn:[]}],handles:[{key:"preview",name:"\u9884\u89c8",icon:"eye",url:"/board/use/{{id}}",action:"link"},{key:"edit",name:"\u7f16\u8f91",icon:"edit",url:"/board/edit/{{id}}",action:"link"},{key:"delete",name:"\u5220\u9664",icon:"trash-alt",url:i+"board/delete?id={{id}}",action:"api"}]};return l.a.createElement(Qe,null,l.a.createElement("div",{className:"lego-card"},l.a.createElement("div",{id:"tableTopHook",className:"table-top clearfix"},l.a.createElement("h2",{className:"title"},n.base.name),l.a.createElement("div",{className:"btns"},l.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:function(){return e.history.push("/board/create")}},l.a.createElement("i",{className:"fas fa-plus"}),l.a.createElement("span",null,"\u521b\u5efa\u9762\u677f")))),l.a.createElement(at,{config:n})))},Mt=(i(113),function(e){var t=Object(o.useContext)(Ye),i=Object(o.useState)({list:[]}),n=Object(r.a)(i,2),s=n[0],a=n[1],c=Object(o.useState)(0),h=Object(r.a)(c,2),d=h[0],u=h[1],p=Object(o.useRef)({0:!0});return Object(o.useEffect)((function(){var t=e.match.params.id;He("GET",vt,{id:t}).then((function(e){a(JSON.parse(e.data.config))}))}),[e.match.params.id]),l.a.createElement(Qe,null,l.a.createElement(o.Fragment,null,"tab"===s.mode&&l.a.createElement("div",{className:"board-tabs"},s.list.map((function(e,t){return l.a.createElement("div",{key:e.name,onClick:function(){p.current[t]=!0,u(t)},className:"board-tab-item"+(t===d?" board-tab-cur":"")},e.name)})))),s.list&&l.a.createElement("div",{className:"board-content board-mode-"+s.mode},s.list.map((function(e,i){return"tab"!==s.mode||p.current[i]?l.a.createElement("div",{className:"lego-card"+("standalone"===t.mode?" lego-card-inner":""),key:e.name,style:{padding:"10px 0",marginBottom:"tiled"===s.mode&&15,height:"tiled"===s.mode&&e.height+20,display:i===d||"tiled"===s.mode?"block":"none"}},e.mods.map((function(e,t){return l.a.createElement("iframe",{key:t,title:e.module,scrolling:"no",frameBorder:"0",className:"col-md-".concat(e.grid),style:{height:"100%"},src:"/lego"+e.module})}))):l.a.createElement("div",{key:e.name})}))))}),Dt=(i(114),function(e){var t=Object(o.useRef)(null),i=Object(o.useRef)(null);return l.a.createElement("div",{className:"lego-login"},l.a.createElement("div",{className:"login-main"},l.a.createElement("div",{className:"login-box"},l.a.createElement("div",{className:"login-title"},it.zh.admin_name),l.a.createElement("div",{className:"login-form"},l.a.createElement("div",{className:"login-input"},l.a.createElement("i",{className:"fas fa-user"}),l.a.createElement("input",{type:"text",placeholder:"".concat(it.zh.please_enter).concat(it.zh.usr),ref:t})),l.a.createElement("div",{className:"login-input"},l.a.createElement("i",{className:"fas fa-unlock"}),l.a.createElement("input",{type:"password",placeholder:"".concat(it.zh.please_enter).concat(it.zh.pwd),ref:i})),l.a.createElement("div",{className:"login-btn",onClick:function(){var e={};t.current.value&&i.current.value?(e.userName=t.current.value,e.passWord=$e(i.current.value),He("POST","",e).then((function(e){console.log("login",e),window.location.replace("".concat("/lego","/"))}))):ze(it.zh.usr_pwd_empty)}},it.zh.login)))))}),qt=function(){var e=window.location.host,t="//".concat(e,"/lego-api/"),i={base:{name:"\u64cd\u4f5c\u65e5\u5fd7",api:t+"log/list?pn={{pageNo}}&mod_type={{mod_type}}&data_id={{data_id}}",path:"data.list"},cols:[{key:"id",name:"ID",width:"80",fn:[]},{key:"mod_type",name:"\u6240\u5c5e\u6a21\u5757",width:"150",fn:[]},{key:"data_id",name:"\u6570\u636eID",width:"",fn:["search"]},{key:"action",name:"\u52a8\u4f5c",width:"",fn:[]},{key:"operator",name:"\u64cd\u4f5c\u8005",width:"",fn:[]},{key:"time",name:"\u65f6\u95f4",width:"",fn:[]}],handles:[{key:"view",name:"\u67e5\u770b",icon:"eye",url:"view_log_detail({{id}})",action:"script"},{key:"edit",name:"\u6062\u590d",icon:"edit",url:"".concat(t,"log/recover?id={{id}}"),action:"api"}],toolbar:[{type:"button",name:"\u6e05\u7406\u65e5\u5fd7\uff0c\u4fdd\u7559\u6700\u8fd11000\u6761\u8bb0\u5f55",key:"clear_log",button_opts:{style:"danger",action:"api",url:"".concat(t,"log/clear")}},{type:"custom",name:"\u7b5b\u9009\u65e5\u5fd7",key:"filter_label",custom_opts:{html:'<span style="margin-left:15px">\u7b5b\u9009</span>'}},{type:"choices",name:"\u9009\u62e9\u6a21\u5757",key:"search_mod_type",choices_opts:{source_type:"list",source_data:":\u5168\u90e8\u6a21\u5757;form:\u8868\u5355;table:\u5217\u8868;chart:\u56fe\u8868;board:\u9762\u677f;setting:\u7cfb\u7edf\u8bbe\u7f6e"}}]};return Object(o.useEffect)((function(){return window._colFix_=function(e,t,i){if("operator"===e)return t||"--";if("mod_type"===e){return{form:"\u8868\u5355",table:"\u5217\u8868",chart:"\u56fe\u8868",board:"\u9762\u677f",setting:"\u7cfb\u7edf\u8bbe\u7f6e"}[t]}},window.view_log_detail=function(e){He("GET","".concat(t,"log"),{id:e}).then((function(e){if(0===e.code){var t=e.data.config?JSON.parse(e.data.config):null;t&&t.schema&&(t.schema=JSON.parse(t.schema)),t&&t.config&&(t.config=JSON.parse(t.config));var i=["outline:none;display:block;width:800px;height:500px;font-size:14px","resize:none;border:none;border-radius:5px;background:#111;color:#ddd"].join(";"),n=['<div style="padding:15px;width:830px;height:530px">','<textarea readonly="true" style="'.concat(i,'">').concat(JSON.stringify(t,null,4),"</textarea>"),"</div>"].join("");C.show(n,830,530)}}))},function(){delete window.view_log_detail,delete window._colFix_}}),[t]),l.a.createElement(Qe,null,l.a.createElement("div",{className:"lego-card"},l.a.createElement("div",{id:"tableTopHook",className:"table-top clearfix"},l.a.createElement("h2",{className:"title"},i.base.name)),l.a.createElement(at,{config:i})))},Ut=(i(115),i(116),function(){var e=Object(o.useState)({}),t=Object(r.a)(e,2),i=t[0],n=t[1];return Object(o.useEffect)((function(){window.location.pathname.indexOf("/login")>0||He("GET","/lego-api/setting").then(function(){var e=Object(a.a)(s.a.mark((function e(t){var i,a,r,o,l,c,h,d,u,p,m,f,g,b,_,y,v;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.data,a=i.name,r=void 0===a?"\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf":a,o=i.baseUrl,l=void 0===o?"":o,c=i.permissionApi,h=void 0===c?"":c,d=i.sideMenu,u=void 0===d?"":d,p=i.uploadFn,m=void 0===p?"":p,f=[],g=!1,b="",_="",document.title=r,!h){e.next=19;break}return e.prev=7,e.next=10,He("GET",qe(l,h));case 10:y=e.sent,0===u.indexOf("function main")?(v=new Function("return ".concat(u))()(y.data),f=v.menu||[],g=v.admin||!1,b=v.user||"",_=v.group||""):ze("\u8bf7\u5728\u7cfb\u7edf\u8bbe\u7f6e\u4e2d\u5b9a\u4e49\u6743\u9650/\u83dc\u5355\u914d\u7f6e\u51fd\u6570\uff01"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),console.warn("PermissionApi Error:",e.t0);case 17:e.next=21;break;case 19:try{f=JSON.parse(u)}catch(s){console.warn("Menu config error:",s)}g=!0;case 21:n({name:r,baseUrl:l,permissionApi:h,sideMenu:u,uploadFn:m,_menu:f,_admin:g,_user:b,_group:_});case 22:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.warn(e)}))}),[]),Object(o.useEffect)((function(){var e="";try{i.uploadFn&&(e=Me(i.uploadFn),console.log("FileUploader mounted!"))}catch(t){console.warn(t)}return function(){e.length>0&&(window[e]=null)}}),[i.uploadFn]),l.a.createElement(Ye.Provider,{value:i},l.a.createElement("section",{className:"frame-main"},l.a.createElement(d.a,{basename:"/lego"},l.a.createElement(u.c,null,l.a.createElement(u.a,{path:"/login",component:Dt}),l.a.createElement(Ze,null,l.a.createElement(u.a,{exact:!0,path:["/index","/"],render:Nt}),l.a.createElement(u.a,{path:"/setting",render:function(){return l.a.createElement(wt,{updateSetting:n})}}),l.a.createElement(u.a,{path:"/form/create",component:Ot}),l.a.createElement(u.a,{path:"/form/list",component:St}),l.a.createElement(u.a,{path:"/form/edit/:id",component:Lt}),l.a.createElement(u.a,{path:"/form/use/:id",component:At}),l.a.createElement(u.a,{path:"/table/create",component:It}),l.a.createElement(u.a,{path:"/table/edit/:id",component:It}),l.a.createElement(u.a,{path:"/table/list",component:Pt}),l.a.createElement(u.a,{path:"/table/use/:id",component:Vt}),l.a.createElement(u.a,{path:"/chart/create",component:Rt}),l.a.createElement(u.a,{path:"/chart/edit/:id",component:Rt}),l.a.createElement(u.a,{path:"/chart/list",component:Ft}),l.a.createElement(u.a,{path:"/chart/use/:id",component:Bt}),l.a.createElement(u.a,{path:"/board/create",component:Ht}),l.a.createElement(u.a,{path:"/board/edit/:id",component:Ht}),l.a.createElement(u.a,{path:"/board/list",component:zt}),l.a.createElement(u.a,{path:"/board/use/:id",component:Mt}),l.a.createElement(u.a,{path:"/help/setting",component:Et}),l.a.createElement(u.a,{path:"/help/form",component:xt}),l.a.createElement(u.a,{path:"/help/table",component:Ct}),l.a.createElement(u.a,{path:"/help/chart",component:kt}),l.a.createElement(u.a,{path:"/help/general",component:jt}),l.a.createElement(u.a,{path:"/log/list",component:qt}))))))});h.a.render(l.a.createElement(Ut,null),document.getElementById("root"))},57:function(e){e.exports=JSON.parse('{".jsoneditor-twbs4-text-button":"background:none;padding:0;border:0;color:currentColor","td > .form-group":"margin-bottom:0",".json-editor-btn-upload":"margin-top:1rem",".je-noindent .card":"padding:0;border:0",".je-tooltip:hover::before":"display:block;position:absolute;font-size:0.8em;color:#fff;border-radius:0.2em;content:attr(title);background-color:#000;margin-top:-2.5em;padding:0.3em",".je-tooltip:hover::after":"display:block;position:absolute;font-size:0.8em;color:#fff",".select2-container--default .select2-selection--single":"height:calc(1.5em + 0.75rem + 2px)",".select2-container--default   .select2-selection--single   .select2-selection__arrow":"height:calc(1.5em + 0.75rem + 2px)",".select2-container--default   .select2-selection--single   .select2-selection__rendered":"line-height:calc(1.5em + 0.75rem + 2px)",".selectize-control.form-control":"padding:0",".selectize-dropdown.form-control":"padding:0;height:auto",".je-upload-preview img":"float:left;margin:0 0.5rem 0.5rem 0;max-width:100%;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem 0;border:2px dashed black;width:100%;height:60px;background:teal;transition:all 0.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0, 0, 0, 0.6);left:50%;top:50%;transform:translate(-50%, -50%)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"}')},61:function(e,t,i){e.exports=i(117)},89:function(e,t){},91:function(e,t){}},[[61,4,5]]]);